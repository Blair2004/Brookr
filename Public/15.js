(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{pGcJ:function(e,o,t){"use strict";t.r(o);var r=t("8AiQ"),n=t("5/c3"),i=t("BLjT"),s=t("CD38"),c=t("1C3z"),a=t("z35L"),d=t("IugH"),f=t("2pW/"),u=t("ZSGP"),l=t("AFHi");function p(e,o){if(1&e&&c.Zb(0,"cb-field",9),2&e){var t=o.$implicit,r=c.qc(2);c.wc("field",t)("group",r.form.sections[0].formGroup)}}function h(e,o){if(1&e&&(c.ec(0,"form",7),c.Lc(1,p,1,2,"cb-field",8),c.dc()),2&e){var t=c.qc();c.wc("formGroup",t.form.formGroup),c.Kb(1),c.wc("ngForOf",t.form.sections[0].fields)}}var m=function(){function e(e,o,t,r,n){this.tendoo=e,this.store=o,this.snackbar=t,this.data=r,this.dialog=n,this.orderId=r.id}return e.prototype.ngOnInit=function(){var e=this;setTimeout((function(){e.tendoo.forms.getPublicForm("broork.loads-drivers",e.orderId).subscribe((function(o){console.log(o),e.form=s.a.buildForm(o),console.log(e.form)}),(function(o){e.snackbar.open(o.error.message||o.message,"OK",{duration:3e3})}))}),0)},e.prototype.closeDialog=function(){this.dialog.getDialogById("assign-load").close()},e.prototype.saveDriverDetails=function(){var e=this;if(this.form.sections.forEach((function(e){return s.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});this.form.sections.forEach((function(e){return s.a.deactivateFields(e.fields)})),this.tendoo.put(this.tendoo.baseUrl+"brookr/loads/update-driver/"+this.orderId,this.form.formGroup.value).subscribe((function(o){e.snackbar.open(o.message,"OK",{duration:3e3}),e.dialog.getDialogById("assign-load").close()}),(function(o){e.form.sections.forEach((function(e){return s.a.enableFields(e.fields)})),e.snackbar.open(o.error.message||o.message,"OK",{duration:5e3})}))},e.\u0275fac=function(o){return new(o||e)(c.Yb(a.b),c.Yb(d.a),c.Yb(f.a),c.Yb(i.a),c.Yb(i.b))},e.\u0275cmp=c.Sb({type:e,selectors:[["app-load-assignation"]],decls:10,vars:1,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"box-title","flex","flex-shrink-0","justify-center","py-4","border-b","border-gray-400","items-center","text-2xl"],[1,"flex","flex-auto","overflow-y-auto","p-4"],["class","field container",3,"formGroup",4,"ngIf"],[1,"box-title","flex","flex-shrink-0","justify-end","border-t","border-gray-400","items-center","text-xl","p-2"],[1,"ml-2","bg-red-400","text-white","rounded","border","border-red-600","px-3","py-2",3,"click"],[1,"ml-2","rounded","border","border-gray-400","px-3","py-2",3,"click"],[1,"field","container",3,"formGroup"],[3,"field","group",4,"ngFor","ngForOf"],[3,"field","group"]],template:function(e,o){1&e&&(c.ec(0,"div",0),c.ec(1,"div",1),c.Mc(2,"Assign Driver"),c.dc(),c.ec(3,"div",2),c.Lc(4,h,2,2,"form",3),c.dc(),c.ec(5,"div",4),c.ec(6,"button",5),c.mc("click",(function(){return o.closeDialog()})),c.Mc(7,"Cancel"),c.dc(),c.ec(8,"button",6),c.mc("click",(function(){return o.saveDriverDetails()})),c.Mc(9,"Save"),c.dc(),c.dc(),c.dc()),2&e&&(c.Kb(4),c.wc("ngIf",o.form))},directives:[r.l,u.t,u.n,u.h,r.k,l.c],styles:["[_nghost-%COMP%]{height:100%;width:100%}"]}),e}();function b(e,o){if(1&e&&c.Zb(0,"cb-field",9),2&e){var t=o.$implicit,r=c.qc(2);c.wc("field",t)("group",r.form.sections[0].formGroup)}}function g(e,o){if(1&e&&(c.ec(0,"form",7),c.Lc(1,b,1,2,"cb-field",8),c.dc()),2&e){var t=c.qc();c.wc("formGroup",t.form.formGroup),c.Kb(1),c.wc("ngForOf",t.form.sections[0].fields)}}var v=function(){function e(e,o,t,r){this.tendoo=e,this.menu=o,this.snackbar=t,this.dialogRef=r,this.orderId=this.menu.id}return e.prototype.ngOnInit=function(){var e=this;setTimeout((function(){e.tendoo.forms.getPublicForm("broork.loads-status",e.orderId).subscribe((function(o){e.form=s.a.buildForm(o)}),(function(o){e.snackbar.open(o.error.message||o.message,"OK",{duration:3e3})}))}),0)},e.prototype.saveStatus=function(){var e=this;if(this.form.sections.forEach((function(e){return s.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:6e3});this.form.sections.forEach((function(e){return s.a.deactivateFields(e.fields)})),this.tendoo.put(this.tendoo.baseUrl+"brookr/loads/update-status/"+this.orderId,this.form.formGroup.value).subscribe((function(o){e.snackbar.open(o.message,"OK",{duration:3e3}),e.dialogRef.close()}),(function(o){e.snackbar.open(o.error.message,"OK",{duration:6e3}),e.form.sections.forEach((function(e){return s.a.enableFields(e.fields)}))}))},e.prototype.closeDialog=function(){this.dialogRef.close()},e.\u0275fac=function(o){return new(o||e)(c.Yb(a.b),c.Yb(i.a),c.Yb(f.a),c.Yb(i.d))},e.\u0275cmp=c.Sb({type:e,selectors:[["app-load-status"]],decls:10,vars:1,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"box-title","flex","flex-shrink-0","justify-center","py-4","border-b","border-gray-400","items-center","text-2xl"],[1,"flex","flex-auto","overflow-y-auto","p-4"],["class","field container",3,"formGroup",4,"ngIf"],[1,"box-title","flex","flex-shrink-0","justify-end","border-t","border-gray-400","items-center","text-xl","p-2"],[1,"ml-2","bg-red-400","text-white","rounded","border","border-red-600","px-3","py-2",3,"click"],[1,"ml-2","rounded","border","border-gray-400","px-3","py-2",3,"click"],[1,"field","container",3,"formGroup"],[3,"field","group",4,"ngFor","ngForOf"],[3,"field","group"]],template:function(e,o){1&e&&(c.ec(0,"div",0),c.ec(1,"div",1),c.Mc(2,"Change Status"),c.dc(),c.ec(3,"div",2),c.Lc(4,g,2,2,"form",3),c.dc(),c.ec(5,"div",4),c.ec(6,"button",5),c.mc("click",(function(){return o.closeDialog()})),c.Mc(7,"Cancel"),c.dc(),c.ec(8,"button",6),c.mc("click",(function(){return o.saveStatus()})),c.Mc(9,"Save"),c.dc(),c.dc(),c.dc()),2&e&&(c.Kb(4),c.wc("ngIf",o.form))},directives:[r.l,u.t,u.n,u.h,r.k,l.c],styles:[""]}),e}(),y=t("ryqd"),x=function(){return(x=Object.assign||function(e){for(var o,t=1,r=arguments.length;t<r;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);return e}).apply(this,arguments)};function w(e,o){if(1&e){var t=c.fc();c.ec(0,"cb-table",5),c.mc("action",(function(e){return c.Fc(t),c.qc().handleAction(e)}))("sort",(function(e){return c.Fc(t),c.qc().handleSort(e)}))("refresh",(function(e){return c.Fc(t),c.qc().handleRefresh(e)}))("page",(function(e){return c.Fc(t),c.qc().handlePagineNavigation(e)}))("search",(function(e){return c.Fc(t),c.qc().handleSearch(e)}))("search-status",(function(e){return c.Fc(t),c.qc().handleSearchStatus(e)})),c.dc()}if(2&e){var r=c.qc();c.wc("is-loading",r.isLoading)("crud",r.config)}}var k=function(){function e(e,o,t,r){this.tendoo=e,this.snackbar=o,this.dialog=t,this.router=r,this.isLoading=!1,this.sort={},this.search={},this.page={},this.perPage={per_page:10}}return e.prototype.ngOnInit=function(){var e=this;console.log(this.tendoo),this.tendoo.crud.getConfig("brookr.loads",x(x(x(x({},this.page),this.search),this.sort),this.perPage)).subscribe((function(o){e.config=o}))},e.prototype.handleAction=function(e){var o=this;"DELETE"===e.menu.type?this.tendoo.crud.delete(e.menu.url.replace("{id}",e.row.id)).subscribe((function(t){o.snackbar.open(t.message,"OK",{duration:3e3}),o.ngOnInit(),o.dialog.getDialogById(e.menu.namespace).close()}),(function(t){o.snackbar.open(t.error.message||"An unexpected error occured","OK",{duration:5e3}),o.dialog.getDialogById(e.menu.namespace).close()})):"GOTO"===e.menu.type?this.router.navigateByUrl(e.menu.url.replace("{id}",e.row.id)):"OPEN"===e.menu.type&&"open.assign_driver"===e.menu.namespace?this.openLoadAssignation(e.menu):"OPEN"===e.menu.type&&"open.change_status"===e.menu.namespace&&this.openLoadChangeStatus(e.menu)},e.prototype.openLoadChangeStatus=function(e){var o=this;this.dialog.open(v,{id:"load-status",data:e,height:[this.tendoo.responsive.isSM(),this.tendoo.responsive.isXS()].includes(!0)?"80%":"400px",width:[this.tendoo.responsive.isSM(),this.tendoo.responsive.isXS()].includes(!0)?"70%":"500px"}).afterOpened().subscribe((function(e){console.log(e),o.ngOnInit()}))},e.prototype.openLoadAssignation=function(e){var o=this;this.dialog.open(m,{id:"assign-load",data:e,height:[this.tendoo.responsive.isSM(),this.tendoo.responsive.isXS()].includes(!0)?"80%":"400px",width:[this.tendoo.responsive.isSM(),this.tendoo.responsive.isXS()].includes(!0)?"70%":"500px"}).afterClosed().subscribe((function(e){console.log(e),o.ngOnInit()}))},e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.handleSearchStatus=function(e){!1===e&&(this.search={},this.ngOnInit())},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.\u0275fac=function(o){return new(o||e)(c.Yb(a.b),c.Yb(f.a),c.Yb(i.b),c.Yb(n.b))},e.\u0275cmp=c.Sb({type:e,selectors:[["app-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search","search-status",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search","search-status"]],template:function(e,o){1&e&&(c.ec(0,"app-layout"),c.ec(1,"div",0),c.ec(2,"span",1),c.Mc(3,"Available Loads"),c.dc(),c.ec(4,"p",2),c.Mc(5,"Manage all assigned loads delivery"),c.dc(),c.dc(),c.ec(6,"div",3),c.Lc(7,w,1,2,"cb-table",4),c.dc(),c.dc()),2&e&&(c.Kb(7),c.wc("ngIf",o.config))},directives:[y.a,r.l,l.b],styles:[""]}),e}(),O=t("k46B"),I=t("eTQ6");function S(e,o){1&e&&(c.ec(0,"div",2),c.ec(1,"p",3),c.Mc(2,"Create Load"),c.dc(),c.ec(3,"p",4),c.Mc(4,"Loads are assigned to drivers for delivery."),c.dc(),c.dc())}function F(e,o){1&e&&(c.ec(0,"div",2),c.ec(1,"p",3),c.Mc(2,"Edit Load"),c.dc(),c.ec(3,"p",4),c.Mc(4,"Loads are assigned to drivers for delivery."),c.dc(),c.dc())}function G(e,o){if(1&e&&(c.ec(0,"div",8),c.Zb(1,"input",9),c.ec(2,"span",10),c.Mc(3,"Can automatically be generated."),c.dc(),c.dc()),2&e){var t=o.$implicit;c.Kb(1),c.wc("formControl",t.control)}}function L(e,o){if(1&e){var t=c.fc();c.ec(0,"app-tabs",11),c.mc("submit",(function(e){return c.Fc(t),c.qc(2).handleSubmit(e)})),c.dc()}if(2&e){var r=c.qc(2);c.wc("form",r.form)}}function K(e,o){if(1&e&&(c.ec(0,"form",5),c.Lc(1,G,4,1,"div",6),c.Lc(2,L,1,1,"app-tabs",7),c.dc()),2&e){var t=c.qc();c.wc("formGroup",t.form.formGroup),c.Kb(1),c.wc("ngForOf",t.form.sections[0].fields),c.Kb(1),c.wc("ngIf",t.form)}}var M=function(){function e(e,o,t,r,n){this.activeSnapShot=e,this.tendoo=o,this.snackbar=t,this.router=r,this.loadsService=n,this.mode="create"}return e.prototype.ngOnInit=function(){var e=this;this.activeSnapShot.paramMap.subscribe((function(o){o.get("id")&&(e.mode="edit",e.id=+o.get("id"))})),this.tendoo.forms.getPublicForm("brookr.loads",this.id||void 0).subscribe((function(o){e.form=s.a.buildForm(o),e.form.sections.forEach((function(e){"main"===e.namespace&&(e.render=!1)})),e.form=o}))},e.prototype.handleSubmit=function(e){var o=this;if(this.form.sections.forEach((function(e){return s.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});this.form.sections.forEach((function(e){return s.a.deactivateFields(e.fields)})),console.log(this.form.formGroup.value),this.loadsService.registerLoads(this.form.formGroup.value,this.id).subscribe((function(e){o.snackbar.open(e.message,"OK",{duration:3e3}),o.router.navigateByUrl("/dashboard/loads")}),(function(e){o.snackbar.open(e.error.message||e.message||"An unexpected error has occured.","OK",{duration:6e3}),o.form.sections.forEach((function(e){return s.a.enableFields(e.fields)}))}))},e.\u0275fac=function(o){return new(o||e)(c.Yb(n.a),c.Yb(a.b),c.Yb(f.a),c.Yb(n.b),c.Yb(O.a))},e.\u0275cmp=c.Sb({type:e,selectors:[["app-manage"]],decls:4,vars:3,consts:[["class","mb-2",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"mb-2"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[1,"text-gray-700"],[3,"formGroup"],["class","mb-4",4,"ngFor","ngForOf"],[3,"form","submit",4,"ngIf"],[1,"mb-4"],["type","text","placeholder","Load Title",1,"rounded","border","border-gray-400","p-2","w-full",3,"formControl"],[1,"text-gray-600","my-1","text-xs","block"],[3,"form","submit"]],template:function(e,o){1&e&&(c.ec(0,"app-layout"),c.Lc(1,S,5,0,"div",0),c.Lc(2,F,5,0,"div",0),c.Lc(3,K,3,3,"form",1),c.dc()),2&e&&(c.Kb(1),c.wc("ngIf","create"===o.mode),c.Kb(1),c.wc("ngIf","edit"===o.mode),c.Kb(1),c.wc("ngIf",o.form))},directives:[y.a,r.l,u.t,u.n,u.h,r.k,u.c,u.m,u.e,I.a],styles:[""]}),e}(),Y=[{path:"",component:k},{path:"create",component:M},{path:"edit/:id",component:M}],E=function(){function e(){}return e.\u0275mod=c.Wb({type:e}),e.\u0275inj=c.Vb({factory:function(o){return new(o||e)},imports:[[n.e.forChild(Y)],n.e]}),e}(),q=t("428I");t.d(o,"LoadsModule",(function(){return C}));var C=function(){function e(){}return e.\u0275mod=c.Wb({type:e}),e.\u0275inj=c.Vb({factory:function(o){return new(o||e)},imports:[[r.c,E,q.a]]}),e}()}}]);