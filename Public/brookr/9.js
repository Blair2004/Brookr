(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{CD38:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("1C3z"),r=n("ZSGP"),i=function(){function e(){}return e.from=function(e){if(e){"string"!=typeof e&&(e=(e=e.filter((function(e){return"string"==typeof e}))).join("|"));var t,n=[],o=e.split("|"),i=/(min)\:([0-9])+/g,c=/(max)\:([0-9])+/g,a=/(same):(\w+)/g;return o.forEach((function(e){var o;"required"==e?n.push(r.s.required):"email"==e?n.push(r.s.email):(t=i.exec(e))?n.push(r.s.minLength(t[2])):(t=c.exec(e))?n.push(r.s.maxLength(t[2])):(t=a.exec(e))?n.push((o=t[2],function(e){return e.value!==e.parent.get(o).value?{matches:{formControl:e.parent.get(o),formControlName:o}}:null})):"number"==e&&n.push((function(e){return/^\d+$/.exec(e.value)?null:{number:!0}}))})),n}return null},e.extractControls=function(e,t){var n=this;void 0===t&&(t=!1);var o={};return e.forEach((function(e){if(void 0===e.control&&0==t)throw'Unable to use the validation control for the field : "'+e.name+"\". Please make sure to define the '.control' property for this field.";e.control&&(e.control.setValidators(n.from(e.validation)),o[e.name]=e.control)})),o},e.buildFormControls=function(e){return e.forEach((function(e){null==e.control?e.control=new r.d(e.value?e.value:null):e.control.setValue(e.value)})),this.extractControls(e)},e.buildFormControl=function(e){return null==e.control?e.control=new r.d(e.value||null):e.control.setValue(e.value||null),e.reset=new o.p,this.extractControls([e])[e.name]},e.touchAllFields=function(e){Object.keys(e.controls).forEach((function(t){e.get(t).markAsTouched()}))},e.buildFormGroup=function(t){return t.forEach((function(t){t.control=e.buildFormControl(t)})),{fields:t,formGroup:new r.g(e.extractControls(t))}},e.deactivateFields=function(e){e.forEach((function(e){return e.control.disable()}))},e.enableFields=function(e){e.forEach((function(e){return e.control.enable()}))},e.throwFieldsError=function(e,t,n){var o=function(o){e.get(o).setErrors({error:!0}),t.forEach((function(e){e.name===o&&(e.errors=n[e.name])}))};for(var r in n)o(r)},e.noNullValue=function(e){var t={};for(var n in e.value)null!==e.value[n]&&(t[n]=e.value[n]);return t},e.buildForm=function(t){var n={};return t.sections.forEach((function(t){var o=e.buildFormGroup(t.fields).formGroup;t.formGroup=o,n[t.namespace]=t.formGroup})),t.formGroup=new r.g(n),t},e.touchFormFields=function(t){t.sections.forEach((function(t){return e.touchAllFields(t.formGroup)}))},e.deactivateFormFiiels=function(t){t.sections.forEach((function(t){return e.deactivateFields(t.fields)}))},e.enableFormFields=function(t){t.sections.forEach((function(t){return e.enableFields(t.fields)}))},e}()},Nt43:function(e,t,n){"use strict";n.r(t);var o=n("8AiQ"),r=n("5/c3"),i=n("0BcZ"),c=n("1C3z"),a=n("z35L"),s=n("2pW/"),u=n("BLjT"),f=n("ryqd"),l=n("AFHi"),d=function(){return(d=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function p(e,t){if(1&e){var n=c.ec();c.dc(0,"cb-table",5),c.lc("action",(function(e){return c.Gc(n),c.pc().handleAction(e)}))("sort",(function(e){return c.Gc(n),c.pc().handleSort(e)}))("refresh",(function(e){return c.Gc(n),c.pc().handleRefresh(e)}))("page",(function(e){return c.Gc(n),c.pc().handlePagineNavigation(e)}))("search",(function(e){return c.Gc(n),c.pc().handleSearch(e)})),c.cc()}if(2&e){var o=c.pc();c.vc("is-loading",o.isLoading)("crud",o.config)}}var m=function(){function e(e,t,n,o){this.tendoo=e,this.snackbar=t,this.dialog=n,this.router=o,this.isLoading=!1,this.sort={},this.search={},this.page={},this.perPage={per_page:10}}return e.prototype.ngOnInit=function(){var e=this;this.tendoo.crud.getConfig("brookr.companies",d(d(d(d({},this.sort),this.page),this.perPage),this.sort)).subscribe((function(t){e.config=t}),(function(t){e.snackbar.open(t.error.message||t.message,"TRY AGAIN").afterDismissed().subscribe((function(t){t.dismissedByAction&&e.ngOnInit()}))}))},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handleAction=function(e){switch(e.menu.type){case"GOTO":this.router.navigateByUrl(e.url);break;case"DELETE":this.deleteCompany(e);break;case"POPUP":this.handlePopup(e)}},e.prototype.handlePopup=function(e){"make.payment"==e.menu.namespace&&this.dialog.open(i.a,{id:"companies-payment-popup",data:{resource:e.row,formNamespace:"brookr.advance-payment.drivers",postNamespace:"brookr/companies/payment/"},width:[this.tendoo.responsive.isLG(),this.tendoo.responsive.isXL()].includes(!0)?"600px":"80%",height:[this.tendoo.responsive.isLG(),this.tendoo.responsive.isXL()].includes(!0)?"400px":"60%"})},e.prototype.deleteCompany=function(e){var t=this;this.tendoo.delete(e.menu.url).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.dialog.getDialogById(e.menu.namespace).close()}),(function(e){t.snackbar.open(e.error.message||e.message,"OK",{duration:6e3})}))},e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.\u0275fac=function(t){return new(t||e)(c.Xb(a.b),c.Xb(s.a),c.Xb(u.b),c.Xb(r.b))},e.\u0275cmp=c.Rb({type:e,selectors:[["app-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search"]],template:function(e,t){1&e&&(c.dc(0,"app-layout"),c.dc(1,"div",0),c.dc(2,"span",1),c.Nc(3,"Companies"),c.cc(),c.dc(4,"p",2),c.Nc(5,"Manage all available companies"),c.cc(),c.cc(),c.dc(6,"div",3),c.Mc(7,p,1,2,"cb-table",4),c.cc(),c.cc()),2&e&&(c.Kb(7),c.vc("ngIf",t.config))},directives:[f.a,o.l,l.b],styles:[""]}),e}(),h=n("CD38"),b=n("eTQ6");function g(e,t){1&e&&(c.dc(0,"p",4),c.Nc(1,"Create Company"),c.cc())}function v(e,t){1&e&&(c.dc(0,"p",4),c.Nc(1,"Edit Company"),c.cc())}function y(e,t){if(1&e){var n=c.ec();c.dc(0,"app-tabs",5),c.lc("submit",(function(e){return c.Gc(n),c.pc().handleSubmit(e)})),c.cc()}if(2&e){var o=c.pc();c.vc("form",o.form)}}var x=function(){function e(e,t,n,o,r){this.tendoo=e,this.snackbar=t,this.dialog=n,this.snapshot=o,this.router=r}return e.prototype.ngOnInit=function(){var e=this;this.snapshot.paramMap.subscribe((function(t){e.mode=null!==t.get("id")?"edit":"create",e.id=+t.get("id"),console.log(t.get("id")),e.tendoo.forms.getPublicForm("brookr.companies","edit"===e.mode?e.id:void 0).subscribe((function(t){e.form=t}))}))},e.prototype.handleSubmit=function(e){var t=this;if(this.form.sections.forEach((function(e){return h.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});console.log(this.mode),this.tendoo["create"===this.mode?"post":"put"](this.tendoo.baseUrl+"brookr/companies"+("edit"===this.mode?"/"+this.id:""),this.form.formGroup.value).subscribe((function(e){t.snackbar.open(e.message,"OK",{duration:3e3}),t.router.navigateByUrl("/dashboard/companies")}),(function(e){t.snackbar.open(e.error.message||e.message,"OK",{duration:6e3})}))},e.\u0275fac=function(t){return new(t||e)(c.Xb(a.b),c.Xb(s.a),c.Xb(u.b),c.Xb(r.a),c.Xb(r.b))},e.\u0275cmp=c.Rb({type:e,selectors:[["app-manage"]],decls:7,vars:3,consts:[[1,"mb-2"],["class","text-2xl mb-2 font-serif text-gray-800",4,"ngIf"],[1,"text-gray-700"],[3,"form","submit",4,"ngIf"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[3,"form","submit"]],template:function(e,t){1&e&&(c.dc(0,"app-layout"),c.dc(1,"div",0),c.Mc(2,g,2,0,"p",1),c.Mc(3,v,2,0,"p",1),c.dc(4,"p",2),c.Nc(5,"Company can be used as driver group as driver can be attached to it."),c.cc(),c.cc(),c.Mc(6,y,1,1,"app-tabs",3),c.cc()),2&e&&(c.Kb(2),c.vc("ngIf","create"===t.mode),c.Kb(1),c.vc("ngIf","edit"===t.mode),c.Kb(3),c.vc("ngIf",t.form))},directives:[f.a,o.l,b.a],styles:[""]}),e}(),w=[{path:"",component:m},{path:"create",component:x},{path:"edit/:id",component:x}],F=function(){function e(){}return e.\u0275mod=c.Vb({type:e}),e.\u0275inj=c.Ub({factory:function(t){return new(t||e)},imports:[[r.e.forChild(w)],r.e]}),e}(),k=n("428I");n.d(t,"CompaniesModule",(function(){return C}));var C=function(){function e(){}return e.\u0275mod=c.Vb({type:e}),e.\u0275inj=c.Ub({factory:function(t){return new(t||e)},imports:[[o.c,F,k.a]]}),e}()},eTQ6:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n("1C3z"),r=n("CD38"),i=n("8AiQ"),c=n("AFHi");function a(e,t){1&e&&(o.dc(0,"span",10),o.Nc(1,"5"),o.cc())}var s=function(e,t){return{"bg-gray-100":e,"bg-gray-300":t}};function u(e,t){if(1&e){var n=o.ec();o.dc(0,"div",8),o.lc("click",(function(){o.Gc(n);var e=t.$implicit;return o.pc(2).selectThis(e)})),o.Nc(1),o.Mc(2,a,2,0,"span",9),o.cc()}if(2&e){var r=t.$implicit,i=o.pc(2);o.vc("ngClass",o.yc(3,s,r.active,!r.active)),o.Kb(1),o.Pc(" ",r.title," "),o.Kb(1),o.vc("ngIf",null!==i.form.formGroup.errors)}}function f(e,t){if(1&e&&(o.dc(0,"div",16),o.Yb(1,"cb-field",17),o.cc()),2&e){var n=t.$implicit,r=o.pc(2).$implicit;o.Kb(1),o.vc("field",n)("group",r.formGroup)}}function l(e,t){if(1&e&&(o.dc(0,"div",12),o.dc(1,"div",13),o.dc(2,"div",14),o.Mc(3,f,2,2,"div",15),o.cc(),o.cc(),o.cc()),2&e){var n=o.pc().$implicit;o.Kb(3),o.vc("ngForOf",n.fields)}}function d(e,t){if(1&e&&(o.bc(0),o.Mc(1,l,4,1,"div",11),o.ac()),2&e){var n=t.$implicit;o.Kb(1),o.vc("ngIf",n.active)}}function p(e,t){if(1&e){var n=o.ec();o.dc(0,"div",1),o.dc(1,"div",2),o.Mc(2,u,3,6,"div",3),o.cc(),o.dc(3,"div",4),o.Mc(4,d,2,1,"ng-container",5),o.dc(5,"div",6),o.dc(6,"div"),o.dc(7,"button",7),o.lc("click",(function(){return o.Gc(n),o.pc().submitForm()})),o.Nc(8,"Save"),o.cc(),o.cc(),o.cc(),o.cc(),o.cc()}if(2&e){var r=o.pc();o.Kb(2),o.vc("ngForOf",r.renderable),o.Kb(2),o.vc("ngForOf",r.form.sections)}}var m=function(){function e(){this.submit=new o.p}return e.prototype.ngOnInit=function(){console.log(this.form),this.renderable.forEach((function(e,t){e.active=0===t})),void 0===this.form.formGroup&&(this.form=r.a.buildForm(this.form))},e.prototype.selectThis=function(e){this.form.sections.forEach((function(e){return e.active=!1})),e.active=!0},e.prototype.submitForm=function(){this.submit.emit(this.form)},Object.defineProperty(e.prototype,"renderable",{get:function(){return this.form.sections.filter((function(e){return void 0===e.render||!1!==e.render}))},enumerable:!0,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Rb({type:e,selectors:[["app-tabs"]],inputs:{form:"form"},outputs:{submit:"submit"},decls:1,vars:1,consts:[["class","tab tab-container",4,"ngIf"],[1,"tab","tab-container"],[1,"tabs-header","flex",2,"margin-bottom","-2px"],["class","tab px-4 py-2 border-2 border-b-0 rounded-t-lg cursor-pointer flex items-center justify center",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"bg-gray-100","border-2"],[4,"ngFor","ngForOf"],[1,"footer","border-t","p-2","flex"],[1,"rounded","bg-green-200","text-green-600","text-center","px-4","py-2","shadow","border","border-green-600","active:shadow-none",3,"click"],[1,"tab","px-4","py-2","border-2","border-b-0","rounded-t-lg","cursor-pointer","flex","items-center","justify","center",3,"ngClass","click"],["class","inline-block ml-2 rounded-full flex justify-center items-center h-6 w-6 bg-red-700 text-white",4,"ngIf"],[1,"inline-block","ml-2","rounded-full","flex","justify-center","items-center","h-6","w-6","bg-red-700","text-white"],["class","tabs-container",4,"ngIf"],[1,"tabs-container"],[1,"inner-content","p-2"],[1,"-mx-2","flex","flex-wrap"],["class","px-2 w-full md:w-1/2",4,"ngFor","ngForOf"],[1,"px-2","w-full","md:w-1/2"],[3,"field","group"]],template:function(e,t){1&e&&o.Mc(0,p,9,2,"div",0),2&e&&o.vc("ngIf",t.form)},directives:[i.l,i.k,i.j,c.d],styles:[""]}),e}()}}]);