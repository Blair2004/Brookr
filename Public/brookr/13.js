(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{CD38:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("1C3z"),o=n("ZSGP"),i=function(){function e(){}return e.from=function(e){if(e){"string"!=typeof e&&(e=(e=e.filter((function(e){return"string"==typeof e}))).join("|"));var t,n=[],r=e.split("|"),i=/(min)\:([0-9])+/g,c=/(max)\:([0-9])+/g,a=/(same):(\w+)/g;return r.forEach((function(e){var r;"required"==e?n.push(o.s.required):"email"==e?n.push(o.s.email):(t=i.exec(e))?n.push(o.s.minLength(t[2])):(t=c.exec(e))?n.push(o.s.maxLength(t[2])):(t=a.exec(e))?n.push((r=t[2],function(e){return e.value!==e.parent.get(r).value?{matches:{formControl:e.parent.get(r),formControlName:r}}:null})):"number"==e&&n.push((function(e){return/^\d+$/.exec(e.value)?null:{number:!0}}))})),n}return null},e.extractControls=function(e,t){var n=this;void 0===t&&(t=!1);var r={};return e.forEach((function(e){if(void 0===e.control&&0==t)throw'Unable to use the validation control for the field : "'+e.name+"\". Please make sure to define the '.control' property for this field.";e.control&&(e.control.setValidators(n.from(e.validation)),r[e.name]=e.control)})),r},e.buildFormControls=function(e){return e.forEach((function(e){null==e.control?e.control=new o.d(e.value?e.value:null):e.control.setValue(e.value)})),this.extractControls(e)},e.buildFormControl=function(e){return null==e.control?e.control=new o.d(e.value||null):e.control.setValue(e.value||null),e.reset=new r.p,this.extractControls([e])[e.name]},e.touchAllFields=function(e){Object.keys(e.controls).forEach((function(t){e.get(t).markAsTouched()}))},e.buildFormGroup=function(t){return t.forEach((function(t){t.control=e.buildFormControl(t)})),{fields:t,formGroup:new o.g(e.extractControls(t))}},e.deactivateFields=function(e){e.forEach((function(e){return e.control.disable()}))},e.enableFields=function(e){e.forEach((function(e){return e.control.enable()}))},e.throwFieldsError=function(e,t,n){var r=function(r){e.get(r).setErrors({error:!0}),t.forEach((function(e){e.name===r&&(e.errors=n[e.name])}))};for(var o in n)r(o)},e.noNullValue=function(e){var t={};for(var n in e.value)null!==e.value[n]&&(t[n]=e.value[n]);return t},e.buildForm=function(t){var n={};return t.sections.forEach((function(t){var r=e.buildFormGroup(t.fields).formGroup;t.formGroup=r,n[t.namespace]=t.formGroup})),t.formGroup=new o.g(n),t},e.touchFormFields=function(t){t.sections.forEach((function(t){return e.touchAllFields(t.formGroup)}))},e.deactivateFormFiiels=function(t){t.sections.forEach((function(t){return e.deactivateFields(t.fields)}))},e.enableFormFields=function(t){t.sections.forEach((function(t){return e.enableFields(t.fields)}))},e}()},eTQ6:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("1C3z"),o=n("CD38"),i=n("8AiQ"),c=n("AFHi");function a(e,t){1&e&&(r.dc(0,"span",10),r.Nc(1,"5"),r.cc())}var s=function(e,t){return{"bg-gray-100":e,"bg-gray-300":t}};function u(e,t){if(1&e){var n=r.ec();r.dc(0,"div",8),r.lc("click",(function(){r.Gc(n);var e=t.$implicit;return r.pc(2).selectThis(e)})),r.Nc(1),r.Mc(2,a,2,0,"span",9),r.cc()}if(2&e){var o=t.$implicit,i=r.pc(2);r.vc("ngClass",r.yc(3,s,o.active,!o.active)),r.Kb(1),r.Pc(" ",o.title," "),r.Kb(1),r.vc("ngIf",null!==i.form.formGroup.errors)}}function f(e,t){if(1&e&&(r.dc(0,"div",16),r.Yb(1,"cb-field",17),r.cc()),2&e){var n=t.$implicit,o=r.pc(2).$implicit;r.Kb(1),r.vc("field",n)("group",o.formGroup)}}function l(e,t){if(1&e&&(r.dc(0,"div",12),r.dc(1,"div",13),r.dc(2,"div",14),r.Mc(3,f,2,2,"div",15),r.cc(),r.cc(),r.cc()),2&e){var n=r.pc().$implicit;r.Kb(3),r.vc("ngForOf",n.fields)}}function d(e,t){if(1&e&&(r.bc(0),r.Mc(1,l,4,1,"div",11),r.ac()),2&e){var n=t.$implicit;r.Kb(1),r.vc("ngIf",n.active)}}function p(e,t){if(1&e){var n=r.ec();r.dc(0,"div",1),r.dc(1,"div",2),r.Mc(2,u,3,6,"div",3),r.cc(),r.dc(3,"div",4),r.Mc(4,d,2,1,"ng-container",5),r.dc(5,"div",6),r.dc(6,"div"),r.dc(7,"button",7),r.lc("click",(function(){return r.Gc(n),r.pc().submitForm()})),r.Nc(8,"Save"),r.cc(),r.cc(),r.cc(),r.cc(),r.cc()}if(2&e){var o=r.pc();r.Kb(2),r.vc("ngForOf",o.renderable),r.Kb(2),r.vc("ngForOf",o.form.sections)}}var h=function(){function e(){this.submit=new r.p}return e.prototype.ngOnInit=function(){console.log(this.form),this.renderable.forEach((function(e,t){e.active=0===t})),void 0===this.form.formGroup&&(this.form=o.a.buildForm(this.form))},e.prototype.selectThis=function(e){this.form.sections.forEach((function(e){return e.active=!1})),e.active=!0},e.prototype.submitForm=function(){this.submit.emit(this.form)},Object.defineProperty(e.prototype,"renderable",{get:function(){return this.form.sections.filter((function(e){return void 0===e.render||!1!==e.render}))},enumerable:!0,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Rb({type:e,selectors:[["app-tabs"]],inputs:{form:"form"},outputs:{submit:"submit"},decls:1,vars:1,consts:[["class","tab tab-container",4,"ngIf"],[1,"tab","tab-container"],[1,"tabs-header","flex",2,"margin-bottom","-2px"],["class","tab px-4 py-2 border-2 border-b-0 rounded-t-lg cursor-pointer flex items-center justify center",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"bg-gray-100","border-2"],[4,"ngFor","ngForOf"],[1,"footer","border-t","p-2","flex"],[1,"rounded","bg-green-200","text-green-600","text-center","px-4","py-2","shadow","border","border-green-600","active:shadow-none",3,"click"],[1,"tab","px-4","py-2","border-2","border-b-0","rounded-t-lg","cursor-pointer","flex","items-center","justify","center",3,"ngClass","click"],["class","inline-block ml-2 rounded-full flex justify-center items-center h-6 w-6 bg-red-700 text-white",4,"ngIf"],[1,"inline-block","ml-2","rounded-full","flex","justify-center","items-center","h-6","w-6","bg-red-700","text-white"],["class","tabs-container",4,"ngIf"],[1,"tabs-container"],[1,"inner-content","p-2"],[1,"-mx-2","flex","flex-wrap"],["class","px-2 w-full md:w-1/2",4,"ngFor","ngForOf"],[1,"px-2","w-full","md:w-1/2"],[3,"field","group"]],template:function(e,t){1&e&&r.Mc(0,p,9,2,"div",0),2&e&&r.vc("ngIf",t.form)},directives:[i.l,i.k,i.j,c.d],styles:[""]}),e}()},uPd1:function(e,t,n){"use strict";n.r(t);var r=n("8AiQ"),o=n("5/c3"),i=n("1C3z"),c=n("z35L"),a=n("2pW/"),s=n("BLjT"),u=n("ryqd"),f=n("AFHi"),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function d(e,t){if(1&e){var n=i.ec();i.dc(0,"cb-table",5),i.lc("action",(function(e){return i.Gc(n),i.pc().handleAction(e)}))("sort",(function(e){return i.Gc(n),i.pc().handleSort(e)}))("refresh",(function(e){return i.Gc(n),i.pc().handleRefresh(e)}))("page",(function(e){return i.Gc(n),i.pc().handlePagineNavigation(e)}))("search",(function(e){return i.Gc(n),i.pc().handleSearch(e)}))("delete",(function(e){return i.Gc(n),i.pc().handleDelete(e)})),i.cc()}if(2&e){var r=i.pc();i.vc("is-loading",r.isLoading)("crud",r.config)}}var p=function(){function e(e,t,n,r){this.tendoo=e,this.snackbar=t,this.dialog=n,this.router=r,this.entries=[],this.isLoading=!1,this.sort={},this.search={},this.perPage={per_page:10},this.page={},this.searchEnabled=!1}return e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.ngOnInit=function(){var e=this;this.isLoading=!0,this.tendoo.crud.getConfig("brookr.trucks",l(l(l(l({},this.sort),this.search),this.page),this.perPage)).subscribe((function(t){e.isLoading=!1,e.config=t,e.config.title="Trucks List"}),(function(t){e.snackbar.open("An error has occured while loading the entries.","OK",{duration:5e3})}))},e.prototype.handleAction=function(e){var t=this;"DELETE"===e.menu.type?this.tendoo.crud.delete(e.menu.url.replace("{id}",e.row.id)).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.ngOnInit(),t.dialog.getDialogById(e.menu.namespace).close()}),(function(n){t.snackbar.open(n.error.message||"An unexpected error occured","OK",{duration:5e3}),t.dialog.getDialogById(e.menu.namespace).close()})):"GOTO"===e.menu.type&&this.router.navigateByUrl(e.menu.url.replace("{id}",e.row.id))},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.prototype.handleDelete=function(e){},e.\u0275fac=function(t){return new(t||e)(i.Xb(c.b),i.Xb(a.a),i.Xb(s.b),i.Xb(o.b))},e.\u0275cmp=i.Rb({type:e,selectors:[["app-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search","delete",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search","delete"]],template:function(e,t){1&e&&(i.dc(0,"app-layout"),i.dc(1,"div",0),i.dc(2,"span",1),i.Nc(3,"Trucks List"),i.cc(),i.dc(4,"p",2),i.Nc(5,"Manage all the trucks registered on the system"),i.cc(),i.cc(),i.dc(6,"div",3),i.Mc(7,d,1,2,"cb-table",4),i.cc(),i.cc()),2&e&&(i.Kb(7),i.vc("ngIf",t.config))},directives:[u.a,r.l,f.b],styles:[""]}),e}(),h=n("CD38"),b=n("t5c9"),m=function(){function e(e,t){this.http=e,this.tendoo=t,this.baseUrl=this.tendoo.baseUrl}return e.prototype.save=function(e,t){return void 0===t&&(t=void 0),console.log(t),this.tendoo[void 0!==t?"put":"post"](this.baseUrl+"brookr/trucks"+(void 0===t?"":"/"+t),e)},e.prototype.delete=function(e){return this.tendoo.delete(this.baseUrl+"broork/trucks/"+e)},e.prototype.get=function(){return this.tendoo.get(this.baseUrl+"brookr/trucks")},e.\u0275fac=function(t){return new(t||e)(i.hc(b.b),i.hc(c.b))},e.\u0275prov=i.Tb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),g=n("eTQ6");function v(e,t){1&e&&(i.dc(0,"div",2),i.dc(1,"p",3),i.Nc(2,"Creating Trucks"),i.cc(),i.dc(3,"p",4),i.Nc(4,"Trucks are the vehicules assigned to the drivers for loads transport."),i.cc(),i.cc())}function y(e,t){1&e&&(i.dc(0,"div",2),i.dc(1,"p",3),i.Nc(2,"Editing Trucks"),i.cc(),i.dc(3,"p",4),i.Nc(4,"Trucks are the vehicules assigned to the drivers for loads transport."),i.cc(),i.cc())}function k(e,t){if(1&e){var n=i.ec();i.dc(0,"app-tabs",5),i.lc("submit",(function(e){return i.Gc(n),i.pc().handleSubmit(e)})),i.cc()}if(2&e){var r=i.pc();i.vc("form",r.form)}}var x=function(){function e(e,t,n,r,o){this.tendoo=e,this.activeRoute=t,this.trucksService=n,this.snackbar=r,this.router=o,this.mode="create"}return e.prototype.ngOnInit=function(){var e=this;this.activeRoute.paramMap.subscribe((function(t){t.get("id")&&(e.mode="edit",e.identifier=t.get("id")),e.tendoo.forms.getPublicForm("brookr.trucks",e.identifier).subscribe((function(t){e.form=t}))}))},e.prototype.handleSubmit=function(e){var t=this;if(e.sections.forEach((function(e){return h.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});e.sections.forEach((function(e){return h.a.deactivateFields(e.fields)})),this.trucksService.save(e.formGroup.value,this.identifier).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.identifier?e.sections.forEach((function(e){return h.a.enableFields(e.fields)})):t.router.navigateByUrl("/dashboard/trucks")}),(function(n){e.sections.forEach((function(e){return h.a.enableFields(e.fields)})),t.snackbar.open(n.error.message||"An unexpected error has occured.","OK",{duration:3e3})}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(c.b),i.Xb(o.a),i.Xb(m),i.Xb(a.a),i.Xb(o.b))},e.\u0275cmp=i.Rb({type:e,selectors:[["app-manage"]],decls:4,vars:3,consts:[["class","mb-2",4,"ngIf"],[3,"form","submit",4,"ngIf"],[1,"mb-2"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[1,"text-gray-700"],[3,"form","submit"]],template:function(e,t){1&e&&(i.dc(0,"app-layout"),i.Mc(1,v,5,0,"div",0),i.Mc(2,y,5,0,"div",0),i.Mc(3,k,1,1,"app-tabs",1),i.cc()),2&e&&(i.Kb(1),i.vc("ngIf","create"===t.mode),i.Kb(1),i.vc("ngIf","edit"===t.mode),i.Kb(1),i.vc("ngIf",t.form))},directives:[u.a,r.l,g.a],styles:[""]}),e}(),w=function(){function e(e){this.tendoo=e,this.baseUrl=this.tendoo.baseUrl}return e.prototype.saveMaintenance=function(e,t){void 0===t&&(t=null);var n=["",null].includes(t)?"post":"put";return this.tendoo[n](this.tendoo.baseUrl+"brookr/trucks-maintenances"+(t?"/"+t:""),e)},e.prototype.deleteMaintenance=function(e){return this.tendoo.delete(this.baseUrl+"brookr/trucks-maintenances/"+e)},e.\u0275fac=function(t){return new(t||e)(i.hc(c.b))},e.\u0275prov=i.Tb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function O(e,t){if(1&e){var n=i.ec();i.dc(0,"cb-table",5),i.lc("action",(function(e){return i.Gc(n),i.pc().handleAction(e)}))("sort",(function(e){return i.Gc(n),i.pc().handleSort(e)}))("refresh",(function(e){return i.Gc(n),i.pc().handleRefresh(e)}))("page",(function(e){return i.Gc(n),i.pc().handlePagineNavigation(e)}))("search",(function(e){return i.Gc(n),i.pc().handleSearch(e)}))("delete",(function(e){return i.Gc(n),i.pc().handleDelete(e)})),i.cc()}if(2&e){var r=i.pc();i.vc("is-loading",r.isLoading)("crud",r.config)}}var I=function(){function e(e,t,n,r,o,i){this.snackbar=e,this.router=t,this.tendoo=n,this.snapshot=r,this.truckMaintenance=o,this.dialog=i,this.isLoading=!1,this.sort={},this.perPage={},this.search={},this.page={}}return e.prototype.ngOnInit=function(){var e=this;this.isLoading=!0,this.tendoo.crud.getConfig("brookr.trucks-maintenance",F(F(F({},this.sort),this.search),this.page)).subscribe((function(t){e.isLoading=!1,e.config=t}))},e.prototype.handleAction=function(e){var t=this;"DELETE"===e.menu.type?this.truckMaintenance.deleteMaintenance(e.row.id).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.dialog.getDialogById(e.menu.namespace).close(),t.ngOnInit()}),(function(e){t.snackbar.open(e.error.message||e.message||"An unexpected error has occured","OK",{duration:3e3})})):"GOTO"===e.menu.type&&this.router.navigateByUrl("/dashboard/trucks/maintenances/manage/"+e.row.id)},e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.handleDelete=function(e){console.log(e)},e.\u0275fac=function(t){return new(t||e)(i.Xb(a.a),i.Xb(o.b),i.Xb(c.b),i.Xb(o.a),i.Xb(w),i.Xb(s.b))},e.\u0275cmp=i.Rb({type:e,selectors:[["app-maintenance-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search","delete",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search","delete"]],template:function(e,t){1&e&&(i.dc(0,"app-layout"),i.dc(1,"div",0),i.dc(2,"span",1),i.Nc(3,"Trucks Maintenance"),i.cc(),i.dc(4,"p",2),i.Nc(5,"an history of all trucks maintenance"),i.cc(),i.cc(),i.dc(6,"div",3),i.Mc(7,O,1,2,"cb-table",4),i.cc(),i.cc()),2&e&&(i.Kb(7),i.vc("ngIf",t.config))},directives:[u.a,r.l,f.b],styles:[""]}),e}();function G(e,t){1&e&&(i.dc(0,"div",2),i.dc(1,"p",3),i.Nc(2,"Registering Maintenance"),i.cc(),i.dc(3,"p",4),i.Nc(4,"Register a maintenance report and attach it to a truck"),i.cc(),i.cc())}function E(e,t){1&e&&(i.dc(0,"div",2),i.dc(1,"p",3),i.Nc(2,"Edit Maintenance"),i.cc(),i.dc(3,"p",4),i.Nc(4,"Edit an existing maintenance report attached to a truck."),i.cc(),i.cc())}function M(e,t){if(1&e){var n=i.ec();i.dc(0,"app-tabs",5),i.lc("submit",(function(e){return i.Gc(n),i.pc().handleSubmit(e)})),i.cc()}if(2&e){var r=i.pc();i.vc("form",r.form)}}var C=function(){function e(e,t,n,r,o){this.trucksMaintenances=e,this.snapshot=t,this.snackbar=n,this.tendoo=r,this.router=o,this.mode="create",this.identifier=""}return e.prototype.ngOnInit=function(){var e=this;this.snapshot.paramMap.subscribe((function(t){t.get("id")&&(e.mode="edit",e.identifier=t.get("id")),e.tendoo.forms.getPublicForm("brookr.trucks-maintenances",e.identifier?+e.identifier:void 0).subscribe((function(t){e.form=h.a.buildForm(t)}))}))},e.prototype.handleSubmit=function(e){var t=this;if(this.form.sections.forEach((function(e){return h.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});this.fieldsControl("disable"),this.trucksMaintenances.saveMaintenance(this.form.formGroup.value,this.identifier||"").subscribe((function(e){t.snackbar.open(e.message,"OK",{duration:3e3}),t.identifier?t.fieldsControl("enable"):t.router.navigateByUrl("/dashboard/trucks/maintenances")}),(function(e){t.fieldsControl("enable"),t.form.sections.forEach((function(e){return h.a.enableFields(e.fields)})),t.snackbar.open(e.error.message||"An unexpected error has occured","OK")}))},e.prototype.fieldsControl=function(e){switch(e){case"disable":this.form.sections.forEach((function(e){return h.a.deactivateFields(e.fields)}));break;case"enable":this.form.sections.forEach((function(e){return h.a.enableFields(e.fields)}))}},e.\u0275fac=function(t){return new(t||e)(i.Xb(w),i.Xb(o.a),i.Xb(a.a),i.Xb(c.b),i.Xb(o.b))},e.\u0275cmp=i.Rb({type:e,selectors:[["app-maintenance-manage"]],decls:4,vars:3,consts:[["class","mb-2",4,"ngIf"],[3,"form","submit",4,"ngIf"],[1,"mb-2"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[1,"text-gray-700"],[3,"form","submit"]],template:function(e,t){1&e&&(i.dc(0,"app-layout"),i.Mc(1,G,5,0,"div",0),i.Mc(2,E,5,0,"div",0),i.Mc(3,M,1,1,"app-tabs",1),i.cc()),2&e&&(i.Kb(1),i.vc("ngIf","create"===t.mode),i.Kb(1),i.vc("ngIf","edit"===t.mode),i.Kb(1),i.vc("ngIf",t.form))},directives:[u.a,r.l,g.a],styles:[""]}),e}(),K=[{path:"",component:p},{path:"create",component:x},{path:"edit/:id",component:x},{path:":id/maintenances",component:I},{path:":id/maintenances/edit",component:C},{path:"maintenances/manage",component:C},{path:"maintenances/manage/:id",component:C},{path:"maintenances",component:I}],N=function(){function e(){}return e.\u0275mod=i.Vb({type:e}),e.\u0275inj=i.Ub({factory:function(t){return new(t||e)},imports:[[o.e.forChild(K)],o.e]}),e}(),T=n("428I");n.d(t,"TrucksModule",(function(){return X}));var X=function(){function e(){}return e.\u0275mod=i.Vb({type:e}),e.\u0275inj=i.Ub({factory:function(t){return new(t||e)},imports:[[r.c,N,T.a]]}),e}()}}]);