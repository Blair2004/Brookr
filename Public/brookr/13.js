(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{pGcJ:function(e,t,n){"use strict";n.r(t);var o=n("8AiQ"),r=n("5/c3"),i=n("1C3z"),c=n("z35L"),a=n("2pW/"),s=n("BLjT"),d=n("ryqd"),f=n("AFHi"),u=function(){return(u=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function p(e,t){if(1&e){var n=i.fc();i.ec(0,"cb-table",5),i.mc("action",(function(e){return i.Fc(n),i.qc().handleAction(e)}))("sort",(function(e){return i.Fc(n),i.qc().handleSort(e)}))("refresh",(function(e){return i.Fc(n),i.qc().handleRefresh(e)}))("page",(function(e){return i.Fc(n),i.qc().handlePagineNavigation(e)}))("search",(function(e){return i.Fc(n),i.qc().handleSearch(e)})),i.dc()}if(2&e){var o=i.qc();i.wc("is-loading",o.isLoading)("crud",o.config)}}var l=function(){function e(e,t,n,o){this.tendoo=e,this.snackbar=t,this.dialog=n,this.router=o,this.isLoading=!1,this.sort={},this.search={},this.page={},this.perPage={per_page:10}}return e.prototype.ngOnInit=function(){var e=this;console.log(this.tendoo),this.tendoo.crud.getConfig("brookr.loads",u(u(u(u({},this.page),this.search),this.sort),this.perPage)).subscribe((function(t){e.config=t}))},e.prototype.handleAction=function(e){var t=this;"DELETE"===e.menu.type?this.tendoo.crud.delete(e.menu.url.replace("{id}",e.row.id)).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.ngOnInit(),t.dialog.getDialogById(e.menu.namespace).close()}),(function(n){t.snackbar.open(n.error.message||"An unexpected error occured","OK",{duration:5e3}),t.dialog.getDialogById(e.menu.namespace).close()})):"GOTO"===e.menu.type&&this.router.navigateByUrl(e.menu.url.replace("{id}",e.row.id))},e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.\u0275fac=function(t){return new(t||e)(i.Yb(c.b),i.Yb(a.a),i.Yb(s.b),i.Yb(r.b))},e.\u0275cmp=i.Sb({type:e,selectors:[["app-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search"]],template:function(e,t){1&e&&(i.ec(0,"app-layout"),i.ec(1,"div",0),i.ec(2,"span",1),i.Mc(3,"Available Loads"),i.dc(),i.ec(4,"p",2),i.Mc(5,"Manage all assigned loads delivery"),i.dc(),i.dc(),i.ec(6,"div",3),i.Lc(7,p,1,2,"cb-table",4),i.dc(),i.dc()),2&e&&(i.Kb(7),i.wc("ngIf",t.config))},directives:[d.a,o.k,f.b],styles:[""]}),e}(),h=n("CD38"),b=function(){function e(e){this.tendoo=e,this.baseUrl=this.tendoo.baseUrl}return e.prototype.registerLoads=function(e,t){return void 0===t&&(t=void 0),this.tendoo[void 0===t?"post":"put"](this.baseUrl+"brookr/loads"+(void 0!==t?"/"+t:""),e)},e.\u0275fac=function(t){return new(t||e)(i.ic(c.b))},e.\u0275prov=i.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),m=n("ZSGP"),g=n("eTQ6");function v(e,t){1&e&&(i.ec(0,"div",2),i.ec(1,"p",3),i.Mc(2,"Assign Load"),i.dc(),i.ec(3,"p",4),i.Mc(4,"Loads are assigned to drivers for delivery."),i.dc(),i.dc())}function y(e,t){1&e&&(i.ec(0,"div",2),i.ec(1,"p",3),i.Mc(2,"Edit Load"),i.dc(),i.ec(3,"p",4),i.Mc(4,"Loads are assigned to drivers for delivery."),i.dc(),i.dc())}function w(e,t){if(1&e&&(i.ec(0,"div",8),i.Zb(1,"input",9),i.ec(2,"span",10),i.Mc(3,"Can automatically be generated."),i.dc(),i.dc()),2&e){var n=t.$implicit;i.Kb(1),i.wc("formControl",n.control)}}function I(e,t){if(1&e){var n=i.fc();i.ec(0,"app-tabs",11),i.mc("submit",(function(e){return i.Fc(n),i.qc(2).handleSubmit(e)})),i.dc()}if(2&e){var o=i.qc(2);i.wc("form",o.form)}}function L(e,t){if(1&e&&(i.ec(0,"form",5),i.Lc(1,w,4,1,"div",6),i.Lc(2,I,1,1,"app-tabs",7),i.dc()),2&e){var n=i.qc();i.wc("formGroup",n.form.formGroup),i.Kb(1),i.wc("ngForOf",n.form.sections[0].fields),i.Kb(1),i.wc("ngIf",n.form)}}var O=function(){function e(e,t,n,o,r){this.activeSnapShot=e,this.tendoo=t,this.snackbar=n,this.router=o,this.loadsService=r,this.mode="create"}return e.prototype.ngOnInit=function(){var e=this;this.activeSnapShot.paramMap.subscribe((function(t){t.get("id")&&(e.mode="edit",e.id=+t.get("id"))})),this.tendoo.forms.getPublicForm("brookr.loads",this.id||void 0).subscribe((function(t){e.form=h.a.buildForm(t),e.form.sections.forEach((function(e){"main"===e.namespace&&(e.render=!1)})),e.form=t}))},e.prototype.handleSubmit=function(e){var t=this;if(this.form.sections.forEach((function(e){return h.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});this.form.sections.forEach((function(e){return h.a.deactivateFields(e.fields)})),this.loadsService.registerLoads(this.form.formGroup.value,this.id).subscribe((function(e){t.snackbar.open(e.message,"OK",{duration:3e3}),t.router.navigateByUrl("/dashboard/loads")}),(function(e){t.snackbar.open(e.error.message||e.message||"An unexpected error has occured.","OK",{duration:6e3}),t.form.sections.forEach((function(e){return h.a.enableFields(e.fields)}))}))},e.\u0275fac=function(t){return new(t||e)(i.Yb(r.a),i.Yb(c.b),i.Yb(a.a),i.Yb(r.b),i.Yb(b))},e.\u0275cmp=i.Sb({type:e,selectors:[["app-manage"]],decls:4,vars:3,consts:[["class","mb-2",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"mb-2"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[1,"text-gray-700"],[3,"formGroup"],["class","mb-4",4,"ngFor","ngForOf"],[3,"form","submit",4,"ngIf"],[1,"mb-4"],["type","text","placeholder","Load Title",1,"rounded","border","border-gray-400","p-2","w-full",3,"formControl"],[1,"text-gray-600","my-1","text-xs","block"],[3,"form","submit"]],template:function(e,t){1&e&&(i.ec(0,"app-layout"),i.Lc(1,v,5,0,"div",0),i.Lc(2,y,5,0,"div",0),i.Lc(3,L,3,3,"form",1),i.dc()),2&e&&(i.Kb(1),i.wc("ngIf","create"===t.mode),i.Kb(1),i.wc("ngIf","edit"===t.mode),i.Kb(1),i.wc("ngIf",t.form))},directives:[d.a,o.k,m.t,m.n,m.h,o.j,m.c,m.m,m.e,g.a],styles:[""]}),e}(),k=[{path:"",component:l},{path:"create",component:O},{path:"edit/:id",component:O}],x=function(){function e(){}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(k)],r.e]}),e}(),S=n("428I");n.d(t,"LoadsModule",(function(){return F}));var F=function(){function e(){}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},imports:[[o.c,x,S.a]]}),e}()}}]);