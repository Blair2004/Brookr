(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"7mdW":function(e,t,n){"use strict";n.r(t),t.default='<app-layout>\n    <div class="mb-2">\n        <p *ngIf="mode === \'create\'" class="text-2xl mb-2 font-serif text-gray-800">Creating a location</p>\n        <p *ngIf="mode === \'edit\'" class="text-2xl mb-2">Editing a location</p>\n        <p class="text-gray-700">Create or edit a location.</p>\n    </div>\n    <app-tabs *ngIf="form" (changed)="handleFieldChange( $event )" [form]="form" (submit)="handleSubmit( $event )"></app-tabs>\n</app-layout>'},HZbK:function(e,t,n){"use strict";n.r(t),t.default='<app-layout>\n    <div class="mb-4 text-gray-800">\n        <span class="block text-2xl mb-2">Locations</span> \n        <p class="text-sm">List of all created locations</p>\n    </div>\n    <div class="flex w-full">\n        <cb-table \n            (action)="handleAction( $event )" \n            (sort)="handleSort( $event )" \n            (refresh)="handleRefresh( $event )" \n            (page)="handlePagineNavigation( $event )" \n            (search)="handleSearch( $event )"\n            [is-loading]="isLoading"\n            *ngIf="config" [crud]="config" class="w-full"></cb-table>\n        \x3c!-- <app-table (sort)="handleSort( $event )" (search)="handleSearch( $event )" [config]="config"></app-table> --\x3e\n    </div>   \n</app-layout>'},KFjf:function(e,t,n){"use strict";n.r(t),n.d(t,"LocationsModule",(function(){return w}));var o=n("LoAr"),i=n("WT9V"),r=n("981U"),a=n("8YcR"),c=n("qptw"),s=n("z35L"),l=function(){return(l=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){return e&&e.__esModule?e:{default:e}},d=function(){function e(e,t,n,o){this.tendoo=e,this.snackbar=t,this.dialog=n,this.router=o,this.isLoading=!1,this.sort={direction:"desc",active:"created_at"},this.search={},this.page={},this.perPage={per_page:20}}return e.prototype.ngOnInit=function(){var e=this;this.tendoo.crud.getConfig("brookr.locations",l(l(l(l({},this.page),this.search),this.sort),this.perPage)).subscribe((function(t){e.config=t}))},e.prototype.handleAction=function(e){var t=this;"DELETE"===e.menu.type?this.tendoo.crud.delete(e.menu.url.replace("{id}",e.row.id)).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.ngOnInit(),t.dialog.getDialogById(e.menu.namespace).close()}),(function(n){t.snackbar.open(n.error.message||"An unexpected error occured","OK",{duration:5e3}),t.dialog.getDialogById(e.menu.namespace).close()})):"GOTO"===e.menu.type&&this.router.navigateByUrl(e.menu.url.replace("{id}",e.row.id))},e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.ctorParameters=function(){return[{type:s.b},{type:c.a},{type:a.b},{type:r.b}]},e=f([Object(o.n)({selector:"app-list",template:u(n("HZbK")).default,styles:[u(n("bO4E")).default]}),p("design:paramtypes",[s.b,c.a,a.b,r.b])],e)}(),h=n("GiBk"),b=n("CD38"),g=n("38Q6"),m=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e){return e&&e.__esModule?e:{default:e}},O=function(){function e(e,t,n,o,i,r){this.routeSnapshot=e,this.tendoo=t,this.client=n,this.locationService=o,this.snackbar=i,this.router=r,this.mode="create",this.id=""}return e.prototype.ngOnInit=function(){var e=this;this.routeSnapshot.paramMap.subscribe((function(t){t.get("id")&&(e.mode="edit",e.id=t.get("id")),e.generateForm()}))},e.prototype.generateForm=function(){var e=this;this.tendoo.forms.getPublicForm("brookr.locations",+this.id>0?+this.id:void 0).subscribe((function(t){e.form=t}))},e.prototype.selectThis=function(e){this.form.sections.forEach((function(e){return e.active=!1})),e.active=!0},e.prototype.handleFieldChange=function(e){},e.prototype.handleSubmit=function(e){var t=this;if(this.form.sections.forEach((function(e){return b.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed, the form is invalid","OK",{duration:3e3});this.setFieldsState("disable"),this.locationService.submitLocation(this.form.formGroup.value,+this.id>0?this.id:"",this.mode).subscribe((function(e){t.setFieldsState("enable"),t.snackbar.open(e.message,"OK",{duration:3e3}),t.id||t.router.navigateByUrl("/dashboard/locations")}),(function(e){t.snackbar.open(e.error.message||e.message||"An unexpected error has occured","OK",{duration:3e3}),t.setFieldsState("enable")}))},e.prototype.setFieldsState=function(e){this.form.sections.forEach((function(t){return b.a["disabled"===e?"deactivateFields":"enableFields"](t.fields)}))},e.ctorParameters=function(){return[{type:r.a},{type:s.b},{type:h.b},{type:g.a},{type:c.a},{type:r.b}]},e=m([Object(o.n)({selector:"app-manage",template:v(n("7mdW")).default,styles:[v(n("zh2o")).default]}),y("design:paramtypes",[r.a,s.b,h.b,g.a,c.a,r.b])],e)}(),j=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},R=[{path:"",component:d},{path:"create",component:O},{path:"edit/:id",component:O}],x=function(){function e(){}return e=j([Object(o.M)({imports:[r.d.forChild(R)],exports:[r.d]})],e)}(),P=n("428I"),S=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},w=function(){function e(){}return e=S([Object(o.M)({declarations:[d,O],imports:[i.c,x,P.a]})],e)}()},bO4E:function(e,t,n){"use strict";n.r(t),t.default=""},zh2o:function(e,t,n){"use strict";n.r(t),t.default=""}}]);