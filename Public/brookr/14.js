(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"7igb":function(e,r,t){"use strict";t.r(r),r.default=""},TDBs:function(e,r,t){"use strict";t.r(r),t.d(r,"DashboardModule",(function(){return k}));var n=t("LoAr"),s=t("WT9V"),i=t("981U"),a=t("z35L"),o=function(e,r,t,n){var s,i=arguments.length,a=i<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,t,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(r,t,a):s(r,t))||a);return i>3&&a&&Object.defineProperty(r,t,a),a},d=function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},l=function(){function e(e){this.tendoo=e}return e.prototype.getReport=function(){return this.tendoo.post(this.tendoo.baseUrl+"brookr/dashboard",{})},e.prototype.refreshReport=function(){return this.tendoo.post(this.tendoo.baseUrl+"brookr/dashboard/refresh",{})},e.ctorParameters=function(){return[{type:a.b}]},e=o([Object(n.E)({providedIn:"root"}),d("design:paramtypes",[a.b])],e)}(),c=t("cQOC"),p=t("PTmb"),b=t("k46B"),u=function(e,r,t,n){var s,i=arguments.length,a=i<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,t,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(r,t,a):s(r,t))||a);return i>3&&a&&Object.defineProperty(r,t,a),a},v=function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},x=function(e){return e&&e.__esModule?e:{default:e}},f={total_loads:0,total_incomes:0,total_drivers:0,total_trucks:0,week_total_loads:0,week_ongoing_loads:0,week_pending_loads:0,week_total_drivers:0,week_total_incomes:0,week_total_trucks:0,assigned_drivers:0,unassigned_drivers:0,unavailable_drivers:0,available_trucks:0,assigned_trucks:0},g=function(){function e(e,r,t,s){this.tendoo=e,this.dashboard=r,this.drivers=t,this.loads=s,this.dashboardReport={current:f,previous:f},this.tableCrud={columns:{load:{label:"Load"},status:{label:"Status"},driver:{label:"Driver"}},labels:{list_title:"Ongoing Loads",list_description:"display all ongoing loads",create_title:"Create Load",create_description:"Will create new load",edit_title:"Edit an existing load",edit_description:"Load will be edited"},namespace:"brookr.loads",fields:[],links:{}},this.urlPrefix=Object(n.vb)()?"":"/modules/brookr/brookr"}return e.prototype.ngOnInit=function(){var e=this;Object(c.a)([this.dashboard.getReport(),this.drivers.getByMedicalCard(),this.drivers.getByDriverCard(),this.loads.getUnassignedLoads()]).subscribe((function(r){e.parseReport(r[0]),e.driversByMedical=r[1],e.driversByLicense=r[2],e.unassignedLoads=r[3]}))},e.prototype.parseReport=function(e){this.dashboardReport.current=e.current||this.dashboardReport.current,this.dashboardReport.previous=e.previous||this.dashboardReport.previous},e.prototype.percentage=function(e){return 0!==this.dashboardReport.current[e]&&0!==this.dashboardReport.previous[e]?100*(this.dashboardReport.current[e]-this.dashboardReport.previous[e])/this.dashboardReport.current[e]:0},e.prototype.refreshDashboardReport=function(){var e=this;this.dashboard.refreshReport().subscribe((function(r){e.ngOnInit()}))},e.ctorParameters=function(){return[{type:a.b},{type:l},{type:p.a},{type:b.a}]},e=u([Object(n.n)({selector:"app-dashboard",template:x(t("zig/")).default,styles:[x(t("7igb")).default]}),v("design:paramtypes",[a.b,l,p.a,b.a])],e)}(),h=function(e,r,t,n){var s,i=arguments.length,a=i<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,t,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(r,t,a):s(r,t))||a);return i>3&&a&&Object.defineProperty(r,t,a),a},y=[{path:"",component:g}],m=function(){function e(){}return e=h([Object(n.M)({imports:[i.d.forChild(y)],exports:[i.d]})],e)}(),w=t("vvyD"),_=t("428I"),R=function(e,r,t,n){var s,i=arguments.length,a=i<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,t,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(r,t,a):s(r,t))||a);return i>3&&a&&Object.defineProperty(r,t,a),a},k=function(){function e(){}return e=R([Object(n.M)({declarations:[g],imports:[s.c,m,w.a,_.a]})],e)}()},"zig/":function(e,r,t){"use strict";t.r(r),r.default='<app-layout>\r\n    <div class="flex justify-between items-center mb-3">\r\n        <span class="text-2xl text-gray-700 mb-4 block">Activity Overview</span>\r\n        <button (click)="refreshDashboardReport()" class="rounded-lg border hover:border-green-400 border-gray-400 h-10 w-10 flex items-center justify-center hover:bg-green-100"><mat-icon>refresh</mat-icon></button>\r\n    </div>\r\n    <div class="top-dashboard flex flex-wrap md:-mx-4">\r\n        <div class="flex-auto px-4 w-full md:w-1/3">\r\n            <div class="rounded p-4 bg-green-200 flex">\r\n                <div class="w-20 h-20 rounded flex items-center justify-center">\r\n                    <img [src]="urlPrefix + \'/assets/images/trailer.png\'" alt="">\r\n                </div>\r\n                <div class="flex-auto pl-4">\r\n                    <p class="text-sm text-green-800 font-semibold">Loads This Week</p>\r\n                    <p class="text-4xl text-green-800 font-extrabold">{{ dashboardReport.current.total_loads }}</p>\r\n                    <div class="flex justify-between items-end text-green-600">\r\n                        <span class="text-xs">{{ percentage( \'week_total_loads\' ) + \'%\' }}\r\n                        </span>\r\n                        <span class="text-xs">{{ dashboardReport.previous.week_pending_loads }} Last week</span>\r\n                    </div>\r\n                    <div class="flex justify-between items-end text-green-600">\r\n                        <span class="text-xs">{{ dashboardReport.current.week_pending_loads }} Pending</span>\r\n                        <span class="text-xs">{{ dashboardReport.current.week_ongoing_loads }} Ongoing</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="flex-auto px-4 w-full md:w-1/3">\r\n            <div class="rounded p-4 bg-blue-200 flex">\r\n                <div class="w-20 h-20 rounded flex items-center justify-center">\r\n                    <img [src]="urlPrefix + \'/assets/images/income.png\'" alt="">\r\n                </div>\r\n                <div class="flex-auto pl-4">\r\n                    <p class="text-sm text-blue-800 font-semibold">Income This week</p>\r\n                    <p class="text-4xl text-blue-800 font-extrabold">{{ dashboardReport.current.total_incomes }}</p>\r\n                    <div class="flex justify-between items-end text-blue-600">\r\n                        <span class="text-xs">{{ percentage( \'week_total_incomes\' ) + \'%\' }}</span>\r\n                        <span class="text-xs">{{ dashboardReport.previous.total_incomes }} Last week</span>\r\n                    </div>\r\n                    <div class="flex justify-between items-end text-blue-600">\r\n                        <span class="text-xs">-</span>\r\n                        <span class="text-xs">-</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="flex-auto px-4 w-full md:w-1/3">\r\n            <div class="rounded p-4 bg-orange-200 flex">\r\n                <div class="w-20 h-20 rounded flex items-center justify-center">\r\n                    <img [src]="urlPrefix + \'/assets/images/steering-wheel.png\'" alt="">\r\n                </div> \r\n                <div class="flex-auto pl-4">\r\n                    <p class="text-sm text-orange-800 font-semibold">Drivers Avaialble</p>\r\n                    <p class="text-4xl text-orange-800 font-extrabold">{{ dashboardReport.current.total_drivers }}</p>\r\n                    <div class="flex justify-between items-end text-orange-600">\r\n                        <span class="text-xs">Available Drivers {{ dashboardReport.current.unassigned_drivers }}</span>\r\n                        <span class="text-xs">Trucks {{ dashboardReport.current.total_trucks }}</span>\r\n                    </div>\r\n                    <div class="flex justify-between items-end text-orange-600">\r\n                        <span class="text-xs">Available Trucks {{ dashboardReport.current.available_trucks }}</span>\r\n                        <span class="text-xs">Assigned {{ dashboardReport.current.assigned_trucks }}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="md:-mx-4 my-4 flex flex-wrap">\r\n        <div class="px-4 w-full md:w-1/3">\r\n            <div class="bg-gray-200 mb-4">\r\n                <div class="title text-xl border-b border-gray-400 p-4 text-gray-700">Medical Expiration</div>\r\n                <div class="content">\r\n                    <ul>\r\n                        <li *ngFor="let driver of driversByMedical" class="px-4 py-2 border-b border-gray-300 flex justify-between items-center">\r\n                            <span class="text-gray-700 flex flex-auto justify-between items-center">\r\n                                <span>{{ driver.first_name }} {{ driver.last_name }}</span>\r\n                                <span *ngIf="driver.medical_card_expiration">{{ driver.medical_card_expiration | date }}</span>\r\n                                <span *ngIf="! driver.medical_card_expiration">N/A</span>\r\n                            </span>\r\n                            <div class="ml-4"><button [routerLink]="\'/dashboard/drivers/edit/\' + driver.driver_id" class="rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-green-400 hover:text-white">Edit</button></div>\r\n                        </li>\r\n                        <li class="px-4 py-2 border-b border-gray-300 flex justify-center items-center">\r\n                            <a class="text-gray-700 hover:text-green-600 hover:text-underline" routerLink="/dashboard/drivers">See Full List</a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class="bg-gray-200 mb-4">\r\n                <div class="title text-xl border-b border-gray-400 p-4 text-gray-700">License Expiration</div>\r\n                <div class="content">\r\n                    <ul>\r\n                        <li *ngFor="let driver of driversByLicense" class="px-4 py-2 border-b border-gray-300 flex justify-between items-center">\r\n                            <span class="text-gray-700 flex flex-auto justify-between items-center">\r\n                                <span>{{ driver.first_name }} {{ driver.last_name }}</span>\r\n                                <span *ngIf="driver.driving_license_expiration">{{ driver.driving_license_expiration | date }}</span>\r\n                                <span *ngIf="! driver.driving_license_expiration">N/A</span>\r\n                            </span>\r\n                            <div class="ml-4"><button [routerLink]="\'/dashboard/drivers/edit/\' + driver.driver_id" class="rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-green-400 hover:text-white">Edit</button></div>\r\n                        </li>\r\n                        <li class="px-4 py-2 border-b border-gray-300 flex justify-center items-center">\r\n                            <a class="text-gray-700 hover:text-green-600 hover:text-underline" routerLink="/dashboard/drivers">See Full List</a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="px-4 md:w-2/3 w-full">\r\n            <div class="bg-teal-200">\r\n                <div class="title text-xl border-b border-teal-400 p-4 text-gray-700">Unassigned Loads</div>\r\n                <div class="content">\r\n                    <ul>\r\n                        <li *ngFor="let load of unassignedLoads" class="px-4 py-2 border-b border-teal-300 flex justify-between items-center">\r\n                            <span class="text-teal-700 flex flex-auto justify-between mr-4">\r\n                                <div class="flex flex-col">\r\n                                    <span class="text-lg block">{{ load.name }}</span>\r\n                                    <span class="text-xs mt-1 block">Load Ref : {{ load.load_reference }}</span>\r\n                                    <span class="text-xs mt-1 block">Pickup Ref : {{ load.pickup_reference }}</span>\r\n                                </div>\r\n\r\n                                <span>{{ load.pickup_date | date }}</span>\r\n                            </span>\r\n                            <div><button [routerLink]="\'/dashboard/loads/edit/\' + load.id" class="rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-teal-600 hover:text-white">Assign</button></div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="md:-mx-4 my-4 flex">\r\n        <div class="px-4 md:w-1/3">\r\n            \r\n        </div>\r\n        <div class="px-4 md:w-2/3">\r\n            \x3c!-- <div class="bg-indigo-200">\r\n                <div class="title text-xl border-b border-indigo-400 p-4 text-gray-700">Unassigned Loads</div>\r\n                <div class="content">\r\n                    <ul>\r\n                        <li class="px-4 py-2 border-b border-indigo-300 flex justify-between items-center">\r\n                            <span class="text-indigo-700">John Doe - 2020-09-09</span>\r\n                            <div><button class="rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white">Assign</button></div>\r\n                        </li>\r\n                        <li class="px-4 py-2 border-b border-indigo-300 flex justify-between items-center">\r\n                            <span class="text-indigo-700">John Doe - 2020-09-09</span>\r\n                            <div><button class="rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white">Assign</button></div>\r\n                        </li>\r\n                        <li class="px-4 py-2 border-b border-indigo-300 flex justify-between items-center">\r\n                            <span class="text-indigo-700">John Doe - 2020-09-09</span>\r\n                            <div><button class="rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white">Assign</button></div>\r\n                        </li>\r\n                        <li class="px-4 py-2 border-b border-indigo-300 flex justify-between items-center">\r\n                            <span class="text-indigo-700">John Doe - 2020-09-09</span>\r\n                            <div><button class="rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white">Assign</button></div>\r\n                        </li>\r\n                        <li class="px-4 py-2 border-b border-indigo-300 flex justify-between items-center">\r\n                            <span class="text-indigo-700">John Doe - 2020-09-09</span>\r\n                            <div><button class="rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white">Assign</button></div>\r\n                        </li>\r\n                        <li class="px-4 py-2 border-b border-indigo-300 flex justify-between items-center">\r\n                            <span class="text-indigo-700">John Doe - 2020-09-09</span>\r\n                            <div><button class="rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white">Assign</button></div>\r\n                        </li>\r\n                        <li class="px-4 py-2 border-b border-indigo-300 flex justify-center items-center">\r\n                            <a class="text-indigo-700 hover:text-green-600 hover:text-underline" routerLink="/dashboard/loads">See Full List</a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div> --\x3e\r\n        </div>\r\n    </div>\r\n</app-layout>'}}]);