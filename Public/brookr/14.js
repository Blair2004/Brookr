(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{CD38:function(n,e,o){"use strict";o.d(e,"a",(function(){return i}));var t=o("1C3z"),r=o("ZSGP"),i=function(){function n(){}return n.from=function(n){if(n){"string"!=typeof n&&(n=(n=n.filter((function(n){return"string"==typeof n}))).join("|"));var e,o=[],t=n.split("|"),i=/(min)\:([0-9])+/g,c=/(max)\:([0-9])+/g,u=/(same):(\w+)/g;return t.forEach((function(n){var t;"required"==n?o.push(r.s.required):"email"==n?o.push(r.s.email):(e=i.exec(n))?o.push(r.s.minLength(e[2])):(e=c.exec(n))?o.push(r.s.maxLength(e[2])):(e=u.exec(n))?o.push((t=e[2],function(n){return n.value!==n.parent.get(t).value?{matches:{formControl:n.parent.get(t),formControlName:t}}:null})):"number"==n&&o.push((function(n){return/^\d+$/.exec(n.value)?null:{number:!0}}))})),o}return null},n.extractControls=function(n,e){var o=this;void 0===e&&(e=!1);var t={};return n.forEach((function(n){if(void 0===n.control&&0==e)throw'Unable to use the validation control for the field : "'+n.name+"\". Please make sure to define the '.control' property for this field.";n.control&&(n.control.setValidators(o.from(n.validation)),t[n.name]=n.control)})),t},n.buildFormControls=function(n){return n.forEach((function(n){null==n.control?n.control=new r.d(n.value?n.value:null):n.control.setValue(n.value)})),this.extractControls(n)},n.buildFormControl=function(n){return null==n.control?n.control=new r.d(n.value||null):n.control.setValue(n.value||null),n.reset=new t.p,this.extractControls([n])[n.name]},n.touchAllFields=function(n){Object.keys(n.controls).forEach((function(e){n.get(e).markAsTouched()}))},n.buildFormGroup=function(e){return e.forEach((function(e){e.control=n.buildFormControl(e)})),{fields:e,formGroup:new r.g(n.extractControls(e))}},n.deactivateFields=function(n){n.forEach((function(n){return n.control.disable()}))},n.enableFields=function(n){n.forEach((function(n){return n.control.enable()}))},n.throwFieldsError=function(n,e,o){var t=function(t){n.get(t).setErrors({error:!0}),e.forEach((function(n){n.name===t&&(n.errors=o[n.name])}))};for(var r in o)t(r)},n.noNullValue=function(n){var e={};for(var o in n.value)null!==n.value[o]&&(e[o]=n.value[o]);return e},n.buildForm=function(e){var o={};return e.sections.forEach((function(e){var t=n.buildFormGroup(e.fields).formGroup;e.formGroup=t,o[e.namespace]=e.formGroup})),e.formGroup=new r.g(o),e},n.touchFormFields=function(e){e.sections.forEach((function(e){return n.touchAllFields(e.formGroup)}))},n.deactivateFormFiiels=function(e){e.sections.forEach((function(e){return n.deactivateFields(e.fields)}))},n.enableFormFields=function(e){e.sections.forEach((function(e){return n.enableFields(e.fields)}))},n}()},Yj9t:function(n,e,o){"use strict";o.r(e);var t=o("8AiQ"),r=o("5/c3"),i=o("CD38"),c=o("1C3z"),u=o("z35L"),a=o("2pW/"),s=o("nYrE"),l=o("ZSGP"),f=o("AFHi");function d(n,e){1&n&&(c.dc(0,"div",6),c.Yb(1,"mat-progress-spinner",7),c.cc())}function p(n,e){if(1&n&&c.Yb(0,"cb-field",15),2&n){var o=e.$implicit,t=c.pc(2);c.vc("group",t.form)("field",o)}}var b=function(n,e){return{"bg-pink-700 text-white":n,"bg-pink-500 text-gray-100":e}};function m(n,e){if(1&n){var o=c.ec();c.dc(0,"div",8),c.dc(1,"form",9),c.Mc(2,p,1,2,"cb-field",10),c.dc(3,"div",11),c.dc(4,"button",12),c.lc("click",(function(){return c.Gc(o),c.pc().login()})),c.Nc(5,"Login"),c.cc(),c.cc(),c.dc(6,"div",13),c.dc(7,"a",14),c.Nc(8,"Password Lost ?"),c.cc(),c.cc(),c.cc(),c.cc()}if(2&n){var t=c.pc();c.Kb(1),c.vc("formGroup",t.form),c.Kb(1),c.vc("ngForOf",t.fields),c.Kb(2),c.vc("disabled",t.isLoggingIn)("ngClass",c.yc(4,b,!t.isLoggingIn,t.isLoggingIn))}}var g=[{path:"login",component:function(){function n(n,e,o,t){this.tendoo=n,this.snackbar=e,this.router=o,this.activatedRoute=t,this.loaded=!1,this.isLoggingIn=!1}return n.prototype.ngOnInit=function(){var n=this;this.tendoo.fields.getPublicFields("brookr.login").subscribe((function(e){var o=i.a.buildFormGroup(e);n.form=o.formGroup,n.fields=o.fields,n.loaded=!0}),(function(e){n.snackbar.open(e.error.message||e.message||"An unexpected error has occured","TRY AGAIN").afterDismissed().subscribe((function(e){e.dismissedByAction&&n.ngOnInit()}))}))},n.prototype.login=function(){var n=this;if(i.a.touchAllFields(this.form),this.form.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});this.isLoggingIn=!0,i.a.deactivateFields(this.fields),this.tendoo.auth.login(this.form.value).subscribe((function(e){n.activatedRoute.queryParamMap.subscribe((function(o){n.tendoo.auth.setCredentials(e.user,e.token),n.tendoo.get(n.tendoo.baseUrl+"brookr/profile/avatar").subscribe((function(t){console.log(e.user.role.namespace);var r=o.get("redirect")||("brookr.drivers"===e.user.role.namespace?"/dashboard/drivers/loads":"/dashboard");e.user.avatar=t.link||null,n.snackbar.open(e.message,null,{duration:3e3}),n.router.navigateByUrl(r)}))}))}),(function(e){n.isLoggingIn=!1,i.a.enableFields(n.fields),n.snackbar.open(e.error.message||"An unexpected error has occored","OK",{duration:5e3})}))},n.\u0275fac=function(e){return new(e||n)(c.Xb(u.b),c.Xb(a.a),c.Xb(r.b),c.Xb(r.a))},n.\u0275cmp=c.Rb({type:n,selectors:[["app-auth"]],decls:8,vars:2,consts:[["id","container",1,"bg-gray-200","h-full","flex","justify-center","items-center"],[1,"p-2","w-full","sm:w-2/3","md:w-1/2","lg:w-2/6","xl:1/4","flex","flex-col","items-center"],[1,"brookr-font","block","text-6xl","my-3","text-gray-800"],[1,"my-2","text-gray-700"],["class","flex justify-center my-10",4,"ngIf"],["id","login-card","class","rounded-lg w-full shadow bg-white p-4 my-10",4,"ngIf"],[1,"flex","justify-center","my-10"],["diameter","60","mode","indeterminate"],["id","login-card",1,"rounded-lg","w-full","shadow","bg-white","p-4","my-10"],[3,"formGroup"],[3,"group","field",4,"ngFor","ngForOf"],[1,"button-container","py-3","flex","justify-end"],["type","submit",1,"rounded","shadow","px-3","py-2","bg-pink-700","text-white",3,"disabled","ngClass","click"],[1,"button-container","py-3","flex","justify-center"],["href","#",1,"hover:underline","text-blue-600","text-sm"],[3,"group","field"]],template:function(n,e){1&n&&(c.dc(0,"div",0),c.dc(1,"div",1),c.dc(2,"span",2),c.Nc(3,"Brookr"),c.cc(),c.dc(4,"span",3),c.Nc(5,"Loads Delivery Application"),c.cc(),c.Mc(6,d,2,0,"div",4),c.Mc(7,m,9,7,"div",5),c.cc(),c.cc()),2&n&&(c.Kb(6),c.vc("ngIf",!e.loaded),c.Kb(1),c.vc("ngIf",e.loaded))},directives:[t.l,s.a,l.t,l.n,l.h,t.k,t.j,f.d],styles:[""]}),n}()},{path:"logout",component:function(){function n(n,e,o){this.tendoo=n,this.snackbar=e,this.router=o}return n.prototype.ngOnInit=function(){var n=this;this.tendoo.auth.logout().subscribe((function(e){n.snackbar.open(e.message,"OK",{duration:3e3}),n.router.navigateByUrl("/auth/login")}))},n.\u0275fac=function(e){return new(e||n)(c.Xb(u.b),c.Xb(a.a),c.Xb(r.b))},n.\u0275cmp=c.Rb({type:n,selectors:[["app-logout"]],decls:0,vars:0,template:function(n,e){},styles:[""]}),n}()}],h=function(){function n(){}return n.\u0275mod=c.Vb({type:n}),n.\u0275inj=c.Ub({factory:function(e){return new(e||n)},imports:[[r.e.forChild(g)],r.e]}),n}(),v=o("428I");o.d(e,"AuthModule",(function(){return y}));var y=function(){function n(){}return n.\u0275mod=c.Vb({type:n}),n.\u0275inj=c.Ub({factory:function(e){return new(e||n)},imports:[[t.c,h,v.a]]}),n}()}}]);