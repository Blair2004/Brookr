(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{CD38:function(n,e,o){"use strict";o.d(e,"a",(function(){return i}));var t=o("1C3z"),r=o("ZSGP"),i=function(){function n(){}return n.from=function(n){if(n){"string"!=typeof n&&(n=(n=n.filter((function(n){return"string"==typeof n}))).join("|"));var e,o=[],t=n.split("|"),i=/(min)\:([0-9])+/g,c=/(max)\:([0-9])+/g,u=/(same):(\w+)/g;return t.forEach((function(n){var t;"required"==n?o.push(r.s.required):"email"==n?o.push(r.s.email):(e=i.exec(n))?o.push(r.s.minLength(e[2])):(e=c.exec(n))?o.push(r.s.maxLength(e[2])):(e=u.exec(n))?o.push((t=e[2],function(n){return n.value!==n.parent.get(t).value?{matches:{formControl:n.parent.get(t),formControlName:t}}:null})):"number"==n&&o.push((function(n){return/^\d+$/.exec(n.value)?null:{number:!0}}))})),o}return null},n.extractControls=function(n,e){var o=this;void 0===e&&(e=!1);var t={};return n.forEach((function(n){if(void 0===n.control&&0==e)throw'Unable to use the validation control for the field : "'+n.name+"\". Please make sure to define the '.control' property for this field.";n.control&&(n.control.setValidators(o.from(n.validation)),t[n.name]=n.control)})),t},n.buildFormControls=function(n){return n.forEach((function(n){null==n.control?n.control=new r.d(n.value?n.value:null):n.control.setValue(n.value)})),this.extractControls(n)},n.buildFormControl=function(n){return null==n.control?n.control=new r.d(n.value||null):n.control.setValue(n.value||null),n.reset=new t.p,this.extractControls([n])[n.name]},n.touchAllFields=function(n){Object.keys(n.controls).forEach((function(e){n.get(e).markAsTouched()}))},n.buildFormGroup=function(e){return e.forEach((function(e){e.control=n.buildFormControl(e)})),{fields:e,formGroup:new r.g(n.extractControls(e))}},n.deactivateFields=function(n){n.forEach((function(n){return n.control.disable()}))},n.enableFields=function(n){n.forEach((function(n){return n.control.enable()}))},n.throwFieldsError=function(n,e,o){var t=function(t){n.get(t).setErrors({error:!0}),e.forEach((function(n){n.name===t&&(n.errors=o[n.name])}))};for(var r in o)t(r)},n.noNullValue=function(n){var e={};for(var o in n.value)null!==n.value[o]&&(e[o]=n.value[o]);return e},n.buildForm=function(e){var o={};return e.sections.forEach((function(e){var t=n.buildFormGroup(e.fields).formGroup;e.formGroup=t,o[e.namespace]=e.formGroup})),e.formGroup=new r.g(o),e},n.touchFormFields=function(e){e.sections.forEach((function(e){return n.touchAllFields(e.formGroup)}))},n.deactivateFormFiiels=function(e){e.sections.forEach((function(e){return n.deactivateFields(e.fields)}))},n.enableFormFields=function(e){e.sections.forEach((function(e){return n.enableFields(e.fields)}))},n}()},Yj9t:function(n,e,o){"use strict";o.r(e);var t=o("8AiQ"),r=o("5/c3"),i=o("CD38"),c=o("1C3z"),u=o("z35L"),l=o("2pW/"),s=o("nYrE"),a=o("ZSGP"),f=o("AFHi");function d(n,e){1&n&&(c.ec(0,"div",5),c.Zb(1,"mat-progress-spinner",6),c.dc())}function m(n,e){if(1&n&&c.Zb(0,"cb-field",14),2&n){var o=e.$implicit,t=c.qc(2);c.wc("group",t.form)("field",o)}}var g=function(n,e){return{"bg-pink-700 text-white":n,"bg-pink-500 text-gray-100":e}};function h(n,e){if(1&n){var o=c.fc();c.ec(0,"div",7),c.ec(1,"form",8),c.Lc(2,m,1,2,"cb-field",9),c.dc(),c.ec(3,"div",10),c.ec(4,"button",11),c.mc("click",(function(){return c.Fc(o),c.qc().login()})),c.Mc(5,"Login"),c.dc(),c.dc(),c.ec(6,"div",12),c.ec(7,"a",13),c.Mc(8,"Password Lost ?"),c.dc(),c.dc(),c.dc()}if(2&n){var t=c.qc();c.Kb(1),c.wc("formGroup",t.form),c.Kb(1),c.wc("ngForOf",t.fields),c.Kb(2),c.wc("disabled",t.isLoggingIn)("ngClass",c.zc(4,g,!t.isLoggingIn,t.isLoggingIn))}}var p=[{path:"login",component:function(){function n(n,e,o,t){this.tendoo=n,this.snackbar=e,this.router=o,this.activatedRoute=t,this.loaded=!1,this.isLoggingIn=!1}return n.prototype.ngOnInit=function(){var n=this;this.tendoo.fields.getPublicFields("brookr.login").subscribe((function(e){var o=i.a.buildFormGroup(e);n.form=o.formGroup,n.fields=o.fields,n.loaded=!0}),(function(e){n.snackbar.open(e.error.message||e.message||"An unexpected error has occured","TRY AGAIN").afterDismissed().subscribe((function(e){e.dismissedByAction&&n.ngOnInit()}))}))},n.prototype.login=function(){var n=this;if(i.a.touchAllFields(this.form),this.form.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});this.isLoggingIn=!0,i.a.deactivateFields(this.fields),this.tendoo.auth.login(this.form.value).subscribe((function(e){n.activatedRoute.queryParamMap.subscribe((function(o){var t=o.get("redirect")||"/dashboard";n.tendoo.auth.setCredentials(e.user,e.token),console.log("will redirect",t,e.user,n.tendoo.auth.getUser()),n.snackbar.open(e.message,null,{duration:3e3}),n.router.navigateByUrl(t)}))}),(function(e){n.isLoggingIn=!1,i.a.enableFields(n.fields),n.snackbar.open(e.error.message||"An unexpected error has occored","OK",{duration:5e3})}))},n.\u0275fac=function(e){return new(e||n)(c.Yb(u.b),c.Yb(l.a),c.Yb(r.b),c.Yb(r.a))},n.\u0275cmp=c.Sb({type:n,selectors:[["app-auth"]],decls:6,vars:2,consts:[["id","container",1,"bg-gray-200","h-full","flex","justify-center","items-center"],[1,"p-2","w-full","sm:w-2/3","md:w-1/2","lg:w-1/3","flex","flex-col","items-center"],[1,"brookr-font","block","text-6xl","my-3"],["class","flex justify-center my-10",4,"ngIf"],["id","login-card","class","rounded-lg w-full shadow bg-white p-4 my-10",4,"ngIf"],[1,"flex","justify-center","my-10"],["diameter","60","mode","indeterminate"],["id","login-card",1,"rounded-lg","w-full","shadow","bg-white","p-4","my-10"],[3,"formGroup"],[3,"group","field",4,"ngFor","ngForOf"],[1,"button-container","py-3","flex","justify-end"],[1,"rounded","shadow","px-3","py-2","bg-pink-700","text-white",3,"disabled","ngClass","click"],[1,"button-container","py-3","flex","justify-center"],["href","#",1,"hover:underline","text-blue-600","text-sm"],[3,"group","field"]],template:function(n,e){1&n&&(c.ec(0,"div",0),c.ec(1,"div",1),c.ec(2,"span",2),c.Mc(3,"Brookr"),c.dc(),c.Lc(4,d,2,0,"div",3),c.Lc(5,h,9,7,"div",4),c.dc(),c.dc()),2&n&&(c.Kb(4),c.wc("ngIf",!e.loaded),c.Kb(1),c.wc("ngIf",e.loaded))},directives:[t.k,s.a,a.t,a.n,a.h,t.j,t.i,f.c],styles:[""]}),n}()}],b=function(){function n(){}return n.\u0275mod=c.Wb({type:n}),n.\u0275inj=c.Vb({factory:function(e){return new(e||n)},imports:[[r.e.forChild(p)],r.e]}),n}(),v=o("428I");o.d(e,"AuthModule",(function(){return w}));var w=function(){function n(){}return n.\u0275mod=c.Wb({type:n}),n.\u0275inj=c.Vb({factory:function(e){return new(e||n)},imports:[[t.c,b,v.a]]}),n}()}}]);