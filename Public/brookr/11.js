(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{vfUp:function(e,t,n){"use strict";n.r(t);var r=n("8AiQ"),o=n("5/c3"),i=n("1C3z"),s=n("z35L"),c=n("2pW/"),a=n("BLjT"),u=n("ryqd"),d=n("AFHi"),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){if(1&e){var n=i.fc();i.ec(0,"cb-table",5),i.mc("action",(function(e){return i.Fc(n),i.qc().handleAction(e)}))("sort",(function(e){return i.Fc(n),i.qc().handleSort(e)}))("refresh",(function(e){return i.Fc(n),i.qc().handleRefresh(e)}))("page",(function(e){return i.Fc(n),i.qc().handlePagineNavigation(e)}))("search",(function(e){return i.Fc(n),i.qc().handleSearch(e)})),i.dc()}if(2&e){var r=i.qc();i.wc("is-loading",r.isLoading)("crud",r.config)}}var h=function(){function e(e,t,n,r){this.tendoo=e,this.snackbar=t,this.dialog=n,this.router=r,this.isLoading=!1,this.sort={},this.search={},this.page={},this.perPage={per_page:10}}return e.prototype.ngOnInit=function(){var e=this;this.tendoo.crud.getConfig("brookr.customers",f(f(f(f({},this.page),this.search),this.sort),this.perPage)).subscribe((function(t){e.config=t}))},e.prototype.handleAction=function(e){var t=this;"DELETE"===e.menu.type?this.tendoo.crud.delete(e.menu.url.replace("{id}",e.row.id)).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.ngOnInit(),t.dialog.getDialogById(e.menu.namespace).close()}),(function(n){t.snackbar.open(n.error.message||"An unexpected error occured","OK",{duration:5e3}),t.dialog.getDialogById(e.menu.namespace).close()})):"GOTO"===e.menu.type&&this.router.navigateByUrl(e.menu.url.replace("{id}",e.row.id))},e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.\u0275fac=function(t){return new(t||e)(i.Yb(s.b),i.Yb(c.a),i.Yb(a.b),i.Yb(o.b))},e.\u0275cmp=i.Sb({type:e,selectors:[["app-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search"]],template:function(e,t){1&e&&(i.ec(0,"app-layout"),i.ec(1,"div",0),i.ec(2,"span",1),i.Mc(3,"Customers"),i.dc(),i.ec(4,"p",2),i.Mc(5,"Manage available customers"),i.dc(),i.dc(),i.ec(6,"div",3),i.Lc(7,p,1,2,"cb-table",4),i.dc(),i.dc()),2&e&&(i.Kb(7),i.wc("ngIf",t.config))},directives:[u.a,r.k,d.b],styles:[""]}),e}(),l=n("CD38"),m=function(){function e(e){this.tendoo=e,this.baseUrl=this.tendoo.baseUrl}return e.prototype.createCustomer=function(e){return this.tendoo.post(this.baseUrl+"brookr/customers",e)},e.prototype.updateCustomer=function(e,t){return this.tendoo.put(this.baseUrl+"brookr/customers/"+e,t)},e.prototype.deleteCustomer=function(e){return this.tendoo.delete(this.baseUrl+"brookr/customers/"+e)},e.prototype.getCustomers=function(){return this.tendoo.get(this.baseUrl+"brookr/customers")},e.\u0275fac=function(t){return new(t||e)(i.ic(s.b))},e.\u0275prov=i.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),b=n("eTQ6");function g(e,t){1&e&&(i.ec(0,"div",2),i.ec(1,"p",3),i.Mc(2,"Create Customer"),i.dc(),i.ec(3,"p",4),i.Mc(4,"Customers provide loads that are assigned to drivers."),i.dc(),i.dc())}function v(e,t){1&e&&(i.ec(0,"div",2),i.ec(1,"p",3),i.Mc(2,"Edit Customer"),i.dc(),i.ec(3,"p",4),i.Mc(4,"Customers provide loads that are assigned to drivers."),i.dc(),i.dc())}function y(e,t){if(1&e){var n=i.fc();i.ec(0,"app-tabs",5),i.mc("submit",(function(e){return i.Fc(n),i.qc().handleSubmit(e)})),i.dc()}if(2&e){var r=i.qc();i.wc("form",r.form)}}var w=function(){function e(e,t,n,r,o){var i=this;this.activatedRoute=e,this.tendoo=t,this.customerService=n,this.snackbar=r,this.router=o,this.mode="create",this.activatedRoute.paramMap.subscribe((function(e){e.get("id")&&(i.mode="edit",i.id=e.get("id"))})),this.tendoo.forms.getPublicForm("brookr.customers").subscribe((function(e){i.form=e}))}return e.prototype.ngOnInit=function(){},e.prototype.handleSubmit=function(e){var t=this;if(this.form.sections.forEach((function(e){return l.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to prceed the form is not valid","OK",{duration:3e3});this.form.sections.forEach((function(e){return l.a.deactivateFields(e.fields)})),this.id?this.customerService.updateCustomer(this.id,this.form.formGroup.value).subscribe((function(e){t.snackbar.open(e.message,"OK",{duration:3e3}),t.form.sections.forEach((function(e){return l.a.enableFields(e.fields)}))}),(function(e){t.snackbar.open(e.error.message||e.message,"OK",{duration:3e3}),t.form.sections.forEach((function(e){return l.a.enableFields(e.fields)}))})):this.customerService.createCustomer(this.form.formGroup.value).subscribe((function(e){t.snackbar.open(e.message,"OK",{duration:3e3}),t.router.navigateByUrl("/dashboard/customers/")}),(function(e){t.snackbar.open(e.error.message||e.message,"OK",{duration:3e3}),t.form.sections.forEach((function(e){return l.a.enableFields(e.fields)}))}))},e.\u0275fac=function(t){return new(t||e)(i.Yb(o.a),i.Yb(s.b),i.Yb(m),i.Yb(c.a),i.Yb(o.b))},e.\u0275cmp=i.Sb({type:e,selectors:[["app-manage"]],decls:4,vars:3,consts:[["class","mb-2",4,"ngIf"],[3,"form","submit",4,"ngIf"],[1,"mb-2"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[1,"text-gray-700"],[3,"form","submit"]],template:function(e,t){1&e&&(i.ec(0,"app-layout"),i.Lc(1,g,5,0,"div",0),i.Lc(2,v,5,0,"div",0),i.Lc(3,y,1,1,"app-tabs",1),i.dc()),2&e&&(i.Kb(1),i.wc("ngIf","create"===t.mode),i.Kb(1),i.wc("ngIf","edit"===t.mode),i.Kb(1),i.wc("ngIf",t.form))},directives:[u.a,r.k,b.a],styles:[""]}),e}(),k=[{path:"",component:h},{path:"create",component:w},{path:"edit/:id",component:w}],I=function(){function e(){}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},imports:[[o.e.forChild(k)],o.e]}),e}(),O=n("428I");n.d(t,"CustomersModule",(function(){return C}));var C=function(){function e(){}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(t){return new(t||e)},imports:[[r.c,I,O.a]]}),e}()}}]);