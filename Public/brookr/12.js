(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Nt43:function(t,e,n){"use strict";n.r(e);var o=n("8AiQ"),i=n("5/c3"),r=n("1C3z"),a=n("z35L"),c=n("2pW/"),s=n("BLjT"),u=n("ryqd"),p=n("AFHi"),d=function(){return(d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function f(t,e){if(1&t){var n=r.fc();r.ec(0,"cb-table",5),r.mc("action",(function(t){return r.Fc(n),r.qc().handleAction(t)}))("sort",(function(t){return r.Fc(n),r.qc().handleSort(t)}))("refresh",(function(t){return r.Fc(n),r.qc().handleRefresh(t)}))("page",(function(t){return r.Fc(n),r.qc().handlePagineNavigation(t)}))("search",(function(t){return r.Fc(n),r.qc().handleSearch(t)})),r.dc()}if(2&t){var o=r.qc();r.wc("is-loading",o.isLoading)("crud",o.config)}}var h=function(){function t(t,e,n,o){this.tendoo=t,this.snackbar=e,this.dialog=n,this.router=o,this.isLoading=!1,this.sort={},this.search={},this.page={},this.perPage={per_page:10}}return t.prototype.ngOnInit=function(){var t=this;this.tendoo.crud.getConfig("brookr.companies",d(d(d(d({},this.sort),this.page),this.perPage),this.sort)).subscribe((function(e){t.config=e}),(function(e){t.snackbar.open(e.error.message||e.message,"TRY AGAIN").afterDismissed().subscribe((function(e){e.dismissedByAction&&t.ngOnInit()}))}))},t.prototype.handleRefresh=function(t){this.ngOnInit()},t.prototype.handleAction=function(t){switch(t.menu.type){case"GOTO":this.router.navigateByUrl(t.url);break;case"DELETE":this.deleteCompany(t)}},t.prototype.deleteCompany=function(t){var e=this;this.tendoo.delete(t.menu.url).subscribe((function(n){e.snackbar.open(n.message,"OK",{duration:3e3}),e.dialog.getDialogById(t.menu.namespace).close()}),(function(t){e.snackbar.open(t.error.message||t.message,"OK",{duration:6e3})}))},t.prototype.handleSort=function(t){this.sort=t,this.ngOnInit()},t.prototype.handleSearch=function(t){this.search={search:t},this.ngOnInit()},t.prototype.handlePagineNavigation=function(t){this.perPage={per_page:t.pageSize},this.page={page:t.pageIndex+1},this.ngOnInit()},t.\u0275fac=function(e){return new(e||t)(r.Yb(a.b),r.Yb(c.a),r.Yb(s.b),r.Yb(i.b))},t.\u0275cmp=r.Sb({type:t,selectors:[["app-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search"]],template:function(t,e){1&t&&(r.ec(0,"app-layout"),r.ec(1,"div",0),r.ec(2,"span",1),r.Mc(3,"Companies"),r.dc(),r.ec(4,"p",2),r.Mc(5,"Manage all available companies"),r.dc(),r.dc(),r.ec(6,"div",3),r.Lc(7,f,1,2,"cb-table",4),r.dc(),r.dc()),2&t&&(r.Kb(7),r.wc("ngIf",e.config))},directives:[u.a,o.l,p.b],styles:[""]}),t}(),l=n("CD38"),b=n("eTQ6");function m(t,e){1&t&&(r.ec(0,"p",4),r.Mc(1,"Create Company"),r.dc())}function g(t,e){1&t&&(r.ec(0,"p",4),r.Mc(1,"Edit Company"),r.dc())}function y(t,e){if(1&t){var n=r.fc();r.ec(0,"app-tabs",5),r.mc("submit",(function(t){return r.Fc(n),r.qc().handleSubmit(t)})),r.dc()}if(2&t){var o=r.qc();r.wc("form",o.form)}}var v=function(){function t(t,e,n,o,i){this.tendoo=t,this.snackbar=e,this.dialog=n,this.snapshot=o,this.router=i}return t.prototype.ngOnInit=function(){var t=this;this.snapshot.paramMap.subscribe((function(e){t.mode=null!==e.get("id")?"edit":"create",t.id=+e.get("id"),console.log(e.get("id")),t.tendoo.forms.getPublicForm("brookr.companies","edit"===t.mode?t.id:void 0).subscribe((function(e){t.form=e}))}))},t.prototype.handleSubmit=function(t){var e=this;if(this.form.sections.forEach((function(t){return l.a.touchAllFields(t.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});console.log(this.mode),this.tendoo["create"===this.mode?"post":"put"](this.tendoo.baseUrl+"brookr/companies"+("edit"===this.mode?"/"+this.id:""),this.form.formGroup.value).subscribe((function(t){e.snackbar.open(t.message,"OK",{duration:3e3}),e.router.navigateByUrl("/dashboard/companies")}),(function(t){e.snackbar.open(t.error.message||t.message,"OK",{duration:6e3})}))},t.\u0275fac=function(e){return new(e||t)(r.Yb(a.b),r.Yb(c.a),r.Yb(s.b),r.Yb(i.a),r.Yb(i.b))},t.\u0275cmp=r.Sb({type:t,selectors:[["app-manage"]],decls:7,vars:3,consts:[[1,"mb-2"],["class","text-2xl mb-2 font-serif text-gray-800",4,"ngIf"],[1,"text-gray-700"],[3,"form","submit",4,"ngIf"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[3,"form","submit"]],template:function(t,e){1&t&&(r.ec(0,"app-layout"),r.ec(1,"div",0),r.Lc(2,m,2,0,"p",1),r.Lc(3,g,2,0,"p",1),r.ec(4,"p",2),r.Mc(5,"Company can be used as driver group as driver can be attached to it."),r.dc(),r.dc(),r.Lc(6,y,1,1,"app-tabs",3),r.dc()),2&t&&(r.Kb(2),r.wc("ngIf","create"===e.mode),r.Kb(1),r.wc("ngIf","edit"===e.mode),r.Kb(3),r.wc("ngIf",e.form))},directives:[u.a,o.l,b.a],styles:[""]}),t}(),w=[{path:"",component:h},{path:"create",component:v},{path:"edit/:id",component:v}],I=function(){function t(){}return t.\u0275mod=r.Wb({type:t}),t.\u0275inj=r.Vb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(w)],i.e]}),t}(),O=n("428I");n.d(e,"CompaniesModule",(function(){return k}));var k=function(){function t(){}return t.\u0275mod=r.Wb({type:t}),t.\u0275inj=r.Vb({factory:function(e){return new(e||t)},imports:[[o.c,I,O.a]]}),t}()}}]);