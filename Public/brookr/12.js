(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{iQDh:function(e,t,n){"use strict";n.r(t);var r=n("8AiQ"),i=n("5/c3"),o=n("1C3z"),c=n("z35L"),s=n("2pW/"),a=n("BLjT"),u=n("ryqd"),d=n("AFHi"),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function p(e,t){if(1&e){var n=o.fc();o.ec(0,"cb-table",5),o.mc("action",(function(e){return o.Fc(n),o.qc().handleAction(e)}))("sort",(function(e){return o.Fc(n),o.qc().handleSort(e)}))("refresh",(function(e){return o.Fc(n),o.qc().handleRefresh(e)}))("page",(function(e){return o.Fc(n),o.qc().handlePagineNavigation(e)}))("search",(function(e){return o.Fc(n),o.qc().handleSearch(e)})),o.dc()}if(2&e){var r=o.qc();o.wc("is-loading",r.isLoading)("crud",r.config)}}var h=function(){function e(e,t,n,r){this.tendoo=e,this.snackbar=t,this.dialog=n,this.router=r,this.isLoading=!1,this.sort={},this.search={},this.page={},this.perPage={per_page:20}}return e.prototype.ngOnInit=function(){var e=this;this.tendoo.crud.getConfig("brookr.drivers",f(f(f(f({},this.page),this.search),this.sort),this.perPage)).subscribe((function(t){e.config=t}))},e.prototype.handleAction=function(e){var t=this;"DELETE"===e.menu.type?this.tendoo.crud.delete(e.menu.url.replace("{id}",e.row.id)).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.ngOnInit(),t.dialog.getDialogById(e.menu.namespace).close()}),(function(n){t.snackbar.open(n.error.message||"An unexpected error occured","OK",{duration:5e3}),t.dialog.getDialogById(e.menu.namespace).close()})):"GOTO"===e.menu.type&&this.router.navigateByUrl(e.menu.url.replace("{id}",e.row.id))},e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.\u0275fac=function(t){return new(t||e)(o.Yb(c.b),o.Yb(s.a),o.Yb(a.b),o.Yb(i.b))},e.\u0275cmp=o.Sb({type:e,selectors:[["app-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search"]],template:function(e,t){1&e&&(o.ec(0,"app-layout"),o.ec(1,"div",0),o.ec(2,"span",1),o.Mc(3,"Drivers"),o.dc(),o.ec(4,"p",2),o.Mc(5,"List of all created drivers"),o.dc(),o.dc(),o.ec(6,"div",3),o.Lc(7,p,1,2,"cb-table",4),o.dc(),o.dc()),2&e&&(o.Kb(7),o.wc("ngIf",t.config))},directives:[u.a,r.k,d.b],styles:[""]}),e}(),l=n("CD38"),b=function(){function e(e){this.tendoo=e,this.baseUrl=this.tendoo.baseUrl,console.log(this.baseUrl)}return e.prototype.setDriver=function(e,t){return void 0===t&&(t=null),this.tendoo[null===t?"post":"put"](this.baseUrl+"brookr/drivers"+(null!==t?"/"+t:""),e)},e.prototype.deleteDriver=function(e){return this.tendoo.delete(this.baseUrl+"brookr/drivers/"+e)},e.prototype.getDrivers=function(){return this.tendoo.get(this.baseUrl+"brookr/drivers")},e.\u0275fac=function(t){return new(t||e)(o.ic(c.b))},e.\u0275prov=o.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),g=n("t5c9"),m=n("eTQ6");function v(e,t){1&e&&(o.ec(0,"p",5),o.Mc(1,"Creating a driver"),o.dc())}function y(e,t){1&e&&(o.ec(0,"h1",6),o.Mc(1,"Editing a driver"),o.dc())}function w(e,t){if(1&e){var n=o.fc();o.ec(0,"app-tabs",7),o.mc("submit",(function(e){return o.Fc(n),o.qc().handleSubmit(e)})),o.dc()}if(2&e){var r=o.qc();o.wc("form",r.form)}}var I=function(){function e(e,t,n,r,i,o){this.routeSnapshot=e,this.tendoo=t,this.client=n,this.driversService=r,this.snackbar=i,this.router=o,this.mode="create",this.id=""}return e.prototype.ngOnInit=function(){var e=this;this.routeSnapshot.paramMap.subscribe((function(t){t.get("id")&&(e.mode="edit",e.id=t.get("id")),e.generateForm()}))},e.prototype.generateForm=function(){var e=this;this.tendoo.forms.getPublicForm("brookr.drivers",+this.id>0?+this.id:void 0).subscribe((function(t){e.form=t}))},e.prototype.selectThis=function(e){this.form.sections.forEach((function(e){return e.active=!1})),e.active=!0},e.prototype.handleSubmit=function(e){var t=this;if(this.form.sections.forEach((function(e){return l.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed, the form is invalid","OK",{duration:3e3});this.setFieldsState("disable"),this.driversService.setDriver(this.form.formGroup.value,+this.id>0?+this.id:null).subscribe((function(e){t.setFieldsState("enable"),t.snackbar.open(e.message,"OK",{duration:3e3}),t.id||t.router.navigateByUrl("/dashboard/drivers")}),(function(e){t.snackbar.open(e.error.message||e.message||"An unexpected error has occured","OK",{duration:3e3}),t.setFieldsState("enable")}))},e.prototype.setFieldsState=function(e){this.form.sections.forEach((function(t){return l.a["disabled"===e?"deactivateFields":"enableFields"](t.fields)}))},e.\u0275fac=function(t){return new(t||e)(o.Yb(i.a),o.Yb(c.b),o.Yb(g.b),o.Yb(b),o.Yb(s.a),o.Yb(i.b))},e.\u0275cmp=o.Sb({type:e,selectors:[["app-manage"]],decls:7,vars:3,consts:[[1,"mb-2"],["class","text-2xl mb-2 font-serif text-gray-800",4,"ngIf"],[1,"text-gray-700"],["class","text-2xl mb-2",4,"ngIf"],[3,"form","submit",4,"ngIf"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[1,"text-2xl","mb-2"],[3,"form","submit"]],template:function(e,t){1&e&&(o.ec(0,"app-layout"),o.ec(1,"div",0),o.Lc(2,v,2,0,"p",1),o.ec(3,"p",2),o.Mc(4,"Drivers can pickup and deliver loads which are assigned to them or not yet assigned."),o.dc(),o.dc(),o.Lc(5,y,2,0,"h1",3),o.Lc(6,w,1,1,"app-tabs",4),o.dc()),2&e&&(o.Kb(2),o.wc("ngIf","create"===t.mode),o.Kb(3),o.wc("ngIf","edit"===t.mode),o.Kb(1),o.wc("ngIf",t.form))},directives:[u.a,r.k,m.a],styles:[""]}),e}(),k=[{path:"",component:h},{path:"create",component:I},{path:"edit/:id",component:I}],x=function(){function e(){}return e.\u0275mod=o.Wb({type:e}),e.\u0275inj=o.Vb({factory:function(t){return new(t||e)},imports:[[i.e.forChild(k)],i.e]}),e}(),F=n("428I");n.d(t,"DriversModule",(function(){return O}));var O=function(){function e(){}return e.\u0275mod=o.Wb({type:e}),e.\u0275inj=o.Vb({factory:function(t){return new(t||e)},imports:[[r.c,x,F.a]]}),e}()}}]);