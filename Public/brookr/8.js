(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{CD38:function(e,n,o){"use strict";o.d(n,"a",(function(){return i}));var t=o("1C3z"),r=o("ZSGP"),i=function(){function e(){}return e.from=function(e){if(e){"string"!=typeof e&&(e=(e=e.filter((function(e){return"string"==typeof e}))).join("|"));var n,o=[],t=e.split("|"),i=/(min)\:([0-9])+/g,c=/(max)\:([0-9])+/g,u=/(same):(\w+)/g;return t.forEach((function(e){var t;"required"==e?o.push(r.s.required):"email"==e?o.push(r.s.email):(n=i.exec(e))?o.push(r.s.minLength(n[2])):(n=c.exec(e))?o.push(r.s.maxLength(n[2])):(n=u.exec(e))?o.push((t=n[2],function(e){return e.value!==e.parent.get(t).value?{matches:{formControl:e.parent.get(t),formControlName:t}}:null})):"number"==e&&o.push((function(e){return/^\d+$/.exec(e.value)?null:{number:!0}}))})),o}return null},e.extractControls=function(e,n){var o=this;void 0===n&&(n=!1);var t={};return e.forEach((function(e){if(void 0===e.control&&0==n)throw'Unable to use the validation control for the field : "'+e.name+"\". Please make sure to define the '.control' property for this field.";e.control&&(e.control.setValidators(o.from(e.validation)),t[e.name]=e.control)})),t},e.buildFormControls=function(e){return e.forEach((function(e){null==e.control?e.control=new r.d(e.value?e.value:null):e.control.setValue(e.value)})),this.extractControls(e)},e.buildFormControl=function(e){return null==e.control?e.control=new r.d(e.value||null):e.control.setValue(e.value||null),e.reset=new t.p,this.extractControls([e])[e.name]},e.touchAllFields=function(e){Object.keys(e.controls).forEach((function(n){e.get(n).markAsTouched()}))},e.buildFormGroup=function(n){return n.forEach((function(n){n.control=e.buildFormControl(n)})),{fields:n,formGroup:new r.g(e.extractControls(n))}},e.deactivateFields=function(e){e.forEach((function(e){return e.control.disable()}))},e.enableFields=function(e){e.forEach((function(e){return e.control.enable()}))},e.throwFieldsError=function(e,n,o){var t=function(t){e.get(t).setErrors({error:!0}),n.forEach((function(e){e.name===t&&(e.errors=o[e.name])}))};for(var r in o)t(r)},e.noNullValue=function(e){var n={};for(var o in e.value)null!==e.value[o]&&(n[o]=e.value[o]);return n},e.buildForm=function(n){var o={};return n.sections.forEach((function(n){var t=e.buildFormGroup(n.fields).formGroup;n.formGroup=t,o[n.namespace]=n.formGroup})),n.formGroup=new r.g(o),n},e.touchFormFields=function(n){n.sections.forEach((function(n){return e.touchAllFields(n.formGroup)}))},e.deactivateFormFiiels=function(n){n.sections.forEach((function(n){return e.deactivateFields(n.fields)}))},e.enableFormFields=function(n){n.sections.forEach((function(n){return e.enableFields(n.fields)}))},e}()},Yj9t:function(e,n,o){"use strict";o.r(n);var t=o("8AiQ"),r=o("5/c3"),i=o("CD38"),c=o("1C3z"),u=o("z35L"),l=o("2pW/"),a=o("nYrE"),s=o("ZSGP"),f=o("AFHi");function d(e,n){1&e&&(c.ec(0,"div",6),c.Zb(1,"mat-progress-spinner",7),c.dc())}function m(e,n){if(1&e&&c.Zb(0,"cb-field",15),2&e){var o=n.$implicit,t=c.qc(2);c.wc("group",t.form)("field",o)}}var p=function(e,n){return{"bg-pink-700 text-white":e,"bg-pink-500 text-gray-100":n}};function g(e,n){if(1&e){var o=c.fc();c.ec(0,"div",8),c.ec(1,"form",9),c.Lc(2,m,1,2,"cb-field",10),c.ec(3,"div",11),c.ec(4,"button",12),c.mc("click",(function(){return c.Fc(o),c.qc().login()})),c.Mc(5,"Login"),c.dc(),c.dc(),c.ec(6,"div",13),c.ec(7,"a",14),c.Mc(8,"Password Lost ?"),c.dc(),c.dc(),c.dc(),c.dc()}if(2&e){var t=c.qc();c.Kb(1),c.wc("formGroup",t.form),c.Kb(1),c.wc("ngForOf",t.fields),c.Kb(2),c.wc("disabled",t.isLoggingIn)("ngClass",c.zc(4,p,!t.isLoggingIn,t.isLoggingIn))}}var h=[{path:"login",component:function(){function e(e,n,o,t){this.tendoo=e,this.snackbar=n,this.router=o,this.activatedRoute=t,this.loaded=!1,this.isLoggingIn=!1}return e.prototype.ngOnInit=function(){var e=this;this.tendoo.fields.getPublicFields("brookr.login").subscribe((function(n){var o=i.a.buildFormGroup(n);e.form=o.formGroup,e.fields=o.fields,e.loaded=!0}),(function(n){e.snackbar.open(n.error.message||n.message||"An unexpected error has occured","TRY AGAIN").afterDismissed().subscribe((function(n){n.dismissedByAction&&e.ngOnInit()}))}))},e.prototype.login=function(){var e=this;if(i.a.touchAllFields(this.form),this.form.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});this.isLoggingIn=!0,i.a.deactivateFields(this.fields),this.tendoo.auth.login(this.form.value).subscribe((function(n){e.activatedRoute.queryParamMap.subscribe((function(o){var t=o.get("redirect")||"/dashboard";e.tendoo.auth.setCredentials(n.user,n.token),console.log("will redirect",t,n.user,e.tendoo.auth.getUser()),e.snackbar.open(n.message,null,{duration:3e3}),e.router.navigateByUrl(t)}))}),(function(n){e.isLoggingIn=!1,i.a.enableFields(e.fields),e.snackbar.open(n.error.message||"An unexpected error has occored","OK",{duration:5e3})}))},e.\u0275fac=function(n){return new(n||e)(c.Yb(u.b),c.Yb(l.a),c.Yb(r.b),c.Yb(r.a))},e.\u0275cmp=c.Sb({type:e,selectors:[["app-auth"]],decls:8,vars:2,consts:[["id","container",1,"bg-gray-200","h-full","flex","justify-center","items-center"],[1,"p-2","w-full","sm:w-2/3","md:w-1/2","lg:w-1/4","flex","flex-col","items-center"],[1,"brookr-font","block","text-6xl","my-3","text-gray-800"],[1,"my-2","text-gray-700"],["class","flex justify-center my-10",4,"ngIf"],["id","login-card","class","rounded-lg w-full shadow bg-white p-4 my-10",4,"ngIf"],[1,"flex","justify-center","my-10"],["diameter","60","mode","indeterminate"],["id","login-card",1,"rounded-lg","w-full","shadow","bg-white","p-4","my-10"],[3,"formGroup"],[3,"group","field",4,"ngFor","ngForOf"],[1,"button-container","py-3","flex","justify-end"],["type","submit",1,"rounded","shadow","px-3","py-2","bg-pink-700","text-white",3,"disabled","ngClass","click"],[1,"button-container","py-3","flex","justify-center"],["href","#",1,"hover:underline","text-blue-600","text-sm"],[3,"group","field"]],template:function(e,n){1&e&&(c.ec(0,"div",0),c.ec(1,"div",1),c.ec(2,"span",2),c.Mc(3,"Brookr"),c.dc(),c.ec(4,"span",3),c.Mc(5,"Loads Delivery Application"),c.dc(),c.Lc(6,d,2,0,"div",4),c.Lc(7,g,9,7,"div",5),c.dc(),c.dc()),2&e&&(c.Kb(6),c.wc("ngIf",!n.loaded),c.Kb(1),c.wc("ngIf",n.loaded))},directives:[t.l,a.a,s.t,s.n,s.h,t.k,t.j,f.c],styles:[""]}),e}()}],b=function(){function e(){}return e.\u0275mod=c.Wb({type:e}),e.\u0275inj=c.Vb({factory:function(n){return new(n||e)},imports:[[r.e.forChild(h)],r.e]}),e}(),v=o("428I");o.d(n,"AuthModule",(function(){return w}));var w=function(){function e(){}return e.\u0275mod=c.Wb({type:e}),e.\u0275inj=c.Vb({factory:function(n){return new(n||e)},imports:[[t.c,b,v.a]]}),e}()}}]);