{"version":3,"sources":["./src/app/dashboard/dashboard.component.html","./src/app/dashboard/dashboard-routing.module.ts","./src/app/dashboard/dashboard.component.scss","./src/app/dashboard/dashboard.component.ts","./src/app/dashboard/dashboard.module.ts","./src/app/services/dashboard.service.ts"],"names":[],"mappings":"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","file":"dashboard-dashboard-module.js","sourcesContent":["export default \"<app-layout>\\r\\n    <div class=\\\"flex justify-between items-center mb-3\\\">\\r\\n        <span class=\\\"text-2xl text-gray-700 mb-4 block\\\">Activity Overview</span>\\r\\n        <button (click)=\\\"refreshDashboardReport()\\\" class=\\\"rounded-lg border hover:border-green-400 border-gray-400 h-10 w-10 flex items-center justify-center hover:bg-green-100\\\"><mat-icon>refresh</mat-icon></button>\\r\\n    </div>\\r\\n    <div class=\\\"top-dashboard flex flex-wrap md:-mx-4\\\">\\r\\n        <div class=\\\"flex-auto px-4 w-full md:w-1/3\\\">\\r\\n            <div class=\\\"rounded p-4 bg-green-200 flex\\\">\\r\\n                <div class=\\\"w-20 h-20 rounded flex items-center justify-center\\\">\\r\\n                    <img [src]=\\\"urlPrefix + '/assets/images/trailer.png'\\\" alt=\\\"\\\">\\r\\n                </div>\\r\\n                <div class=\\\"flex-auto pl-4\\\">\\r\\n                    <p class=\\\"text-sm text-green-800 font-semibold\\\">Loads This Week</p>\\r\\n                    <p class=\\\"text-4xl text-green-800 font-extrabold\\\">{{ dashboardReport.current.total_loads }}</p>\\r\\n                    <div class=\\\"flex justify-between items-end text-green-600\\\">\\r\\n                        <span class=\\\"text-xs\\\">{{ percentage( 'week_total_loads' ) + '%' }}\\r\\n                        </span>\\r\\n                        <span class=\\\"text-xs\\\">{{ dashboardReport.previous.week_pending_loads }} Last week</span>\\r\\n                    </div>\\r\\n                    <div class=\\\"flex justify-between items-end text-green-600\\\">\\r\\n                        <span class=\\\"text-xs\\\">{{ dashboardReport.current.week_pending_loads }} Pending</span>\\r\\n                        <span class=\\\"text-xs\\\">{{ dashboardReport.current.week_ongoing_loads }} Ongoing</span>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"flex-auto px-4 w-full md:w-1/3\\\">\\r\\n            <div class=\\\"rounded p-4 bg-blue-200 flex\\\">\\r\\n                <div class=\\\"w-20 h-20 rounded flex items-center justify-center\\\">\\r\\n                    <img [src]=\\\"urlPrefix + '/assets/images/income.png'\\\" alt=\\\"\\\">\\r\\n                </div>\\r\\n                <div class=\\\"flex-auto pl-4\\\">\\r\\n                    <p class=\\\"text-sm text-blue-800 font-semibold\\\">Income This week</p>\\r\\n                    <p class=\\\"text-4xl text-blue-800 font-extrabold\\\">{{ dashboardReport.current.total_incomes }}</p>\\r\\n                    <div class=\\\"flex justify-between items-end text-blue-600\\\">\\r\\n                        <span class=\\\"text-xs\\\">{{ percentage( 'week_total_incomes' ) + '%' }}</span>\\r\\n                        <span class=\\\"text-xs\\\">{{ dashboardReport.previous.total_incomes }} Last week</span>\\r\\n                    </div>\\r\\n                    <div class=\\\"flex justify-between items-end text-blue-600\\\">\\r\\n                        <span class=\\\"text-xs\\\">-</span>\\r\\n                        <span class=\\\"text-xs\\\">-</span>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"flex-auto px-4 w-full md:w-1/3\\\">\\r\\n            <div class=\\\"rounded p-4 bg-orange-200 flex\\\">\\r\\n                <div class=\\\"w-20 h-20 rounded flex items-center justify-center\\\">\\r\\n                    <img [src]=\\\"urlPrefix + '/assets/images/steering-wheel.png'\\\" alt=\\\"\\\">\\r\\n                </div> \\r\\n                <div class=\\\"flex-auto pl-4\\\">\\r\\n                    <p class=\\\"text-sm text-orange-800 font-semibold\\\">Drivers Avaialble</p>\\r\\n                    <p class=\\\"text-4xl text-orange-800 font-extrabold\\\">{{ dashboardReport.current.total_drivers }}</p>\\r\\n                    <div class=\\\"flex justify-between items-end text-orange-600\\\">\\r\\n                        <span class=\\\"text-xs\\\">Available Drivers {{ dashboardReport.current.unassigned_drivers }}</span>\\r\\n                        <span class=\\\"text-xs\\\">Trucks {{ dashboardReport.current.total_trucks }}</span>\\r\\n                    </div>\\r\\n                    <div class=\\\"flex justify-between items-end text-orange-600\\\">\\r\\n                        <span class=\\\"text-xs\\\">Available Trucks {{ dashboardReport.current.available_trucks }}</span>\\r\\n                        <span class=\\\"text-xs\\\">Assigned {{ dashboardReport.current.assigned_trucks }}</span>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"md:-mx-4 my-4 flex flex-wrap\\\">\\r\\n        <div class=\\\"px-4 w-full md:w-1/3\\\">\\r\\n            <div class=\\\"bg-gray-200 mb-4\\\">\\r\\n                <div class=\\\"title text-xl border-b border-gray-400 p-4 text-gray-700\\\">Medical Expiration</div>\\r\\n                <div class=\\\"content\\\">\\r\\n                    <ul>\\r\\n                        <li *ngFor=\\\"let driver of driversByMedical\\\" class=\\\"px-4 py-2 border-b border-gray-300 flex justify-between items-center\\\">\\r\\n                            <span class=\\\"text-gray-700 flex flex-auto justify-between items-center\\\">\\r\\n                                <span>{{ driver.first_name }} {{ driver.last_name }}</span>\\r\\n                                <span *ngIf=\\\"driver.medical_card_expiration\\\">{{ driver.medical_card_expiration | date }}</span>\\r\\n                                <span *ngIf=\\\"! driver.medical_card_expiration\\\">N/A</span>\\r\\n                            </span>\\r\\n                            <div class=\\\"ml-4\\\"><button [routerLink]=\\\"'/dashboard/drivers/edit/' + driver.driver_id\\\" class=\\\"rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-green-400 hover:text-white\\\">Edit</button></div>\\r\\n                        </li>\\r\\n                        <li class=\\\"px-4 py-2 border-b border-gray-300 flex justify-center items-center\\\">\\r\\n                            <a class=\\\"text-gray-700 hover:text-green-600 hover:text-underline\\\" routerLink=\\\"/dashboard/drivers\\\">See Full List</a>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"bg-gray-200 mb-4\\\">\\r\\n                <div class=\\\"title text-xl border-b border-gray-400 p-4 text-gray-700\\\">License Expiration</div>\\r\\n                <div class=\\\"content\\\">\\r\\n                    <ul>\\r\\n                        <li *ngFor=\\\"let driver of driversByLicense\\\" class=\\\"px-4 py-2 border-b border-gray-300 flex justify-between items-center\\\">\\r\\n                            <span class=\\\"text-gray-700 flex flex-auto justify-between items-center\\\">\\r\\n                                <span>{{ driver.first_name }} {{ driver.last_name }}</span>\\r\\n                                <span *ngIf=\\\"driver.driving_license_expiration\\\">{{ driver.driving_license_expiration | date }}</span>\\r\\n                                <span *ngIf=\\\"! driver.driving_license_expiration\\\">N/A</span>\\r\\n                            </span>\\r\\n                            <div class=\\\"ml-4\\\"><button [routerLink]=\\\"'/dashboard/drivers/edit/' + driver.driver_id\\\" class=\\\"rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-green-400 hover:text-white\\\">Edit</button></div>\\r\\n                        </li>\\r\\n                        <li class=\\\"px-4 py-2 border-b border-gray-300 flex justify-center items-center\\\">\\r\\n                            <a class=\\\"text-gray-700 hover:text-green-600 hover:text-underline\\\" routerLink=\\\"/dashboard/drivers\\\">See Full List</a>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"px-4 md:w-2/3 w-full\\\">\\r\\n            <div class=\\\"bg-teal-200\\\">\\r\\n                <div class=\\\"title text-xl border-b border-teal-400 p-4 text-gray-700\\\">Unassigned Loads</div>\\r\\n                <div class=\\\"content\\\">\\r\\n                    <ul>\\r\\n                        <li *ngFor=\\\"let load of unassignedLoads\\\" class=\\\"px-4 py-2 border-b border-teal-300 flex justify-between items-center\\\">\\r\\n                            <span class=\\\"text-teal-700 flex flex-auto justify-between mr-4\\\">\\r\\n                                <div class=\\\"flex flex-col\\\">\\r\\n                                    <span class=\\\"text-lg block\\\">{{ load.name }}</span>\\r\\n                                    <span class=\\\"text-xs mt-1 block\\\">Load Ref : {{ load.load_reference }}</span>\\r\\n                                    <span class=\\\"text-xs mt-1 block\\\">Pickup Ref : {{ load.pickup_reference }}</span>\\r\\n                                </div>\\r\\n\\r\\n                                <span>{{ load.pickup_date | date }}</span>\\r\\n                            </span>\\r\\n                            <div><button [routerLink]=\\\"'/dashboard/loads/edit/' + load.id\\\" class=\\\"rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-teal-600 hover:text-white\\\">Assign</button></div>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"md:-mx-4 my-4 flex\\\">\\r\\n        <div class=\\\"px-4 md:w-1/3\\\">\\r\\n            \\r\\n        </div>\\r\\n        <div class=\\\"px-4 md:w-2/3\\\">\\r\\n            <!-- <div class=\\\"bg-indigo-200\\\">\\r\\n                <div class=\\\"title text-xl border-b border-indigo-400 p-4 text-gray-700\\\">Unassigned Loads</div>\\r\\n                <div class=\\\"content\\\">\\r\\n                    <ul>\\r\\n                        <li class=\\\"px-4 py-2 border-b border-indigo-300 flex justify-between items-center\\\">\\r\\n                            <span class=\\\"text-indigo-700\\\">John Doe - 2020-09-09</span>\\r\\n                            <div><button class=\\\"rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white\\\">Assign</button></div>\\r\\n                        </li>\\r\\n                        <li class=\\\"px-4 py-2 border-b border-indigo-300 flex justify-between items-center\\\">\\r\\n                            <span class=\\\"text-indigo-700\\\">John Doe - 2020-09-09</span>\\r\\n                            <div><button class=\\\"rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white\\\">Assign</button></div>\\r\\n                        </li>\\r\\n                        <li class=\\\"px-4 py-2 border-b border-indigo-300 flex justify-between items-center\\\">\\r\\n                            <span class=\\\"text-indigo-700\\\">John Doe - 2020-09-09</span>\\r\\n                            <div><button class=\\\"rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white\\\">Assign</button></div>\\r\\n                        </li>\\r\\n                        <li class=\\\"px-4 py-2 border-b border-indigo-300 flex justify-between items-center\\\">\\r\\n                            <span class=\\\"text-indigo-700\\\">John Doe - 2020-09-09</span>\\r\\n                            <div><button class=\\\"rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white\\\">Assign</button></div>\\r\\n                        </li>\\r\\n                        <li class=\\\"px-4 py-2 border-b border-indigo-300 flex justify-between items-center\\\">\\r\\n                            <span class=\\\"text-indigo-700\\\">John Doe - 2020-09-09</span>\\r\\n                            <div><button class=\\\"rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white\\\">Assign</button></div>\\r\\n                        </li>\\r\\n                        <li class=\\\"px-4 py-2 border-b border-indigo-300 flex justify-between items-center\\\">\\r\\n                            <span class=\\\"text-indigo-700\\\">John Doe - 2020-09-09</span>\\r\\n                            <div><button class=\\\"rounded-lg bg-white px-2 py-1 shadow text-sm hover:bg-indigo-600 hover:text-white\\\">Assign</button></div>\\r\\n                        </li>\\r\\n                        <li class=\\\"px-4 py-2 border-b border-indigo-300 flex justify-center items-center\\\">\\r\\n                            <a class=\\\"text-indigo-700 hover:text-green-600 hover:text-underline\\\" routerLink=\\\"/dashboard/loads\\\">See Full List</a>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n            </div> -->\\r\\n        </div>\\r\\n    </div>\\r\\n</app-layout>\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { DashboardComponent } from './dashboard.component';\r\nimport { AllowDispatcherGuard } from '../guards/allow-dispatcher.guard';\r\n\r\nconst routes: Routes = [\r\n  { \r\n    path: '', \r\n    component: DashboardComponent, \r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  exports: [RouterModule]\r\n})\r\nexport class DashboardRoutingModule { }\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9qZWN0cy9icm9va3ItdWkvc3JjL2FwcC9kYXNoYm9hcmQvZGFzaGJvYXJkLmNvbXBvbmVudC5zY3NzIn0= */\";","import { Component, OnInit, isDevMode } from '@angular/core';\r\nimport { TableConfig } from '@cloud-breeze/core';\r\nimport { TendooService } from '@cloud-breeze/services';\r\nimport { DashboardService } from '../services/dashboard.service';\r\nimport { forkJoin } from 'rxjs';\r\nimport { DriversService } from '../services/drivers.service';\r\nimport { LoadsService } from '../services/loads.service';\r\n\r\ninterface SingleWeekReport {\r\n  total_loads: number;\r\n  total_incomes: number;\r\n  total_drivers: number;\r\n  total_trucks: number;\r\n  week_total_loads: number;\r\n  week_ongoing_loads: number;\r\n  week_pending_loads: number;\r\n  week_total_trucks: number;\r\n  week_total_drivers: number;\r\n  week_total_incomes: number;\r\n  assigned_drivers: number;\r\n  unassigned_drivers: number;\r\n  unavailable_drivers: number;\r\n  available_trucks: number;\r\n  assigned_trucks: number;\r\n}\r\n\r\ninterface DashboardReport {\r\n  current: SingleWeekReport,\r\n  previous: SingleWeekReport  \r\n}\r\n\r\nconst defaultValues:SingleWeekReport   = {\r\n  total_loads: 0,\r\n  total_incomes: 0,\r\n  total_drivers: 0,\r\n  total_trucks: 0,\r\n  week_total_loads: 0,\r\n  week_ongoing_loads: 0,\r\n  week_pending_loads: 0,\r\n  week_total_drivers: 0,\r\n  week_total_incomes: 0,\r\n  week_total_trucks: 0,\r\n  assigned_drivers: 0,\r\n  unassigned_drivers: 0,\r\n  unavailable_drivers: 0,\r\n  available_trucks: 0,\r\n  assigned_trucks: 0,\r\n};\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.scss']\r\n})\r\nexport class DashboardComponent implements OnInit {\r\n  dashboardReport : DashboardReport   = {\r\n    current: defaultValues,\r\n    previous: defaultValues\r\n  }\r\n  \r\n  tableCrud:TableConfig   = {\r\n    columns: {\r\n      load : {\r\n        label: 'Load',\r\n      },\r\n      status: {\r\n        label: 'Status'\r\n      },\r\n      driver: {\r\n        label: 'Driver'\r\n      }\r\n    },\r\n    labels: {\r\n      list_title: 'Ongoing Loads',\r\n      list_description: 'display all ongoing loads',\r\n      create_title: 'Create Load',\r\n      create_description: 'Will create new load',\r\n      edit_title: 'Edit an existing load',\r\n      edit_description: 'Load will be edited'\r\n    },\r\n    namespace: 'brookr.loads',\r\n    fields: [],\r\n    links: {},\r\n  }\r\n  urlPrefix   = ! isDevMode() ? '/modules/brookr/brookr' : '';\r\n  driversByMedical: any[];\r\n  driversByLicense: any[];\r\n  unassignedLoads: any[];\r\n\r\n  constructor(\r\n    private tendoo: TendooService,\r\n    private dashboard: DashboardService,\r\n    private drivers: DriversService,\r\n    private loads: LoadsService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    forkJoin([\r\n      this.dashboard.getReport(),\r\n      this.drivers.getByMedicalCard(),\r\n      this.drivers.getByDriverCard(),\r\n      this.loads.getUnassignedLoads(),\r\n    ]).subscribe( (result: [ DashboardReport, any[], any[], any[] ]) => {\r\n      this.parseReport( result[0] );\r\n      this.driversByMedical   = result[1];\r\n      this.driversByLicense   = result[2];\r\n      this.unassignedLoads    = result[3];\r\n    });\r\n  }\r\n\r\n  parseReport( report: DashboardReport ) {\r\n    this.dashboardReport.current    = report.current || this.dashboardReport.current;\r\n    this.dashboardReport.previous   = report.previous || this.dashboardReport.previous;\r\n  }\r\n\r\n  percentage( argument ) {\r\n    if ( this.dashboardReport.current[ argument ] !== 0 && this.dashboardReport.previous[ argument ] !== 0 ) {\r\n      return ( ( this.dashboardReport.current[ argument ] - this.dashboardReport.previous[ argument ] ) * 100 ) / this.dashboardReport.current[ argument ];\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  refreshDashboardReport() {\r\n    this.dashboard.refreshReport().subscribe( result => {\r\n      this.ngOnInit();\r\n    })\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { DashboardRoutingModule } from './dashboard-routing.module';\r\nimport { DashboardComponent } from './dashboard.component';\r\nimport { MaterialModule } from '../material.module';\r\nimport { DeclarationsModule } from '../declarations/declarations.module';\r\n\r\n@NgModule({\r\n  declarations: [ DashboardComponent ],\r\n  imports: [\r\n    CommonModule,\r\n    DashboardRoutingModule,\r\n    MaterialModule,\r\n    DeclarationsModule\r\n  ]\r\n})\r\nexport class DashboardModule { }\r\n","import { Injectable } from '@angular/core';\nimport { TendooService } from '@cloud-breeze/services';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DashboardService {\n\n  constructor(                                                                                                                                                                                                                                                                                                \n    private tendoo: TendooService\n  ) { }\n\n  getReport() {\n    return this.tendoo.post( `${this.tendoo.baseUrl}brookr/dashboard`, {}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     );\n  }\n\n  refreshReport() {\n    return this.tendoo.post( `${this.tendoo.baseUrl}brookr/dashboard/refresh`, {});\n  }\n}\n"],"sourceRoot":"webpack:///"}