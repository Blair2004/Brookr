(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{uPd1:function(e,t,n){"use strict";n.r(t);var i=n("8AiQ"),r=n("5/c3"),o=n("1C3z"),c=n("z35L"),a=n("2pW/"),s=n("BLjT"),u=n("ryqd"),d=n("AFHi"),f=function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function h(e,t){if(1&e){var n=o.fc();o.ec(0,"cb-table",5),o.mc("action",(function(e){return o.Fc(n),o.qc().handleAction(e)}))("sort",(function(e){return o.Fc(n),o.qc().handleSort(e)}))("refresh",(function(e){return o.Fc(n),o.qc().handleRefresh(e)}))("page",(function(e){return o.Fc(n),o.qc().handlePagineNavigation(e)}))("search",(function(e){return o.Fc(n),o.qc().handleSearch(e)}))("delete",(function(e){return o.Fc(n),o.qc().handleDelete(e)})),o.dc()}if(2&e){var i=o.qc();o.wc("is-loading",i.isLoading)("crud",i.config)}}var p=function(){function e(e,t,n,i){this.tendoo=e,this.snackbar=t,this.dialog=n,this.router=i,this.entries=[],this.isLoading=!1,this.sort={},this.search={},this.perPage={per_page:2},this.page={},this.searchEnabled=!1}return e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.ngOnInit=function(){var e=this;this.isLoading=!0,this.tendoo.crud.getConfig("brookr.trucks",f(f(f(f({},this.sort),this.search),this.page),this.perPage)).subscribe((function(t){e.isLoading=!1,e.config=t,e.config.title="Trucks List"}),(function(t){e.snackbar.open("An error has occured while loading the entries.","OK",{duration:5e3})}))},e.prototype.handleAction=function(e){var t=this;"DELETE"===e.menu.type?this.tendoo.crud.delete(e.menu.url.replace("{id}",e.row.id)).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.ngOnInit(),t.dialog.getDialogById(e.menu.namespace).close()}),(function(n){t.snackbar.open(n.error.message||"An unexpected error occured","OK",{duration:5e3}),t.dialog.getDialogById(e.menu.namespace).close()})):"GOTO"===e.menu.type&&this.router.navigateByUrl(e.menu.url.replace("{id}",e.row.id))},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.prototype.handleDelete=function(e){},e.\u0275fac=function(t){return new(t||e)(o.Yb(c.b),o.Yb(a.a),o.Yb(s.b),o.Yb(r.b))},e.\u0275cmp=o.Sb({type:e,selectors:[["app-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search","delete",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search","delete"]],template:function(e,t){1&e&&(o.ec(0,"app-layout"),o.ec(1,"div",0),o.ec(2,"span",1),o.Mc(3,"Trucks List"),o.dc(),o.ec(4,"p",2),o.Mc(5,"Manage all the trucks registered on the system"),o.dc(),o.dc(),o.ec(6,"div",3),o.Lc(7,h,1,2,"cb-table",4),o.dc(),o.dc()),2&e&&(o.Kb(7),o.wc("ngIf",t.config))},directives:[u.a,i.k,d.b],styles:[""]}),e}(),l=n("CD38"),b=n("t5c9"),g=function(){function e(e,t){this.http=e,this.tendoo=t,this.baseUrl=this.tendoo.baseUrl}return e.prototype.save=function(e,t){return void 0===t&&(t=void 0),console.log(t),this.tendoo[void 0!==t?"put":"post"](this.baseUrl+"brookr/trucks"+(void 0===t?"":"/"+t),e)},e.prototype.delete=function(e){return this.tendoo.delete(this.baseUrl+"broork/trucks/"+e)},e.prototype.get=function(){return this.tendoo.get(this.baseUrl+"brookr/trucks")},e.\u0275fac=function(t){return new(t||e)(o.ic(b.b),o.ic(c.b))},e.\u0275prov=o.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),m=n("eTQ6");function v(e,t){1&e&&(o.ec(0,"div",2),o.ec(1,"p",3),o.Mc(2,"Creating Trucks"),o.dc(),o.ec(3,"p",4),o.Mc(4,"Trucks are the vehicules assigned to the drivers for loads transport."),o.dc(),o.dc())}function y(e,t){1&e&&(o.ec(0,"div",2),o.ec(1,"p",3),o.Mc(2,"Editing Trucks"),o.dc(),o.ec(3,"p",4),o.Mc(4,"Trucks are the vehicules assigned to the drivers for loads transport."),o.dc(),o.dc())}function k(e,t){if(1&e){var n=o.fc();o.ec(0,"app-tabs",5),o.mc("submit",(function(e){return o.Fc(n),o.qc().handleSubmit(e)})),o.dc()}if(2&e){var i=o.qc();o.wc("form",i.form)}}var w=function(){function e(e,t,n,i,r){this.tendoo=e,this.activeRoute=t,this.trucksService=n,this.snackbar=i,this.router=r,this.mode="create"}return e.prototype.ngOnInit=function(){var e=this;this.activeRoute.paramMap.subscribe((function(t){t.get("id")&&(e.mode="edit",e.identifier=t.get("id")),e.tendoo.forms.getPublicForm("brookr.trucks",e.identifier).subscribe((function(t){e.form=t}))}))},e.prototype.handleSubmit=function(e){var t=this;if(e.sections.forEach((function(e){return l.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});e.sections.forEach((function(e){return l.a.deactivateFields(e.fields)})),this.trucksService.save(e.formGroup.value,this.identifier).subscribe((function(e){t.snackbar.open(e.message,"OK",{duration:3e3}),t.identifier||t.router.navigateByUrl("/dashboard/trucks")}),(function(n){e.sections.forEach((function(e){return l.a.enableFields(e.fields)})),t.snackbar.open(n.error.message||"An unexpected error has occured.","OK",{duration:3e3})}))},e.\u0275fac=function(t){return new(t||e)(o.Yb(c.b),o.Yb(r.a),o.Yb(g),o.Yb(a.a),o.Yb(r.b))},e.\u0275cmp=o.Sb({type:e,selectors:[["app-manage"]],decls:4,vars:3,consts:[["class","mb-2",4,"ngIf"],[3,"form","submit",4,"ngIf"],[1,"mb-2"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[1,"text-gray-700"],[3,"form","submit"]],template:function(e,t){1&e&&(o.ec(0,"app-layout"),o.Lc(1,v,5,0,"div",0),o.Lc(2,y,5,0,"div",0),o.Lc(3,k,1,1,"app-tabs",1),o.dc()),2&e&&(o.Kb(1),o.wc("ngIf","create"===t.mode),o.Kb(1),o.wc("ngIf","edit"===t.mode),o.Kb(1),o.wc("ngIf",t.form))},directives:[u.a,i.k,m.a],styles:[""]}),e}(),I=function(){function e(e){this.tendoo=e,this.baseUrl=this.tendoo.baseUrl}return e.prototype.saveMaintenance=function(e,t){void 0===t&&(t=null);var n=["",null].includes(t)?"post":"put";return this.tendoo[n](this.tendoo.baseUrl+"brookr/trucks-maintenances"+(t?"/"+t:""),e)},e.prototype.deleteMaintenance=function(e){return this.tendoo.delete(this.baseUrl+"brookr/trucks-maintenances/"+e)},e.\u0275fac=function(t){return new(t||e)(o.ic(c.b))},e.\u0275prov=o.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),O=function(){return(O=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function M(e,t){if(1&e){var n=o.fc();o.ec(0,"cb-table",5),o.mc("action",(function(e){return o.Fc(n),o.qc().handleAction(e)}))("sort",(function(e){return o.Fc(n),o.qc().handleSort(e)}))("refresh",(function(e){return o.Fc(n),o.qc().handleRefresh(e)}))("page",(function(e){return o.Fc(n),o.qc().handlePagineNavigation(e)}))("search",(function(e){return o.Fc(n),o.qc().handleSearch(e)}))("delete",(function(e){return o.Fc(n),o.qc().handleDelete(e)})),o.dc()}if(2&e){var i=o.qc();o.wc("is-loading",i.isLoading)("crud",i.config)}}var x=function(){function e(e,t,n,i,r,o){this.snackbar=e,this.router=t,this.tendoo=n,this.snapshot=i,this.truckMaintenance=r,this.dialog=o,this.isLoading=!1,this.sort={},this.perPage={},this.search={},this.page={}}return e.prototype.ngOnInit=function(){var e=this;this.isLoading=!0,this.tendoo.crud.getConfig("brookr.trucks-maintenance",O(O(O({},this.sort),this.search),this.page)).subscribe((function(t){e.isLoading=!1,e.config=t}))},e.prototype.handleAction=function(e){var t=this;"DELETE"===e.menu.type?this.truckMaintenance.deleteMaintenance(e.row.id).subscribe((function(n){t.snackbar.open(n.message,"OK",{duration:3e3}),t.dialog.getDialogById(e.menu.namespace).close(),t.ngOnInit()}),(function(e){t.snackbar.open(e.error.message||e.message||"An unexpected error has occured","OK",{duration:3e3})})):"GOTO"===e.menu.type&&this.router.navigateByUrl("/dashboard/trucks/maintenances/manage/"+e.row.id)},e.prototype.handleSort=function(e){this.sort=e,this.ngOnInit()},e.prototype.handleRefresh=function(e){this.ngOnInit()},e.prototype.handlePagineNavigation=function(e){this.perPage={per_page:e.pageSize},this.page={page:e.pageIndex+1},this.ngOnInit()},e.prototype.handleSearch=function(e){this.search={search:e},this.ngOnInit()},e.prototype.handleDelete=function(e){console.log(e)},e.\u0275fac=function(t){return new(t||e)(o.Yb(a.a),o.Yb(r.b),o.Yb(c.b),o.Yb(r.a),o.Yb(I),o.Yb(s.b))},e.\u0275cmp=o.Sb({type:e,selectors:[["app-maintenance-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search","delete",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search","delete"]],template:function(e,t){1&e&&(o.ec(0,"app-layout"),o.ec(1,"div",0),o.ec(2,"span",1),o.Mc(3,"Trucks Maintenance"),o.dc(),o.ec(4,"p",2),o.Mc(5,"an history of all trucks maintenance"),o.dc(),o.dc(),o.ec(6,"div",3),o.Lc(7,M,1,2,"cb-table",4),o.dc(),o.dc()),2&e&&(o.Kb(7),o.wc("ngIf",t.config))},directives:[u.a,i.k,d.b],styles:[""]}),e}();function F(e,t){1&e&&(o.ec(0,"div",2),o.ec(1,"p",3),o.Mc(2,"Registering Maintenance"),o.dc(),o.ec(3,"p",4),o.Mc(4,"Register a maintenance report and attach it to a truck"),o.dc(),o.dc())}function L(e,t){1&e&&(o.ec(0,"div",2),o.ec(1,"p",3),o.Mc(2,"Edit Maintenance"),o.dc(),o.ec(3,"p",4),o.Mc(4,"Edit an existing maintenance report attached to a truck."),o.dc(),o.dc())}function S(e,t){if(1&e){var n=o.fc();o.ec(0,"app-tabs",5),o.mc("submit",(function(e){return o.Fc(n),o.qc().handleSubmit(e)})),o.dc()}if(2&e){var i=o.qc();o.wc("form",i.form)}}var Y=function(){function e(e,t,n,i,r){this.trucksMaintenances=e,this.snapshot=t,this.snackbar=n,this.tendoo=i,this.router=r,this.mode="create",this.identifier=""}return e.prototype.ngOnInit=function(){var e=this;this.snapshot.paramMap.subscribe((function(t){t.get("id")&&(e.mode="edit",e.identifier=t.get("id")),e.tendoo.forms.getPublicForm("brookr.trucks-maintenances",e.identifier?+e.identifier:void 0).subscribe((function(t){e.form=l.a.buildForm(t)}))}))},e.prototype.handleSubmit=function(e){var t=this;if(this.form.sections.forEach((function(e){return l.a.touchAllFields(e.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to proceed the form is not valid.","OK",{duration:3e3});this.fieldsControl("disable"),this.trucksMaintenances.saveMaintenance(this.form.formGroup.value,this.identifier||"").subscribe((function(e){t.snackbar.open(e.message,"OK",{duration:3e3}),t.identifier?t.fieldsControl("enable"):t.router.navigateByUrl("/dashboard/trucks/maintenances")}),(function(e){t.fieldsControl("enable"),t.form.sections.forEach((function(e){return l.a.enableFields(e.fields)})),t.snackbar.open(e.error.message||"An unexpected error has occured","OK")}))},e.prototype.fieldsControl=function(e){switch(e){case"disable":this.form.sections.forEach((function(e){return l.a.deactivateFields(e.fields)}));break;case"enable":this.form.sections.forEach((function(e){return l.a.enableFields(e.fields)}))}},e.\u0275fac=function(t){return new(t||e)(o.Yb(I),o.Yb(r.a),o.Yb(a.a),o.Yb(c.b),o.Yb(r.b))},e.\u0275cmp=o.Sb({type:e,selectors:[["app-maintenance-manage"]],decls:4,vars:3,consts:[["class","mb-2",4,"ngIf"],[3,"form","submit",4,"ngIf"],[1,"mb-2"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[1,"text-gray-700"],[3,"form","submit"]],template:function(e,t){1&e&&(o.ec(0,"app-layout"),o.Lc(1,F,5,0,"div",0),o.Lc(2,L,5,0,"div",0),o.Lc(3,S,1,1,"app-tabs",1),o.dc()),2&e&&(o.Kb(1),o.wc("ngIf","create"===t.mode),o.Kb(1),o.wc("ngIf","edit"===t.mode),o.Kb(1),o.wc("ngIf",t.form))},directives:[u.a,i.k,m.a],styles:[""]}),e}(),q=[{path:"",component:p},{path:"create",component:w},{path:"edit/:id",component:w},{path:":id/maintenances",component:x},{path:":id/maintenances/edit",component:Y},{path:"maintenances/manage",component:Y},{path:"maintenances/manage/:id",component:Y},{path:"maintenances",component:x}],K=function(){function e(){}return e.\u0275mod=o.Wb({type:e}),e.\u0275inj=o.Vb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(q)],r.e]}),e}(),E=n("428I");n.d(t,"TrucksModule",(function(){return U}));var U=function(){function e(){}return e.\u0275mod=o.Wb({type:e}),e.\u0275inj=o.Vb({factory:function(t){return new(t||e)},imports:[[i.c,K,E.a]]}),e}()}}]);