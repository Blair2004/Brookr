(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{TDBs:function(e,c,t){"use strict";t.r(c);var r=t("8AiQ"),d=t("5/c3"),i=t("1C3z"),o=t("z35L"),s=function(){function e(e){this.tendoo=e}return e.prototype.getReport=function(){return this.tendoo.post(this.tendoo.baseUrl+"brookr/dashboard",{})},e.prototype.refreshReport=function(){return this.tendoo.post(this.tendoo.baseUrl+"brookr/dashboard/refresh",{})},e.\u0275fac=function(c){return new(c||e)(i.hc(o.b))},e.\u0275prov=i.Tb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),a=t("cQOC"),n=t("PTmb"),l=t("k46B"),b=t("ryqd"),p=t("r4gC");function u(e,c){if(1&e&&(i.dc(0,"li",33),i.dc(1,"span",34),i.dc(2,"span"),i.Nc(3),i.cc(),i.dc(4,"span"),i.Nc(5),i.qc(6,"date"),i.cc(),i.cc(),i.dc(7,"div",35),i.dc(8,"button",36),i.Nc(9,"Edit"),i.cc(),i.cc(),i.cc()),2&e){var t=c.$implicit;i.Kb(3),i.Qc("",t.first_name," ",t.last_name,""),i.Kb(2),i.Oc(i.rc(6,4,t.medical_card_expiration)),i.Kb(3),i.vc("routerLink","/dashboard/drivers/edit/"+t.driver_id)}}function v(e,c){if(1&e&&(i.dc(0,"li",37),i.dc(1,"span",38),i.dc(2,"div",39),i.dc(3,"span",40),i.Nc(4),i.cc(),i.dc(5,"span",41),i.Nc(6),i.cc(),i.dc(7,"span",41),i.Nc(8),i.cc(),i.cc(),i.dc(9,"span"),i.Nc(10),i.qc(11,"date"),i.cc(),i.cc(),i.dc(12,"div"),i.dc(13,"button",42),i.Nc(14,"Assign"),i.cc(),i.cc(),i.cc()),2&e){var t=c.$implicit;i.Kb(4),i.Oc(t.name),i.Kb(2),i.Pc("Load Ref : ",t.load_reference,""),i.Kb(2),i.Pc("Pickup Ref : ",t.pickup_reference,""),i.Kb(2),i.Oc(i.rc(11,5,t.pickup_date)),i.Kb(3),i.vc("routerLink","/dashboard/loads/edit/"+t.id)}}function f(e,c){if(1&e&&(i.dc(0,"li",33),i.dc(1,"span",34),i.dc(2,"span"),i.Nc(3),i.cc(),i.dc(4,"span"),i.Nc(5),i.qc(6,"date"),i.cc(),i.cc(),i.dc(7,"div",35),i.dc(8,"button",36),i.Nc(9,"Edit"),i.cc(),i.cc(),i.cc()),2&e){var t=c.$implicit;i.Kb(3),i.Qc("",t.first_name," ",t.last_name,""),i.Kb(2),i.Oc(i.rc(6,4,t.driving_license_expiration)),i.Kb(3),i.vc("routerLink","/dashboard/drivers/edit/"+t.driver_id)}}var g={total_loads:0,total_incomes:0,total_drivers:0,total_trucks:0,week_total_loads:0,week_ongoing_loads:0,week_pending_loads:0,week_total_drivers:0,week_total_incomes:0,week_total_trucks:0,assigned_drivers:0,unassigned_drivers:0,unavailable_drivers:0,available_trucks:0,assigned_trucks:0},h=[{path:"",component:function(){function e(e,c,t,r){this.tendoo=e,this.dashboard=c,this.drivers=t,this.loads=r,this.dashboardReport={current:g,previous:g},this.tableCrud={columns:{load:{label:"Load"},status:{label:"Status"},driver:{label:"Driver"}},labels:{list_title:"Ongoing Loads",list_description:"display all ongoing loads",create_title:"Create Load",create_description:"Will create new load",edit_title:"Edit an existing load",edit_description:"Load will be edited"},namespace:"brookr.loads",fields:[],links:{}},this.urlPrefix=Object(i.db)()?"":"/modules/brookr/brookr"}return e.prototype.ngOnInit=function(){var e=this;Object(a.a)([this.dashboard.getReport(),this.drivers.getByMedicalCard(),this.drivers.getByDriverCard(),this.loads.getUnassignedLoads()]).subscribe((function(c){e.parseReport(c[0]),e.driversByMedical=c[1],e.driversByLicense=c[2],e.unassignedLoads=c[3]}))},e.prototype.parseReport=function(e){this.dashboardReport.current=e.current||this.dashboardReport.current,this.dashboardReport.previous=e.previous||this.dashboardReport.previous},e.prototype.percentage=function(e){return 0!==this.dashboardReport.current[e]&&0!==this.dashboardReport.previous[e]?100*(this.dashboardReport.current[e]-this.dashboardReport.previous[e])/this.dashboardReport.current[e]:0},e.prototype.refreshDashboardReport=function(){var e=this;this.dashboard.refreshReport().subscribe((function(c){e.ngOnInit()}))},e.\u0275fac=function(c){return new(c||e)(i.Xb(o.b),i.Xb(s),i.Xb(n.a),i.Xb(l.a))},e.\u0275cmp=i.Rb({type:e,selectors:[["app-dashboard"]],decls:95,vars:19,consts:[[1,"flex","justify-between","items-center","mb-3"],[1,"text-2xl","text-gray-700","mb-4","block"],[1,"rounded-lg","border","hover:border-green-400","border-gray-400","h-10","w-10","flex","items-center","justify-center","hover:bg-green-100",3,"click"],[1,"top-dashboard","flex","flex-wrap","md:-mx-4"],[1,"flex-auto","px-4","w-full","md:w-1/3"],[1,"rounded","p-4","bg-green-200","flex"],[1,"w-20","h-20","rounded","flex","items-center","justify-center"],["alt","",3,"src"],[1,"flex-auto","pl-4"],[1,"text-sm","text-green-800","font-semibold"],[1,"text-4xl","text-green-800","font-extrabold"],[1,"flex","justify-between","items-end","text-green-600"],[1,"text-xs"],[1,"rounded","p-4","bg-blue-200","flex"],[1,"text-sm","text-blue-800","font-semibold"],[1,"text-4xl","text-blue-800","font-extrabold"],[1,"flex","justify-between","items-end","text-blue-600"],[1,"rounded","p-4","bg-orange-200","flex"],[1,"text-sm","text-orange-800","font-semibold"],[1,"text-4xl","text-orange-800","font-extrabold"],[1,"flex","justify-between","items-end","text-orange-600"],[1,"md:-mx-4","my-4","flex"],[1,"px-4","md:w-1/3"],[1,"bg-gray-200"],[1,"title","text-xl","border-b","border-gray-400","p-4","text-gray-700"],[1,"content"],["class","px-4 py-2 border-b border-gray-300 flex justify-between items-center",4,"ngFor","ngForOf"],[1,"px-4","py-2","border-b","border-gray-300","flex","justify-center","items-center"],["routerLink","/dashboard/drivers",1,"text-gray-700","hover:text-green-600","hover:text-underline"],[1,"px-4","md:w-2/3"],[1,"bg-teal-200"],[1,"title","text-xl","border-b","border-teal-400","p-4","text-gray-700"],["class","px-4 py-2 border-b border-teal-300 flex justify-between items-center",4,"ngFor","ngForOf"],[1,"px-4","py-2","border-b","border-gray-300","flex","justify-between","items-center"],[1,"text-gray-700","flex","flex-auto","justify-between","items-center"],[1,"ml-4"],[1,"rounded-lg","bg-white","px-2","py-1","shadow","text-sm","hover:bg-green-400","hover:text-white",3,"routerLink"],[1,"px-4","py-2","border-b","border-teal-300","flex","justify-between","items-center"],[1,"text-teal-700","flex","flex-auto","justify-between","mr-4"],[1,"flex","flex-col"],[1,"text-lg","block"],[1,"text-xs","mt-1","block"],[1,"rounded-lg","bg-white","px-2","py-1","shadow","text-sm","hover:bg-teal-600","hover:text-white",3,"routerLink"]],template:function(e,c){1&e&&(i.dc(0,"app-layout"),i.dc(1,"div",0),i.dc(2,"span",1),i.Nc(3,"Activity Overview"),i.cc(),i.dc(4,"button",2),i.lc("click",(function(){return c.refreshDashboardReport()})),i.dc(5,"mat-icon"),i.Nc(6,"refresh"),i.cc(),i.cc(),i.cc(),i.dc(7,"div",3),i.dc(8,"div",4),i.dc(9,"div",5),i.dc(10,"div",6),i.Yb(11,"img",7),i.cc(),i.dc(12,"div",8),i.dc(13,"p",9),i.Nc(14,"Loads This Week"),i.cc(),i.dc(15,"p",10),i.Nc(16),i.cc(),i.dc(17,"div",11),i.dc(18,"span",12),i.Nc(19),i.cc(),i.dc(20,"span",12),i.Nc(21),i.cc(),i.cc(),i.dc(22,"div",11),i.dc(23,"span",12),i.Nc(24),i.cc(),i.dc(25,"span",12),i.Nc(26),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(27,"div",4),i.dc(28,"div",13),i.dc(29,"div",6),i.Yb(30,"img",7),i.cc(),i.dc(31,"div",8),i.dc(32,"p",14),i.Nc(33,"Income This week"),i.cc(),i.dc(34,"p",15),i.Nc(35),i.cc(),i.dc(36,"div",16),i.dc(37,"span",12),i.Nc(38),i.cc(),i.dc(39,"span",12),i.Nc(40),i.cc(),i.cc(),i.dc(41,"div",16),i.dc(42,"span",12),i.Nc(43,"-"),i.cc(),i.dc(44,"span",12),i.Nc(45,"-"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(46,"div",4),i.dc(47,"div",17),i.dc(48,"div",6),i.Yb(49,"img",7),i.cc(),i.dc(50,"div",8),i.dc(51,"p",18),i.Nc(52,"Drivers Avaialble"),i.cc(),i.dc(53,"p",19),i.Nc(54),i.cc(),i.dc(55,"div",20),i.dc(56,"span",12),i.Nc(57),i.cc(),i.dc(58,"span",12),i.Nc(59),i.cc(),i.cc(),i.dc(60,"div",20),i.dc(61,"span",12),i.Nc(62),i.cc(),i.dc(63,"span",12),i.Nc(64),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(65,"div",21),i.dc(66,"div",22),i.dc(67,"div",23),i.dc(68,"div",24),i.Nc(69,"Medical Expiration"),i.cc(),i.dc(70,"div",25),i.dc(71,"ul"),i.Mc(72,u,10,6,"li",26),i.dc(73,"li",27),i.dc(74,"a",28),i.Nc(75,"See Full List"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(76,"div",29),i.dc(77,"div",30),i.dc(78,"div",31),i.Nc(79,"Unassigned Loads"),i.cc(),i.dc(80,"div",25),i.dc(81,"ul"),i.Mc(82,v,15,7,"li",32),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(83,"div",21),i.dc(84,"div",22),i.dc(85,"div",23),i.dc(86,"div",24),i.Nc(87,"License Expiration"),i.cc(),i.dc(88,"div",25),i.dc(89,"ul"),i.Mc(90,f,10,6,"li",26),i.dc(91,"li",27),i.dc(92,"a",28),i.Nc(93,"See Full List"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.Yb(94,"div",29),i.cc(),i.cc()),2&e&&(i.Kb(11),i.vc("src",c.urlPrefix+"/assets/images/trailer.png",i.Hc),i.Kb(5),i.Oc(c.dashboardReport.current.total_loads),i.Kb(3),i.Pc("",c.percentage("week_total_loads")+"%"," "),i.Kb(2),i.Pc("",c.dashboardReport.previous.week_pending_loads," Last week"),i.Kb(3),i.Pc("",c.dashboardReport.current.week_pending_loads," Pending"),i.Kb(2),i.Pc("",c.dashboardReport.current.week_ongoing_loads," Ongoing"),i.Kb(4),i.vc("src",c.urlPrefix+"/assets/images/income.png",i.Hc),i.Kb(5),i.Oc(c.dashboardReport.current.total_incomes),i.Kb(3),i.Oc(c.percentage("week_total_incomes")+"%"),i.Kb(2),i.Pc("",c.dashboardReport.previous.total_incomes," Last week"),i.Kb(9),i.vc("src",c.urlPrefix+"/assets/images/steering-wheel.png",i.Hc),i.Kb(5),i.Oc(c.dashboardReport.current.total_drivers),i.Kb(3),i.Pc("Available Drivers ",c.dashboardReport.current.unassigned_drivers,""),i.Kb(2),i.Pc("Trucks ",c.dashboardReport.current.total_trucks,""),i.Kb(3),i.Pc("Available Trucks ",c.dashboardReport.current.available_trucks,""),i.Kb(2),i.Pc("Assigned ",c.dashboardReport.current.assigned_trucks,""),i.Kb(8),i.vc("ngForOf",c.driversByMedical),i.Kb(10),i.vc("ngForOf",c.unassignedLoads),i.Kb(8),i.vc("ngForOf",c.driversByLicense))},directives:[b.a,p.a,r.k,d.d,d.c],pipes:[r.e],styles:[""]}),e}()}],x=function(){function e(){}return e.\u0275mod=i.Vb({type:e}),e.\u0275inj=i.Ub({factory:function(c){return new(c||e)},imports:[[d.e.forChild(h)],d.e]}),e}(),m=t("vvyD"),_=t("428I");t.d(c,"DashboardModule",(function(){return y}));var y=function(){function e(){}return e.\u0275mod=i.Vb({type:e}),e.\u0275inj=i.Ub({factory:function(c){return new(c||e)},imports:[[r.c,x,m.a,_.a]]}),e}()}}]);