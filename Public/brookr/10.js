(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{JwJk:function(e,t,r){"use strict";r.r(t),t.default=""},OFwN:function(e,t,r){"use strict";r.r(t),t.default="<app-layout>\r\n    <h1>Loads Report</h1>\r\n</app-layout>"},"Pqm/":function(e,t,r){"use strict";r.r(t),t.default=""},gWhe:function(e,t,r){"use strict";r.r(t),t.default="<app-layout>\r\n    <h1>Driver Report</h1>\r\n</app-layout>"},"mSW+":function(e,t,r){"use strict";r.r(t),t.default='<app-layout>\n    <div class="mb-4 text-gray-800">\n        <span class="block text-2xl mb-2">Companies Report</span> \n        <p class="text-sm">Build the company report</p>\n    </div>\n    <div class="flex w-full flex-col">\n        <div class="border-gray-600 border-b-2 mb-3">\n            <form class="report-header flex -mx-4 items-center" (change)="loadDriversForCompany()" *ngIf="companyFormGroup" [formGroup]="companyFormGroup">\n                <div class="px-4 w-full md:w-1/4">\n                    <cb-field [field]="companyFields[0]" [group]="companyFormGroup"></cb-field>\n                </div>\n                <div class="px-4 w-full md:w-1/4">\n                    <cb-field [field]="companyFields[3]" [group]="companyFormGroup"></cb-field>\n                </div>\n                <div class="px-4 w-full md:w-1/4">\n                    <cb-field [field]="companyFields[1]" [group]="companyFormGroup"></cb-field>\n                </div>\n                <div class="px-4 w-full md:w-1/4">\n                    <cb-field [field]="companyFields[2]" [group]="companyFormGroup"></cb-field>\n                </div>\n                <div class="px-4 -mx-2 w-full md:w-1/4 flex justify-end">\n                    <div class="px-2">\n                        <button (click)="companyFormGroup.reset()" class="rounded-lg  shadow px-3 py-2 bg-red-600 text-white">Clear</button>\n                    </div>\n                    <div class="px-2">\n                        <button (click)="loadReport()" class="rounded-lg  shadow px-3 py-2 bg-blue-600 text-white">Load Report</button>\n                    </div>\n                </div>\n            </form>\n        </div>\n        <div class="report-wrapper">\n            <div class="tab tab-container">\n                <div class="tabs-header flex" style="margin-bottom: -2px;">\n                    <div *ngFor="let section of sections" [ngClass]="{\n                        \'bg-gray-100\' : section.active,\n                        \'bg-gray-300\' : ! section.active\n                    }" (click)="setSectionActive( section )" class="tab px-4 py-2 border-2 border-b-0 rounded-t-lg cursor-pointer flex items-center justify center">\n                        {{ section.title }}\n                    </div>\n                </div>\n                <div class="bg-gray-100 border-2">\n                    <ng-container *ngIf="activeSection.identifier === \'summary\'">\n                        <div class="tabs-container">\n                            <div class="inner-content p-2">\n                                <div>\n                                    <table class="table table-fixed">\n                                        <thead>\n                                            <tr>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Load #</th>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Pickup Date</th>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Broker Name</th>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Pickup#</th>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Pickup City</th>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Desination City</th>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Driver</th>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Trailer #</th>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Empty Trailer#</th>\n                                                <th class="py-2 w-48 flex-shrink-0 font-bold border border-gray-600 bg-gray-400 py-3 flex-auto text-center text-gray-800">Rate</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody class="bg-white">\n                                            <tr *ngFor="let load of fullReport.loads">\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.load_reference }}</td>\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.pickup_date }}</td>\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.customer.details.first_name + \' \' + load.customer.details.last_name }}</td>\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.pickup_reference }}</td>\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.pickup_city }}</td>\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.delivery_city }}</td>\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.driver.details.first_name + \' \' + load.driver.details.last_name  }}</td>\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.drop_trailer }}</td>\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.empty_trailer }}</td>\n                                                <td class="border border-gray-400 px-3 py-2 text-center">{{ load.cost }}</td>\n                                            </tr>\n                                            <tr *ngIf="fullReport.loads.length === 0">\n                                                <td colspan="10" class="border border-gray-400 px-3 py-2 text-center">There is nothing to display. Consider loading the report</td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                                <div class="flex -mx-4">\n                                    <div class="w-1/2">\n                                        <div class="flex px-4 -mx-4 my-4">\n                                            <div class="px-4 flex-shrink-0 w-1/2 -my-2">\n                                                <div class="py-2">\n                                                    <table class="table table-fixed w-full">\n                                                        <thead>\n                                                            <tr>\n                                                                <th class="py-2 border border-green-400 bg-green-200 py-3 flex-auto text-center">Fuel </th>\n                                                                <th class="py-2 border border-green-400 bg-green-200 py-3 flex-auto text-center">Value</th>\n                                                            </tr>\n                                                        </thead>\n                                                        <tbody class="bg-white text-gray-800">\n                                                            <tr *ngFor="let fuel of fullReport.fuels">\n                                                                <td class="border border-gray-400 px-3 py-2">{{ fuel.date }}</td>\n                                                                <td class="border border-gray-400 px-3 py-2 text-right">{{ fuel.amount }}</td>\n                                                            </tr>\n                                                            <tr *ngIf="fullReport.fuels?.length === 0">\n                                                                <td class="border border-gray-400 px-3 py-2 text-center" colspan="2">No fuel record</td>\n                                                            </tr>\n                                                        </tbody>\n                                                    </table>\n                                                </div>\n                                                <div class="py-2">\n                                                    <table class="table table-fixed w-full">\n                                                        <thead>\n                                                            <tr>\n                                                                <th class="py-1 border border-red-400 bg-red-200 py-3 flex-auto text-center">Driver Advance</th>\n                                                                <th class="py-1 border border-red-400 bg-red-200 py-3 flex-auto text-center">Value</th>\n                                                            </tr>\n                                                        </thead>\n                                                        <tbody class="bg-white text-gray-800">\n                                                            <tr *ngFor="let payment of fullReport.payments">\n                                                                <td class="border border-gray-400 px-3 py-1">{{ payment.date }}</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ payment.amount }}</td>\n                                                            </tr>\n                                                            <tr *ngIf="fullReport.payments.length === 0">\n                                                                <td colspan="2" class="border border-gray-400 px-3 py-1 text-center">No payments to display</td>\n                                                            </tr>\n                                                        </tbody>\n                                                    </table>\n                                                </div>\n                                            </div>\n                                            <div class="px-4 flex-shrink-0 w-1/2 -my-2">\n                                                <div class="py-2">\n                                                    <table class="table table-fixed w-full">\n                                                        <thead>\n                                                            <tr>\n                                                                <th colspan="2" class="py-1 border border-purple-400 text-gray-800 bg-purple-200 py-3 flex-auto text-center">Expenses</th>\n                                                            </tr>\n                                                        </thead>\n                                                        <tbody class="bg-white text-gray-800">\n                                                            <tr>\n                                                                <td class="border border-gray-400 px-3 py-1">Insurance Fees (${{ fullReport?.company.insurance_fees || 0 }})</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ fullReport.report.total_insurance_fees || \'$ 0\' }}</td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class="border border-gray-400 px-3 py-1">Elog Fees (${{ fullReport?.company.elog_fees || 0 }})</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ fullReport.report.total_elog_fees || \'$ 0\' }}</td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class="border border-gray-400 px-3 py-1">Compliance Fees (${{ fullReport?.company.compliance_fees || 0 }})</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ fullReport.report.total_compliance_fees || \'$ 0\' }}</td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class="border border-gray-400 px-3 py-1">ComData (${{ fullReport?.company.comdata_fees || 0 }})</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ fullReport.report.total_comdata_fees || \'$ 0\' }}</td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class="border border-gray-400 px-3 py-1">ACH (${{ fullReport?.company.comdata_fees || 0 }})</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ fullReport.report.total_ach_fees || \'$ 0\' }}</td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class="border border-gray-400 px-3 py-1">Detention Fees ({{ fullReport?.company.detention_fees || 0 }}%)</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ fullReport.report.total_detention_fees || \'$ 0\' }}</td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class="border border-gray-400 px-3 py-1">Tonu Fees ({{ fullReport?.company.tonu_fees || 0 }}%)</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ fullReport.report.total_tonu_fees || \'$ 0\' }}</td>\n                                                            </tr>\n                                                            <tr class="bg-purple-200 text-gray-800 border border-purple-400">\n                                                                <td class="border border-purple-400 px-3 py-1">Total</td>\n                                                                <td class="border border-purple-400  px-3 py-1 text-right">{{ fullReport.report.total_expenses || \'$ 0\' }}</td>\n                                                            </tr>\n                                                        </tbody>\n                                                    </table>\n                                                </div>\n                                                <div class="py-2">\n                                                    <table class="table table-fixed w-full">\n                                                        <thead>\n                                                            <tr>\n                                                                <th colspan="2" class="py-1 border border-indigo-400 text-gray-800 bg-indigo-200 py-3 flex-auto text-center">Additional Payment </th>\n                                                            </tr>\n                                                        </thead>\n                                                        <tbody class="bg-white text-gray-800">\n                                                            <tr>\n                                                                <td class="border border-gray-400 px-3 py-1">Lumper Fees ({{fullReport?.company.lumper_fees || 0 }}%)</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ fullReport.report.total_lumper_fees || \'$ 0\' }}</td>\n                                                            </tr>\n                                                            <tr>\n                                                                <td class="border border-gray-400 px-3 py-1">Escort Fees ({{fullReport?.company.escort_fees || 0 }}%)</td>\n                                                                <td class="border border-gray-400 px-3 py-1 text-right">{{ fullReport.report.total_escort_fees || \'$ 0\' }}</td>\n                                                            </tr>\n                                                        </tbody>\n                                                    </table>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="w-1/2">\n                                        <div class="flex px-4 -mx-4 my-4">\n                                            <div class="flex-shrink-0 px-4 w-full">\n                                                <table class="table table-fixed w-full">\n                                                    <thead>\n                                                        <tr>\n                                                            <th class="py-2 border text-gray-800 border-blue-400 bg-blue-200 py-3 flex-auto text-center">Summary</th>\n                                                            <th class="py-2 border text-gray-800 border-blue-400 bg-blue-200 py-3 flex-auto text-center">Value</th>\n                                                        </tr>\n                                                    </thead>\n                                                    <tbody class="bg-white text-gray-800">\n                                                        <tr>\n                                                            <td class="border border-gray-400 px-3 py-2">Gross Earning</td>\n                                                            <td class="border border-gray-400 px-3 py-2 text-right">{{ fullReport.report.gross_earning || \'$ 0\' }}</td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td class="border border-gray-400 px-3 py-2">Dispatch Fees ({{ fullReport.company?.paid_rate || 0 }}%)</td>\n                                                            <td class="border border-gray-400 px-3 py-2 text-right">{{ fullReport.report.dispatch_fees || \'$ 0\' }}</td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td class="border border-gray-400 px-3 py-2">Net Earning</td>\n                                                            <td class="border border-gray-400 px-3 py-2 text-right">{{ fullReport.report.net_after_dispatch || \'$ 0\' }}</td>\n                                                        </tr>\n                                                        <tr class="bg-green-200">\n                                                            <td class="border border-green-400 px-3 py-2">Fuel</td>\n                                                            <td class="border border-green-400 px-3 py-2 text-right">{{ fullReport.report.fuel_charge || \'$ 0\' }}</td>\n                                                        </tr>\n                                                        <tr class="bg-red-200">\n                                                            <td class="border border-red-400 px-3 py-2">Driver Advance</td>\n                                                            <td class="border border-red-400 px-3 py-2 text-right">{{ fullReport.report.driver_advance_payment || \'$ 0\' }}</td>\n                                                        </tr>\n                                                        <tr class="bg-purple-200">\n                                                            <td class="border border-purple-400 px-3 py-2">Expenses</td>\n                                                            <td class="border border-purple-400 px-3 py-2 text-right">{{ fullReport.report.total_expenses || \'$ 0\' }}</td>\n                                                        </tr>\n                                                        <tr class="border-indigo-400 bg-indigo-200">\n                                                            <td class="border border-indigo-400 px-3 py-2">Additional Payment</td>\n                                                            <td class="border border-indigo-400 px-3 py-2 text-right">{{ fullReport.report.additional_payment || \'$ 0\' }}</td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td class="border border-gray-400 px-3 py-2">Net Payment</td>\n                                                            <td class="border border-gray-400 px-3 py-2 text-right">{{ fullReport.report.net_earning || \'$ 0\' }}</td>\n                                                        </tr>\n                                                    </tbody>\n                                                </table>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>  \n                        </div>\n                    </ng-container>\n                    <ng-container *ngIf="activeSection.identifier === \'fuel-management\'">\n                        <div class="tabs-container">\n                            <div class="inner-content p-2">\n                                <div class="-mx-4 flex">\n                                    <div class="px-4 w-full md:w-1/2">\n                                        <form [formGroup]="fuelForm">\n                                            <cb-field *ngFor="let field of fuelFields" [field]="field" [group]="fuelForm"></cb-field>\n                                        </form>\n                                        <div class="w-full flex justify-end">\n                                            <button (click)="saveFuelExpense()" mat-stroked-button color="primary">Save Fuel Expense</button>\n                                        </div>\n                                    </div>\n                                    <div class="px-4 w-full md:w-1/2">\n                                        <div class="table flex flex-auto w-full">\n                                            <table class="table flex-auto w-full">\n                                                <thead>\n                                                    <tr>\n                                                        <th class="border border-gray-400 bg-gray-200 py-2 w-1/3 text-gray-800">Amount</th>\n                                                        <th class="border border-gray-400 bg-gray-200 py-2 w-1/3 text-gray-800">Date</th>\n                                                        <th class="border border-gray-400 bg-gray-200 py-2 w-1/3 text-gray-800">Action</th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody>\n                                                    <tr *ngFor="let fuel of fuelRecords">\n                                                        <td class="border border-gray-400 py-2 w-1/3 text-gray-800 text-center bg-white">{{ fuel.amount }}</td>\n                                                        <td class="border border-gray-400 py-2 w-1/3 text-gray-800 text-center bg-white">{{ fuel.date }}</td>\n                                                        <td class="border border-gray-400 py-2 w-1/3 text-gray-800 text-center bg-white">\n                                                            <button (click)="deleteFuel( fuel )" class="px-2 py-1 rounded-full bg-red-400 text-white">Delete</button>\n                                                        </td>\n                                                    </tr>\n                                                    <tr *ngIf="! fuelRecords || fuelRecords?.length === 0">\n                                                        <td class="border border-gray-400 py-2 w-1/3 text-gray-800 text-center bg-white" colspan="3">No fuel record for this report</td>\n                                                    </tr>\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>  \n                        </div>\n                    </ng-container>\n                </div>\n            </div>\n        </div>\n    </div>\n</app-layout>'},tI3r:function(e,t,r){"use strict";r.r(t),t.default=""},uHdG:function(e,t,r){"use strict";r.r(t),r.d(t,"ReportsModule",(function(){return E}));var n=r("LoAr"),o=r("WT9V"),a=r("981U"),l=function(e,t,r,n){var o,a=arguments.length,l=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(l=(a<3?o(l):a>3?o(t,r,l):o(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e){return e&&e.__esModule?e:{default:e}},i=function(){function e(){}return e.prototype.ngOnInit=function(){},e=l([Object(n.n)({selector:"app-drivers-report",template:s(r("gWhe")).default,styles:[s(r("Pqm/")).default]}),d("design:paramtypes",[])],e)}(),p=function(e,t,r,n){var o,a=arguments.length,l=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(l=(a<3?o(l):a>3?o(t,r,l):o(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){return e&&e.__esModule?e:{default:e}},f=function(){function e(){}return e.prototype.ngOnInit=function(){},e=p([Object(n.n)({selector:"app-loads-report",template:u(r("OFwN")).default,styles:[u(r("tI3r")).default]}),c("design:paramtypes",[])],e)}(),y=r("AFHi"),b=r("CD38"),g=r("z35L"),m=function(){return(m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=function(e,t,r,n){var o,a=arguments.length,l=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(l=(a<3?o(l):a>3?o(t,r,l):o(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l},x=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e){this.tendoo=e}return e.prototype.loadReport=function(e){return this.tendoo.post(this.tendoo.baseUrl+"brookr/companies/report",e)},e.prototype.getCompanies=function(){return this.tendoo.get(this.tendoo.baseUrl+"brookr/companies")},e.prototype.getCompaniesFuels=function(e){return this.tendoo.post(this.tendoo.baseUrl+"brookr/companies/get-fuels",e)},e.prototype.getCompanyDrivers=function(e){return this.tendoo.get(this.tendoo.baseUrl+"brookr/companies/"+e+"/drivers")},e.prototype.saveFuelExpense=function(e,t,r){return this.tendoo.post(this.tendoo.baseUrl+"brookr/companies/"+e.company_id+"/fuel",m(m({},e),{amount:t,report_id:r}))},e.ctorParameters=function(){return[{type:g.b}]},e=h([Object(n.E)({providedIn:"root"}),x("design:paramtypes",[g.b])],e)}(),w=r("wgY5"),R=r("qptw"),_=r("8YcR"),F=function(){return(F=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},k=function(e,t,r,n){var o,a=arguments.length,l=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(l=(a<3?o(l):a>3?o(t,r,l):o(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l},O=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},j=function(e){return e&&e.__esModule?e:{default:e}},D=function(){function e(e,t,r,n){this.companiesService=e,this.snackbar=t,this.dialog=r,this.tendoo=n,this.sections=[{title:"Summary",identifier:"summary",active:!0},{title:"Fuel Management",identifier:"fuel-management",active:!1}],this.fullReport={loads:[],company:{},report:{},drivers:[],payments:[],fuels:[]},this.fuelFields=[{type:"text",label:"Cost",description:"Add a new fuel expense to the current load",validation:"required",appearance:"outline",name:"fuel"}],this.companyFields=[{type:"select",name:"company_id",label:"Select Company",description:"For which company the report should be generated.",validation:"required"},{type:"ng-datetime",name:"range_start",label:"Range Start",description:"Select the range start. Time starts at 00:00am",validation:"required"},{type:"ng-datetime",name:"range_end",label:"Range End",description:"Select the range ends. Time ends at 11:59pm",validation:"required"},{type:"select",options:[],name:"driver_id",label:"Driver",description:"Select the driver from the company from which you would like to generate the report.",validation:"required"}],this.reportLoaded=!1}return e.prototype.ngOnChanges=function(){},e.prototype.ngOnInit=function(){var e=this;this.fuelForm=b.a.buildFormGroup(this.fuelFields).formGroup,this.companiesService.getCompanies().subscribe((function(t){var r=[];t.forEach((function(e){r.push({label:e.name,value:e.id})})),e.companyFields[0].options=r,e.companyFormGroup=b.a.buildFormGroup(e.companyFields).formGroup,e.companyFormGroup.valueChanges.subscribe((function(t){console.log(t),null!==t.company_id&&null===t.driver_id&&e.companiesService.getCompanyDrivers(t.company_id).subscribe((function(t){e.companyFields[3].options=t.drivers.map((function(e){return{label:e.details.first_name+" "+e.details.last_name,value:e.id}}))}))}))}))},e.prototype.saveFuelExpense=function(){var e=this;this.companiesService.saveFuelExpense(this.companyFormGroup.value,this.fuelFields[0].control.value,this.fullReport.report.id).subscribe((function(t){e.snackbar.open(t.message,"OK",{duration:3e3}),e.loadHistory(),e.fuelForm.reset()}))},e.prototype.setSectionActive=function(e){if(!this.reportLoaded)return this.snackbar.open("Please specificy the time range and the company for which you would like to manage the report","OK",{duration:6e3});this.sections.forEach((function(e){return e.active=!1})),e.active=!0,"fuel-management"===e.identifier&&this.loadHistory()},e.prototype.loadHistory=function(){var e=this;if(void 0===this.companyFormGroup.get("company_id").value||0===this.companyFormGroup.get("company_id").value.length)return this.snackbar.open("Consider selecting the company, the start and ending date used as the period during which the fuel record are attached.","RETRY",{duration:2e4}).afterDismissed().subscribe((function(t){t.dismissedByAction&&e.loadHistory()}));this.companiesService.getCompaniesFuels(F(F({},this.companyFormGroup.value),{report_id:this.fullReport.report.id})).subscribe((function(t){e.fuelRecords=t}))},Object.defineProperty(e.prototype,"activeSection",{get:function(){return this.sections.filter((function(e){return e.active}))[0]},enumerable:!0,configurable:!0}),e.prototype.deleteFuel=function(e){var t=this;this.dialog.open(y.b,{id:"confirm-fuel-deletion",data:{title:"Delete the Fuel Record",message:"The selected fueld record will be deleted.",buttons:[{label:"Yes",onClick:function(){t.tendoo.delete(t.tendoo.baseUrl+"brookr/companies/fuel/"+e.id).subscribe((function(e){t.snackbar.open(e.message,"OK",{duration:3e3}),t.loadHistory(),t.dialog.getDialogById("confirm-fuel-deletion").close()}))}},{label:"No",onClick:function(){t.dialog.getDialogById("confirm-fuel-deletion").close()}}]}})},e.prototype.loadReport=function(){var e=this;if(this.companyFormGroup.invalid)return this.snackbar.open("Unable to generate a report. Please make sure to select a company and a time range.","OK",{duration:5e3});var t=this.companyFormGroup.value;t.range_start=w(t.range_start).format("YYYY-MM-DDTHH:mm:ss"),t.range_end=w(t.range_end).format("YYYY-MM-DDTHH:mm:ss"),this.companiesService.loadReport(t).subscribe((function(t){e.reportLoaded=!0,e.fullReport=t}),(function(t){e.snackbar.open(t.error.message||t.message,"OK",{duration:1e4})}))},e.ctorParameters=function(){return[{type:v},{type:R.a},{type:_.b},{type:g.b}]},e=k([Object(n.n)({selector:"app-companies-report",template:j(r("mSW+")).default,styles:[j(r("JwJk")).default]}),O("design:paramtypes",[v,R.a,_.b,g.b])],e)}(),P=function(e,t,r,n){var o,a=arguments.length,l=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(l=(a<3?o(l):a>3?o(t,r,l):o(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l},C=[{path:"drivers",component:i},{path:"loads",component:f},{path:"companies",component:D}],G=function(){function e(){}return e=P([Object(n.M)({imports:[a.c.forChild(C)],exports:[a.c]})],e)}(),$=r("428I"),S=function(e,t,r,n){var o,a=arguments.length,l=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(l=(a<3?o(l):a>3?o(t,r,l):o(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l},E=function(){function e(){}return e=S([Object(n.M)({declarations:[i,f,D],imports:[o.c,G,$.a]})],e)}()}}]);