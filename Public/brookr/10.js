(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{CD38:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("1C3z"),o=n("ZSGP"),c=function(){function t(){}return t.from=function(t){if(t){"string"!=typeof t&&(t=(t=t.filter((function(t){return"string"==typeof t}))).join("|"));var e,n=[],r=t.split("|"),c=/(min)\:([0-9])+/g,i=/(max)\:([0-9])+/g,s=/(same):(\w+)/g;return r.forEach((function(t){var r;"required"==t?n.push(o.s.required):"email"==t?n.push(o.s.email):(e=c.exec(t))?n.push(o.s.minLength(e[2])):(e=i.exec(t))?n.push(o.s.maxLength(e[2])):(e=s.exec(t))?n.push((r=e[2],function(t){return t.value!==t.parent.get(r).value?{matches:{formControl:t.parent.get(r),formControlName:r}}:null})):"number"==t&&n.push((function(t){return/^\d+$/.exec(t.value)?null:{number:!0}}))})),n}return null},t.extractControls=function(t,e){var n=this;void 0===e&&(e=!1);var r={};return t.forEach((function(t){if(void 0===t.control&&0==e)throw'Unable to use the validation control for the field : "'+t.name+"\". Please make sure to define the '.control' property for this field.";t.control&&(t.control.setValidators(n.from(t.validation)),r[t.name]=t.control)})),r},t.buildFormControls=function(t){return t.forEach((function(t){null==t.control?t.control=new o.d(t.value?t.value:null):t.control.setValue(t.value)})),this.extractControls(t)},t.buildFormControl=function(t){return null==t.control?t.control=new o.d(t.value||null):t.control.setValue(t.value||null),t.reset=new r.p,this.extractControls([t])[t.name]},t.touchAllFields=function(t){Object.keys(t.controls).forEach((function(e){t.get(e).markAsTouched()}))},t.buildFormGroup=function(e){return e.forEach((function(e){e.control=t.buildFormControl(e)})),{fields:e,formGroup:new o.g(t.extractControls(e))}},t.deactivateFields=function(t){t.forEach((function(t){return t.control.disable()}))},t.enableFields=function(t){t.forEach((function(t){return t.control.enable()}))},t.throwFieldsError=function(t,e,n){var r=function(r){t.get(r).setErrors({error:!0}),e.forEach((function(t){t.name===r&&(t.errors=n[t.name])}))};for(var o in n)r(o)},t.noNullValue=function(t){var e={};for(var n in t.value)null!==t.value[n]&&(e[n]=t.value[n]);return e},t.buildForm=function(e){var n={};return e.sections.forEach((function(e){var r=t.buildFormGroup(e.fields).formGroup;e.formGroup=r,n[e.namespace]=e.formGroup})),e.formGroup=new o.g(n),e},t.touchFormFields=function(e){e.sections.forEach((function(e){return t.touchAllFields(e.formGroup)}))},t.deactivateFormFiiels=function(e){e.sections.forEach((function(e){return t.deactivateFields(e.fields)}))},t.enableFormFields=function(e){e.sections.forEach((function(e){return t.enableFields(e.fields)}))},t}()},eTQ6:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("1C3z"),o=n("CD38"),c=n("8AiQ"),i=n("AFHi");function s(t,e){1&t&&(r.dc(0,"span",10),r.Nc(1,"5"),r.cc())}var a=function(t,e){return{"bg-gray-100":t,"bg-gray-300":e}};function u(t,e){if(1&t){var n=r.ec();r.dc(0,"div",8),r.lc("click",(function(){r.Gc(n);var t=e.$implicit;return r.pc(2).selectThis(t)})),r.Nc(1),r.Mc(2,s,2,0,"span",9),r.cc()}if(2&t){var o=e.$implicit,c=r.pc(2);r.vc("ngClass",r.yc(3,a,o.active,!o.active)),r.Kb(1),r.Pc(" ",o.title," "),r.Kb(1),r.vc("ngIf",null!==c.form.formGroup.errors)}}function f(t,e){if(1&t&&(r.dc(0,"div",16),r.Yb(1,"cb-field",17),r.cc()),2&t){var n=e.$implicit,o=r.pc(2).$implicit;r.Kb(1),r.vc("field",n)("group",o.formGroup)}}function l(t,e){if(1&t&&(r.dc(0,"div",12),r.dc(1,"div",13),r.dc(2,"div",14),r.Mc(3,f,2,2,"div",15),r.cc(),r.cc(),r.cc()),2&t){var n=r.pc().$implicit;r.Kb(3),r.vc("ngForOf",n.fields)}}function d(t,e){if(1&t&&(r.bc(0),r.Mc(1,l,4,1,"div",11),r.ac()),2&t){var n=e.$implicit;r.Kb(1),r.vc("ngIf",n.active)}}function p(t,e){if(1&t){var n=r.ec();r.dc(0,"div",1),r.dc(1,"div",2),r.Mc(2,u,3,6,"div",3),r.cc(),r.dc(3,"div",4),r.Mc(4,d,2,1,"ng-container",5),r.dc(5,"div",6),r.dc(6,"div"),r.dc(7,"button",7),r.lc("click",(function(){return r.Gc(n),r.pc().submitForm()})),r.Nc(8,"Save"),r.cc(),r.cc(),r.cc(),r.cc(),r.cc()}if(2&t){var o=r.pc();r.Kb(2),r.vc("ngForOf",o.renderable),r.Kb(2),r.vc("ngForOf",o.form.sections)}}var m=function(){function t(){this.submit=new r.p}return t.prototype.ngOnInit=function(){console.log(this.form),this.renderable.forEach((function(t,e){t.active=0===e})),void 0===this.form.formGroup&&(this.form=o.a.buildForm(this.form))},t.prototype.selectThis=function(t){this.form.sections.forEach((function(t){return t.active=!1})),t.active=!0},t.prototype.submitForm=function(){this.submit.emit(this.form)},Object.defineProperty(t.prototype,"renderable",{get:function(){return this.form.sections.filter((function(t){return void 0===t.render||!1!==t.render}))},enumerable:!0,configurable:!0}),t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Rb({type:t,selectors:[["app-tabs"]],inputs:{form:"form"},outputs:{submit:"submit"},decls:1,vars:1,consts:[["class","tab tab-container",4,"ngIf"],[1,"tab","tab-container"],[1,"tabs-header","flex",2,"margin-bottom","-2px"],["class","tab px-4 py-2 border-2 border-b-0 rounded-t-lg cursor-pointer flex items-center justify center",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"bg-gray-100","border-2"],[4,"ngFor","ngForOf"],[1,"footer","border-t","p-2","flex"],[1,"rounded","bg-green-200","text-green-600","text-center","px-4","py-2","shadow","border","border-green-600","active:shadow-none",3,"click"],[1,"tab","px-4","py-2","border-2","border-b-0","rounded-t-lg","cursor-pointer","flex","items-center","justify","center",3,"ngClass","click"],["class","inline-block ml-2 rounded-full flex justify-center items-center h-6 w-6 bg-red-700 text-white",4,"ngIf"],[1,"inline-block","ml-2","rounded-full","flex","justify-center","items-center","h-6","w-6","bg-red-700","text-white"],["class","tabs-container",4,"ngIf"],[1,"tabs-container"],[1,"inner-content","p-2"],[1,"-mx-2","flex","flex-wrap"],["class","px-2 w-full md:w-1/2",4,"ngFor","ngForOf"],[1,"px-2","w-full","md:w-1/2"],[3,"field","group"]],template:function(t,e){1&t&&r.Mc(0,p,9,2,"div",0),2&t&&r.vc("ngIf",e.form)},directives:[c.l,c.k,c.j,i.d],styles:[""]}),t}()},vfUp:function(t,e,n){"use strict";n.r(e);var r=n("8AiQ"),o=n("5/c3"),c=n("1C3z"),i=n("z35L"),s=n("2pW/"),a=n("BLjT"),u=n("ryqd"),f=n("AFHi"),l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function d(t,e){if(1&t){var n=c.ec();c.dc(0,"cb-table",5),c.lc("action",(function(t){return c.Gc(n),c.pc().handleAction(t)}))("sort",(function(t){return c.Gc(n),c.pc().handleSort(t)}))("refresh",(function(t){return c.Gc(n),c.pc().handleRefresh(t)}))("page",(function(t){return c.Gc(n),c.pc().handlePagineNavigation(t)}))("search",(function(t){return c.Gc(n),c.pc().handleSearch(t)})),c.cc()}if(2&t){var r=c.pc();c.vc("is-loading",r.isLoading)("crud",r.config)}}var p=function(){function t(t,e,n,r){this.tendoo=t,this.snackbar=e,this.dialog=n,this.router=r,this.isLoading=!1,this.sort={},this.search={},this.page={},this.perPage={per_page:10}}return t.prototype.ngOnInit=function(){var t=this;this.tendoo.crud.getConfig("brookr.customers",l(l(l(l({},this.page),this.search),this.sort),this.perPage)).subscribe((function(e){t.config=e}))},t.prototype.handleAction=function(t){var e=this;"DELETE"===t.menu.type?this.tendoo.crud.delete(t.menu.url.replace("{id}",t.row.id)).subscribe((function(n){e.snackbar.open(n.message,"OK",{duration:3e3}),e.ngOnInit(),e.dialog.getDialogById(t.menu.namespace).close()}),(function(n){e.snackbar.open(n.error.message||"An unexpected error occured","OK",{duration:5e3}),e.dialog.getDialogById(t.menu.namespace).close()})):"GOTO"===t.menu.type&&this.router.navigateByUrl(t.menu.url.replace("{id}",t.row.id))},t.prototype.handleSort=function(t){this.sort=t,this.ngOnInit()},t.prototype.handleSearch=function(t){this.search={search:t},this.ngOnInit()},t.prototype.handleRefresh=function(t){this.ngOnInit()},t.prototype.handlePagineNavigation=function(t){this.perPage={per_page:t.pageSize},this.page={page:t.pageIndex+1},this.ngOnInit()},t.\u0275fac=function(e){return new(e||t)(c.Xb(i.b),c.Xb(s.a),c.Xb(a.b),c.Xb(o.b))},t.\u0275cmp=c.Rb({type:t,selectors:[["app-list"]],decls:8,vars:1,consts:[[1,"mb-4","text-gray-800"],[1,"block","text-2xl","mb-2"],[1,"text-sm"],[1,"flex","w-full"],["class","w-full",3,"is-loading","crud","action","sort","refresh","page","search",4,"ngIf"],[1,"w-full",3,"is-loading","crud","action","sort","refresh","page","search"]],template:function(t,e){1&t&&(c.dc(0,"app-layout"),c.dc(1,"div",0),c.dc(2,"span",1),c.Nc(3,"Customers"),c.cc(),c.dc(4,"p",2),c.Nc(5,"Manage available customers"),c.cc(),c.cc(),c.dc(6,"div",3),c.Mc(7,d,1,2,"cb-table",4),c.cc(),c.cc()),2&t&&(c.Kb(7),c.vc("ngIf",e.config))},directives:[u.a,r.l,f.b],styles:[""]}),t}(),m=n("CD38"),b=function(){function t(t){this.tendoo=t,this.baseUrl=this.tendoo.baseUrl}return t.prototype.createCustomer=function(t){return this.tendoo.post(this.baseUrl+"brookr/customers",t)},t.prototype.updateCustomer=function(t,e){return this.tendoo.put(this.baseUrl+"brookr/customers/"+t,e)},t.prototype.deleteCustomer=function(t){return this.tendoo.delete(this.baseUrl+"brookr/customers/"+t)},t.prototype.getCustomers=function(){return this.tendoo.get(this.baseUrl+"brookr/customers")},t.\u0275fac=function(e){return new(e||t)(c.hc(i.b))},t.\u0275prov=c.Tb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),h=n("eTQ6");function g(t,e){1&t&&(c.dc(0,"div",2),c.dc(1,"p",3),c.Nc(2,"Create Customer"),c.cc(),c.dc(3,"p",4),c.Nc(4,"Customers provide loads that are assigned to drivers."),c.cc(),c.cc())}function v(t,e){1&t&&(c.dc(0,"div",2),c.dc(1,"p",3),c.Nc(2,"Edit Customer"),c.cc(),c.dc(3,"p",4),c.Nc(4,"Customers provide loads that are assigned to drivers."),c.cc(),c.cc())}function y(t,e){if(1&t){var n=c.ec();c.dc(0,"app-tabs",5),c.lc("submit",(function(t){return c.Gc(n),c.pc().handleSubmit(t)})),c.cc()}if(2&t){var r=c.pc();c.vc("form",r.form)}}var x=function(){function t(t,e,n,r,o){var c=this;this.activatedRoute=t,this.tendoo=e,this.customerService=n,this.snackbar=r,this.router=o,this.mode="create",this.activatedRoute.paramMap.subscribe((function(t){t.get("id")&&(c.mode="edit",c.id=t.get("id"))})),this.tendoo.forms.getPublicForm("brookr.customers").subscribe((function(t){c.form=t}))}return t.prototype.ngOnInit=function(){},t.prototype.handleSubmit=function(t){var e=this;if(this.form.sections.forEach((function(t){return m.a.touchAllFields(t.formGroup)})),this.form.formGroup.invalid)return this.snackbar.open("Unable to prceed the form is not valid","OK",{duration:3e3});this.form.sections.forEach((function(t){return m.a.deactivateFields(t.fields)})),this.id?this.customerService.updateCustomer(this.id,this.form.formGroup.value).subscribe((function(t){e.snackbar.open(t.message,"OK",{duration:3e3}),e.form.sections.forEach((function(t){return m.a.enableFields(t.fields)}))}),(function(t){e.snackbar.open(t.error.message||t.message,"OK",{duration:3e3}),e.form.sections.forEach((function(t){return m.a.enableFields(t.fields)}))})):this.customerService.createCustomer(this.form.formGroup.value).subscribe((function(t){e.snackbar.open(t.message,"OK",{duration:3e3}),e.router.navigateByUrl("/dashboard/customers")}),(function(t){e.snackbar.open(t.error.message||t.message,"OK",{duration:3e3}),e.form.sections.forEach((function(t){return m.a.enableFields(t.fields)}))}))},t.\u0275fac=function(e){return new(e||t)(c.Xb(o.a),c.Xb(i.b),c.Xb(b),c.Xb(s.a),c.Xb(o.b))},t.\u0275cmp=c.Rb({type:t,selectors:[["app-manage"]],decls:4,vars:3,consts:[["class","mb-2",4,"ngIf"],[3,"form","submit",4,"ngIf"],[1,"mb-2"],[1,"text-2xl","mb-2","font-serif","text-gray-800"],[1,"text-gray-700"],[3,"form","submit"]],template:function(t,e){1&t&&(c.dc(0,"app-layout"),c.Mc(1,g,5,0,"div",0),c.Mc(2,v,5,0,"div",0),c.Mc(3,y,1,1,"app-tabs",1),c.cc()),2&t&&(c.Kb(1),c.vc("ngIf","create"===e.mode),c.Kb(1),c.vc("ngIf","edit"===e.mode),c.Kb(1),c.vc("ngIf",e.form))},directives:[u.a,r.l,h.a],styles:[""]}),t}(),F=[{path:"",component:p},{path:"create",component:x},{path:"edit/:id",component:x}],w=function(){function t(){}return t.\u0275mod=c.Vb({type:t}),t.\u0275inj=c.Ub({factory:function(e){return new(e||t)},imports:[[o.e.forChild(F)],o.e]}),t}(),C=n("428I");n.d(e,"CustomersModule",(function(){return k}));var k=function(){function t(){}return t.\u0275mod=c.Vb({type:t}),t.\u0275inj=c.Ub({factory:function(e){return new(e||t)},imports:[[r.c,w,C.a]]}),t}()}}]);